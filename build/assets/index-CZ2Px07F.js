function ig(o,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in o)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(o,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();function ag(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function og(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var r=o.default;if(typeof r=="function"){var n=function a(){return this instanceof a?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var c=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return o[a]}})}),n}var il={exports:{}},ys={},al={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function lg(){if(Wd)return we;Wd=1;var o=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(P,F,ye){this.props=P,this.context=F,this.refs=E,this.updater=ye||b}C.prototype.isReactComponent={},C.prototype.setState=function(P,F){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,F,"setState")},C.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=C.prototype;function D(P,F,ye){this.props=P,this.context=F,this.refs=E,this.updater=ye||b}var I=D.prototype=new T;I.constructor=D,S(I,C.prototype),I.isPureReactComponent=!0;var z=Array.isArray,L=Object.prototype.hasOwnProperty,B={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function X(P,F,ye){var $,me={},ve=null,Se=null;if(F!=null)for($ in F.ref!==void 0&&(Se=F.ref),F.key!==void 0&&(ve=""+F.key),F)L.call(F,$)&&!M.hasOwnProperty($)&&(me[$]=F[$]);var xe=arguments.length-2;if(xe===1)me.children=ye;else if(1<xe){for(var je=Array(xe),st=0;st<xe;st++)je[st]=arguments[st+2];me.children=je}if(P&&P.defaultProps)for($ in xe=P.defaultProps,xe)me[$]===void 0&&(me[$]=xe[$]);return{$$typeof:o,type:P,key:ve,ref:Se,props:me,_owner:B.current}}function W(P,F){return{$$typeof:o,type:P.type,key:F,ref:P.ref,props:P.props,_owner:P._owner}}function be(P){return typeof P=="object"&&P!==null&&P.$$typeof===o}function ee(P){var F={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ye){return F[ye]})}var G=/\/+/g;function Y(P,F){return typeof P=="object"&&P!==null&&P.key!=null?ee(""+P.key):F.toString(36)}function pe(P,F,ye,$,me){var ve=typeof P;(ve==="undefined"||ve==="boolean")&&(P=null);var Se=!1;if(P===null)Se=!0;else switch(ve){case"string":case"number":Se=!0;break;case"object":switch(P.$$typeof){case o:case r:Se=!0}}if(Se)return Se=P,me=me(Se),P=$===""?"."+Y(Se,0):$,z(me)?(ye="",P!=null&&(ye=P.replace(G,"$&/")+"/"),pe(me,F,ye,"",function(st){return st})):me!=null&&(be(me)&&(me=W(me,ye+(!me.key||Se&&Se.key===me.key?"":(""+me.key).replace(G,"$&/")+"/")+P)),F.push(me)),1;if(Se=0,$=$===""?".":$+":",z(P))for(var xe=0;xe<P.length;xe++){ve=P[xe];var je=$+Y(ve,xe);Se+=pe(ve,F,ye,je,me)}else if(je=w(P),typeof je=="function")for(P=je.call(P),xe=0;!(ve=P.next()).done;)ve=ve.value,je=$+Y(ve,xe++),Se+=pe(ve,F,ye,je,me);else if(ve==="object")throw F=String(P),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Se}function Ee(P,F,ye){if(P==null)return P;var $=[],me=0;return pe(P,$,"","",function(ve){return F.call(ye,ve,me++)}),$}function le(P){if(P._status===-1){var F=P._result;F=F(),F.then(function(ye){(P._status===0||P._status===-1)&&(P._status=1,P._result=ye)},function(ye){(P._status===0||P._status===-1)&&(P._status=2,P._result=ye)}),P._status===-1&&(P._status=0,P._result=F)}if(P._status===1)return P._result.default;throw P._result}var J={current:null},U={transition:null},ne={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:U,ReactCurrentOwner:B};function Q(){throw Error("act(...) is not supported in production builds of React.")}return we.Children={map:Ee,forEach:function(P,F,ye){Ee(P,function(){F.apply(this,arguments)},ye)},count:function(P){var F=0;return Ee(P,function(){F++}),F},toArray:function(P){return Ee(P,function(F){return F})||[]},only:function(P){if(!be(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},we.Component=C,we.Fragment=n,we.Profiler=c,we.PureComponent=D,we.StrictMode=a,we.Suspense=m,we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,we.act=Q,we.cloneElement=function(P,F,ye){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var $=S({},P.props),me=P.key,ve=P.ref,Se=P._owner;if(F!=null){if(F.ref!==void 0&&(ve=F.ref,Se=B.current),F.key!==void 0&&(me=""+F.key),P.type&&P.type.defaultProps)var xe=P.type.defaultProps;for(je in F)L.call(F,je)&&!M.hasOwnProperty(je)&&($[je]=F[je]===void 0&&xe!==void 0?xe[je]:F[je])}var je=arguments.length-2;if(je===1)$.children=ye;else if(1<je){xe=Array(je);for(var st=0;st<je;st++)xe[st]=arguments[st+2];$.children=xe}return{$$typeof:o,type:P.type,key:me,ref:ve,props:$,_owner:Se}},we.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},we.createElement=X,we.createFactory=function(P){var F=X.bind(null,P);return F.type=P,F},we.createRef=function(){return{current:null}},we.forwardRef=function(P){return{$$typeof:p,render:P}},we.isValidElement=be,we.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:le}},we.memo=function(P,F){return{$$typeof:g,type:P,compare:F===void 0?null:F}},we.startTransition=function(P){var F=U.transition;U.transition={};try{P()}finally{U.transition=F}},we.unstable_act=Q,we.useCallback=function(P,F){return J.current.useCallback(P,F)},we.useContext=function(P){return J.current.useContext(P)},we.useDebugValue=function(){},we.useDeferredValue=function(P){return J.current.useDeferredValue(P)},we.useEffect=function(P,F){return J.current.useEffect(P,F)},we.useId=function(){return J.current.useId()},we.useImperativeHandle=function(P,F,ye){return J.current.useImperativeHandle(P,F,ye)},we.useInsertionEffect=function(P,F){return J.current.useInsertionEffect(P,F)},we.useLayoutEffect=function(P,F){return J.current.useLayoutEffect(P,F)},we.useMemo=function(P,F){return J.current.useMemo(P,F)},we.useReducer=function(P,F,ye){return J.current.useReducer(P,F,ye)},we.useRef=function(P){return J.current.useRef(P)},we.useState=function(P){return J.current.useState(P)},we.useSyncExternalStore=function(P,F,ye){return J.current.useSyncExternalStore(P,F,ye)},we.useTransition=function(){return J.current.useTransition()},we.version="18.3.1",we}var Kd;function Dl(){return Kd||(Kd=1,al.exports=lg()),al.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd;function cg(){if(Gd)return ys;Gd=1;var o=Dl(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var v,_={},w=null,b=null;g!==void 0&&(w=""+g),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(b=m.ref);for(v in m)a.call(m,v)&&!u.hasOwnProperty(v)&&(_[v]=m[v]);if(p&&p.defaultProps)for(v in m=p.defaultProps,m)_[v]===void 0&&(_[v]=m[v]);return{$$typeof:r,type:p,key:w,ref:b,props:_,_owner:c.current}}return ys.Fragment=n,ys.jsx=h,ys.jsxs=h,ys}var Jd;function ug(){return Jd||(Jd=1,il.exports=cg()),il.exports}var s=ug(),Mi={},ol={exports:{}},ft={},ll={exports:{}},cl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd;function dg(){return Qd||(Qd=1,(function(o){function r(U,ne){var Q=U.length;U.push(ne);e:for(;0<Q;){var P=Q-1>>>1,F=U[P];if(0<c(F,ne))U[P]=ne,U[Q]=F,Q=P;else break e}}function n(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var ne=U[0],Q=U.pop();if(Q!==ne){U[0]=Q;e:for(var P=0,F=U.length,ye=F>>>1;P<ye;){var $=2*(P+1)-1,me=U[$],ve=$+1,Se=U[ve];if(0>c(me,Q))ve<F&&0>c(Se,me)?(U[P]=Se,U[ve]=Q,P=ve):(U[P]=me,U[$]=Q,P=$);else if(ve<F&&0>c(Se,Q))U[P]=Se,U[ve]=Q,P=ve;else break e}}return ne}function c(U,ne){var Q=U.sortIndex-ne.sortIndex;return Q!==0?Q:U.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();o.unstable_now=function(){return h.now()-p}}var m=[],g=[],v=1,_=null,w=3,b=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var ne=n(g);ne!==null;){if(ne.callback===null)a(g);else if(ne.startTime<=U)a(g),ne.sortIndex=ne.expirationTime,r(m,ne);else break;ne=n(g)}}function z(U){if(E=!1,I(U),!S)if(n(m)!==null)S=!0,le(L);else{var ne=n(g);ne!==null&&J(z,ne.startTime-U)}}function L(U,ne){S=!1,E&&(E=!1,T(X),X=-1),b=!0;var Q=w;try{for(I(ne),_=n(m);_!==null&&(!(_.expirationTime>ne)||U&&!ee());){var P=_.callback;if(typeof P=="function"){_.callback=null,w=_.priorityLevel;var F=P(_.expirationTime<=ne);ne=o.unstable_now(),typeof F=="function"?_.callback=F:_===n(m)&&a(m),I(ne)}else a(m);_=n(m)}if(_!==null)var ye=!0;else{var $=n(g);$!==null&&J(z,$.startTime-ne),ye=!1}return ye}finally{_=null,w=Q,b=!1}}var B=!1,M=null,X=-1,W=5,be=-1;function ee(){return!(o.unstable_now()-be<W)}function G(){if(M!==null){var U=o.unstable_now();be=U;var ne=!0;try{ne=M(!0,U)}finally{ne?Y():(B=!1,M=null)}}else B=!1}var Y;if(typeof D=="function")Y=function(){D(G)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ee=pe.port2;pe.port1.onmessage=G,Y=function(){Ee.postMessage(null)}}else Y=function(){C(G,0)};function le(U){M=U,B||(B=!0,Y())}function J(U,ne){X=C(function(){U(o.unstable_now())},ne)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_continueExecution=function(){S||b||(S=!0,le(L))},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return w},o.unstable_getFirstCallbackNode=function(){return n(m)},o.unstable_next=function(U){switch(w){case 1:case 2:case 3:var ne=3;break;default:ne=w}var Q=w;w=ne;try{return U()}finally{w=Q}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=w;w=U;try{return ne()}finally{w=Q}},o.unstable_scheduleCallback=function(U,ne,Q){var P=o.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?P+Q:P):Q=P,U){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Q+F,U={id:v++,callback:ne,priorityLevel:U,startTime:Q,expirationTime:F,sortIndex:-1},Q>P?(U.sortIndex=Q,r(g,U),n(m)===null&&U===n(g)&&(E?(T(X),X=-1):E=!0,J(z,Q-P))):(U.sortIndex=F,r(m,U),S||b||(S=!0,le(L))),U},o.unstable_shouldYield=ee,o.unstable_wrapCallback=function(U){var ne=w;return function(){var Q=w;w=ne;try{return U.apply(this,arguments)}finally{w=Q}}}})(cl)),cl}var Yd;function hg(){return Yd||(Yd=1,ll.exports=dg()),ll.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd;function fg(){if(Xd)return ft;Xd=1;var o=Dl(),r=hg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function w(e){return m.call(_,e)?!0:m.call(v,e)?!1:g.test(e)?_[e]=!0:(v[e]=!0,!1)}function b(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,i,l){if(t===null||typeof t>"u"||b(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function E(e,t,i,l,d,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new E(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(T,D);C[t]=new E(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(T,D);C[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(T,D);C[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,t,i,l){var d=C.hasOwnProperty(t)?C[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,i,d,l)&&(i=null),l||d===null?w(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,l=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var z=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),B=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),ee=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),U=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,P;function F(e){if(P===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return`
`+P+e}var ye=!1;function $(e,t){if(!e||ye)return"";ye=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var l=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){l=A}e.call(t.prototype)}else{try{throw Error()}catch(A){l=A}e()}}catch(A){if(A&&l&&typeof A.stack=="string"){for(var d=A.stack.split(`
`),f=l.stack.split(`
`),y=d.length-1,x=f.length-1;1<=y&&0<=x&&d[y]!==f[x];)x--;for(;1<=y&&0<=x;y--,x--)if(d[y]!==f[x]){if(y!==1||x!==1)do if(y--,x--,0>x||d[y]!==f[x]){var N=`
`+d[y].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=y&&0<=x);break}}}finally{ye=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?F(e):""}function me(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1),e;case 11:return e=$(e.type.render,!1),e;case 1:return e=$(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case B:return"Portal";case W:return"Profiler";case X:return"StrictMode";case Y:return"Suspense";case pe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case be:return(e._context.displayName||"Context")+".Provider";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}function Se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(t);case 8:return t===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function st(e){var t=je(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cs(e){e._valueTracker||(e._valueTracker=st(e))}function Xl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=je(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Ts(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function da(e,t){var i=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Zl(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=xe(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ec(e,t){t=t.checked,t!=null&&I(e,"checked",t,!1)}function ha(e,t){ec(e,t);var i=xe(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fa(e,t.type,i):t.hasOwnProperty("defaultValue")&&fa(e,t.type,xe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tc(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function fa(e,t,i){(t!=="number"||Ts(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var On=Array.isArray;function Wr(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+xe(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(n(92));if(On(i)){if(1<i.length)throw Error(n(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:xe(i)}}function nc(e,t){var i=xe(t.value),l=xe(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ic(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ma(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ic(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ps,ac=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ps=Ps||document.createElement("div"),Ps.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ps.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function An(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cp=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){cp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function oc(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function lc(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,d=oc(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,d):e[i]=d}}var up=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ga(e,t){if(t){if(up[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function ya(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var va=null;function xa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wa=null,Kr=null,Gr=null;function cc(e){if(e=rs(e)){if(typeof wa!="function")throw Error(n(280));var t=e.stateNode;t&&(t=Zs(t),wa(e.stateNode,e.type,t))}}function uc(e){Kr?Gr?Gr.push(e):Gr=[e]:Kr=e}function dc(){if(Kr){var e=Kr,t=Gr;if(Gr=Kr=null,cc(e),t)for(e=0;e<t.length;e++)cc(t[e])}}function hc(e,t){return e(t)}function fc(){}var ba=!1;function pc(e,t,i){if(ba)return e(t,i);ba=!0;try{return hc(e,t,i)}finally{ba=!1,(Kr!==null||Gr!==null)&&(fc(),dc())}}function Dn(e,t){var i=e.stateNode;if(i===null)return null;var l=Zs(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,t,typeof i));return i}var ja=!1;if(p)try{var $n={};Object.defineProperty($n,"passive",{get:function(){ja=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{ja=!1}function dp(e,t,i,l,d,f,y,x,N){var A=Array.prototype.slice.call(arguments,3);try{t.apply(i,A)}catch(V){this.onError(V)}}var Ln=!1,Rs=null,Os=!1,_a=null,hp={onError:function(e){Ln=!0,Rs=e}};function fp(e,t,i,l,d,f,y,x,N){Ln=!1,Rs=null,dp.apply(hp,arguments)}function pp(e,t,i,l,d,f,y,x,N){if(fp.apply(this,arguments),Ln){if(Ln){var A=Rs;Ln=!1,Rs=null}else throw Error(n(198));Os||(Os=!0,_a=A)}}function jr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function mc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gc(e){if(jr(e)!==e)throw Error(n(188))}function mp(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return gc(d),e;if(f===l)return gc(d),t;f=f.sibling}throw Error(n(188))}if(i.return!==l.return)i=d,l=f;else{for(var y=!1,x=d.child;x;){if(x===i){y=!0,i=d,l=f;break}if(x===l){y=!0,l=d,i=f;break}x=x.sibling}if(!y){for(x=f.child;x;){if(x===i){y=!0,i=f,l=d;break}if(x===l){y=!0,l=f,i=d;break}x=x.sibling}if(!y)throw Error(n(189))}}if(i.alternate!==l)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:t}function yc(e){return e=mp(e),e!==null?vc(e):null}function vc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vc(e);if(t!==null)return t;e=e.sibling}return null}var xc=r.unstable_scheduleCallback,wc=r.unstable_cancelCallback,gp=r.unstable_shouldYield,yp=r.unstable_requestPaint,Le=r.unstable_now,vp=r.unstable_getCurrentPriorityLevel,Na=r.unstable_ImmediatePriority,bc=r.unstable_UserBlockingPriority,As=r.unstable_NormalPriority,xp=r.unstable_LowPriority,jc=r.unstable_IdlePriority,Is=null,Mt=null;function wp(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Is,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:_p,bp=Math.log,jp=Math.LN2;function _p(e){return e>>>=0,e===0?32:31-(bp(e)/jp|0)|0}var Ds=64,$s=4194304;function Mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ls(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,y=i&268435455;if(y!==0){var x=y&~d;x!==0?l=Mn(x):(f&=y,f!==0&&(l=Mn(f)))}else y=i&~d,y!==0?l=Mn(y):f!==0&&(l=Mn(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-Ct(t),d=1<<i,l|=e[i],t&=~d;return l}function Np(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sp(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Ct(f),x=1<<y,N=d[y];N===-1?((x&i)===0||(x&l)!==0)&&(d[y]=Np(x,t)):N<=t&&(e.expiredLanes|=x),f&=~x}}function Sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _c(){var e=Ds;return Ds<<=1,(Ds&4194240)===0&&(Ds=64),e}function ka(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Un(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=i}function kp(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-Ct(i),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,i&=~f}}function Ea(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-Ct(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}var ke=0;function Nc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Sc,Ca,kc,Ec,Cc,Ta=!1,Ms=[],er=null,tr=null,rr=null,zn=new Map,Fn=new Map,nr=[],Ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tc(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function Bn(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=rs(t),t!==null&&Ca(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Cp(e,t,i,l,d){switch(t){case"focusin":return er=Bn(er,e,t,i,l,d),!0;case"dragenter":return tr=Bn(tr,e,t,i,l,d),!0;case"mouseover":return rr=Bn(rr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return zn.set(f,Bn(zn.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Fn.set(f,Bn(Fn.get(f)||null,e,t,i,l,d)),!0}return!1}function Pc(e){var t=_r(e.target);if(t!==null){var i=jr(t);if(i!==null){if(t=i.tag,t===13){if(t=mc(i),t!==null){e.blockedOn=t,Cc(e.priority,function(){kc(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Us(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ra(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);va=l,i.target.dispatchEvent(l),va=null}else return t=rs(i),t!==null&&Ca(t),e.blockedOn=i,!1;t.shift()}return!0}function Rc(e,t,i){Us(e)&&i.delete(t)}function Tp(){Ta=!1,er!==null&&Us(er)&&(er=null),tr!==null&&Us(tr)&&(tr=null),rr!==null&&Us(rr)&&(rr=null),zn.forEach(Rc),Fn.forEach(Rc)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ta||(Ta=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tp)))}function Vn(e){function t(d){return qn(d,e)}if(0<Ms.length){qn(Ms[0],e);for(var i=1;i<Ms.length;i++){var l=Ms[i];l.blockedOn===e&&(l.blockedOn=null)}}for(er!==null&&qn(er,e),tr!==null&&qn(tr,e),rr!==null&&qn(rr,e),zn.forEach(t),Fn.forEach(t),i=0;i<nr.length;i++)l=nr[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<nr.length&&(i=nr[0],i.blockedOn===null);)Pc(i),i.blockedOn===null&&nr.shift()}var Jr=z.ReactCurrentBatchConfig,zs=!0;function Pp(e,t,i,l){var d=ke,f=Jr.transition;Jr.transition=null;try{ke=1,Pa(e,t,i,l)}finally{ke=d,Jr.transition=f}}function Rp(e,t,i,l){var d=ke,f=Jr.transition;Jr.transition=null;try{ke=4,Pa(e,t,i,l)}finally{ke=d,Jr.transition=f}}function Pa(e,t,i,l){if(zs){var d=Ra(e,t,i,l);if(d===null)Ga(e,t,l,Fs,i),Tc(e,l);else if(Cp(d,e,t,i,l))l.stopPropagation();else if(Tc(e,l),t&4&&-1<Ep.indexOf(e)){for(;d!==null;){var f=rs(d);if(f!==null&&Sc(f),f=Ra(e,t,i,l),f===null&&Ga(e,t,l,Fs,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else Ga(e,t,l,null,i)}}var Fs=null;function Ra(e,t,i,l){if(Fs=null,e=xa(l),e=_r(e),e!==null)if(t=jr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=mc(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fs=e,null}function Oc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vp()){case Na:return 1;case bc:return 4;case As:case xp:return 16;case jc:return 536870912;default:return 16}default:return 16}}var sr=null,Oa=null,Bs=null;function Ac(){if(Bs)return Bs;var e,t=Oa,i=t.length,l,d="value"in sr?sr.value:sr.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var y=i-e;for(l=1;l<=y&&t[i-l]===d[f-l];l++);return Bs=d.slice(e,1<l?1-l:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vs(){return!0}function Ic(){return!1}function mt(e){function t(i,l,d,f,y){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(i=e[x],this[x]=i?i(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Vs:Ic,this.isPropagationStopped=Ic,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=mt(Qr),Hn=Q({},Qr,{view:0,detail:0}),Op=mt(Hn),Ia,Da,Wn,Hs=Q({},Hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(Ia=e.screenX-Wn.screenX,Da=e.screenY-Wn.screenY):Da=Ia=0,Wn=e),Ia)},movementY:function(e){return"movementY"in e?e.movementY:Da}}),Dc=mt(Hs),Ap=Q({},Hs,{dataTransfer:0}),Ip=mt(Ap),Dp=Q({},Hn,{relatedTarget:0}),$a=mt(Dp),$p=Q({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Lp=mt($p),Mp=Q({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Up=mt(Mp),zp=Q({},Qr,{data:0}),$c=mt(zp),Fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qp[e])?!!t[e]:!1}function La(){return Vp}var Hp=Q({},Hn,{key:function(e){if(e.key){var t=Fp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wp=mt(Hp),Kp=Q({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lc=mt(Kp),Gp=Q({},Hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),Jp=mt(Gp),Qp=Q({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yp=mt(Qp),Xp=Q({},Hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zp=mt(Xp),em=[9,13,27,32],Ma=p&&"CompositionEvent"in window,Kn=null;p&&"documentMode"in document&&(Kn=document.documentMode);var tm=p&&"TextEvent"in window&&!Kn,Mc=p&&(!Ma||Kn&&8<Kn&&11>=Kn),Uc=" ",zc=!1;function Fc(e,t){switch(e){case"keyup":return em.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function rm(e,t){switch(e){case"compositionend":return Bc(t);case"keypress":return t.which!==32?null:(zc=!0,Uc);case"textInput":return e=t.data,e===Uc&&zc?null:e;default:return null}}function nm(e,t){if(Yr)return e==="compositionend"||!Ma&&Fc(e,t)?(e=Ac(),Bs=Oa=sr=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mc&&t.locale!=="ko"?null:t.data;default:return null}}var sm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sm[e.type]:t==="textarea"}function Vc(e,t,i,l){uc(l),t=Qs(t,"onChange"),0<t.length&&(i=new Aa("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Gn=null,Jn=null;function im(e){lu(e,0)}function Ws(e){var t=rn(e);if(Xl(t))return e}function am(e,t){if(e==="change")return t}var Hc=!1;if(p){var Ua;if(p){var za="oninput"in document;if(!za){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),za=typeof Wc.oninput=="function"}Ua=za}else Ua=!1;Hc=Ua&&(!document.documentMode||9<document.documentMode)}function Kc(){Gn&&(Gn.detachEvent("onpropertychange",Gc),Jn=Gn=null)}function Gc(e){if(e.propertyName==="value"&&Ws(Jn)){var t=[];Vc(t,Jn,e,xa(e)),pc(im,t)}}function om(e,t,i){e==="focusin"?(Kc(),Gn=t,Jn=i,Gn.attachEvent("onpropertychange",Gc)):e==="focusout"&&Kc()}function lm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(Jn)}function cm(e,t){if(e==="click")return Ws(t)}function um(e,t){if(e==="input"||e==="change")return Ws(t)}function dm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:dm;function Qn(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!m.call(t,d)||!Tt(e[d],t[d]))return!1}return!0}function Jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,t){var i=Jc(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Jc(i)}}function Yc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xc(){for(var e=window,t=Ts();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ts(e.document)}return t}function Fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hm(e){var t=Xc(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&Yc(i.ownerDocument.documentElement,i)){if(l!==null&&Fa(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=Qc(i,f);var y=Qc(i,l);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fm=p&&"documentMode"in document&&11>=document.documentMode,Xr=null,Ba=null,Yn=null,qa=!1;function Zc(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;qa||Xr==null||Xr!==Ts(l)||(l=Xr,"selectionStart"in l&&Fa(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yn&&Qn(Yn,l)||(Yn=l,l=Qs(Ba,"onSelect"),0<l.length&&(t=new Aa("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Xr)))}function Ks(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Zr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Va={},eu={};p&&(eu=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Gs(e){if(Va[e])return Va[e];if(!Zr[e])return e;var t=Zr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in eu)return Va[e]=t[i];return e}var tu=Gs("animationend"),ru=Gs("animationiteration"),nu=Gs("animationstart"),su=Gs("transitionend"),iu=new Map,au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){iu.set(e,t),u(t,[e])}for(var Ha=0;Ha<au.length;Ha++){var Wa=au[Ha],pm=Wa.toLowerCase(),mm=Wa[0].toUpperCase()+Wa.slice(1);ir(pm,"on"+mm)}ir(tu,"onAnimationEnd"),ir(ru,"onAnimationIteration"),ir(nu,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(su,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xn));function ou(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,pp(l,t,void 0,e),e.currentTarget=null}function lu(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var y=l.length-1;0<=y;y--){var x=l[y],N=x.instance,A=x.currentTarget;if(x=x.listener,N!==f&&d.isPropagationStopped())break e;ou(d,x,A),f=N}else for(y=0;y<l.length;y++){if(x=l[y],N=x.instance,A=x.currentTarget,x=x.listener,N!==f&&d.isPropagationStopped())break e;ou(d,x,A),f=N}}}if(Os)throw e=_a,Os=!1,_a=null,e}function Pe(e,t){var i=t[eo];i===void 0&&(i=t[eo]=new Set);var l=e+"__bubble";i.has(l)||(cu(t,e,2,!1),i.add(l))}function Ka(e,t,i){var l=0;t&&(l|=4),cu(i,e,l,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Zn(e){if(!e[Js]){e[Js]=!0,a.forEach(function(i){i!=="selectionchange"&&(gm.has(i)||Ka(i,!1,e),Ka(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Ka("selectionchange",!1,t))}}function cu(e,t,i,l){switch(Oc(t)){case 1:var d=Pp;break;case 4:d=Rp;break;default:d=Pa}i=d.bind(null,t,i,e),d=void 0,!ja||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function Ga(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var x=l.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(y===4)for(y=l.return;y!==null;){var N=y.tag;if((N===3||N===4)&&(N=y.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;y=y.return}for(;x!==null;){if(y=_r(x),y===null)return;if(N=y.tag,N===5||N===6){l=f=y;continue e}x=x.parentNode}}l=l.return}pc(function(){var A=f,V=xa(i),H=[];e:{var q=iu.get(e);if(q!==void 0){var Z=Aa,se=e;switch(e){case"keypress":if(qs(i)===0)break e;case"keydown":case"keyup":Z=Wp;break;case"focusin":se="focus",Z=$a;break;case"focusout":se="blur",Z=$a;break;case"beforeblur":case"afterblur":Z=$a;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Jp;break;case tu:case ru:case nu:Z=Lp;break;case su:Z=Yp;break;case"scroll":Z=Op;break;case"wheel":Z=Zp;break;case"copy":case"cut":case"paste":Z=Up;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Lc}var ie=(t&4)!==0,Me=!ie&&e==="scroll",R=ie?q!==null?q+"Capture":null:q;ie=[];for(var k=A,O;k!==null;){O=k;var K=O.stateNode;if(O.tag===5&&K!==null&&(O=K,R!==null&&(K=Dn(k,R),K!=null&&ie.push(es(k,K,O)))),Me)break;k=k.return}0<ie.length&&(q=new Z(q,se,null,i,V),H.push({event:q,listeners:ie}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",q&&i!==va&&(se=i.relatedTarget||i.fromElement)&&(_r(se)||se[Wt]))break e;if((Z||q)&&(q=V.window===V?V:(q=V.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(se=i.relatedTarget||i.toElement,Z=A,se=se?_r(se):null,se!==null&&(Me=jr(se),se!==Me||se.tag!==5&&se.tag!==6)&&(se=null)):(Z=null,se=A),Z!==se)){if(ie=Dc,K="onMouseLeave",R="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ie=Lc,K="onPointerLeave",R="onPointerEnter",k="pointer"),Me=Z==null?q:rn(Z),O=se==null?q:rn(se),q=new ie(K,k+"leave",Z,i,V),q.target=Me,q.relatedTarget=O,K=null,_r(V)===A&&(ie=new ie(R,k+"enter",se,i,V),ie.target=O,ie.relatedTarget=Me,K=ie),Me=K,Z&&se)t:{for(ie=Z,R=se,k=0,O=ie;O;O=en(O))k++;for(O=0,K=R;K;K=en(K))O++;for(;0<k-O;)ie=en(ie),k--;for(;0<O-k;)R=en(R),O--;for(;k--;){if(ie===R||R!==null&&ie===R.alternate)break t;ie=en(ie),R=en(R)}ie=null}else ie=null;Z!==null&&uu(H,q,Z,ie,!1),se!==null&&Me!==null&&uu(H,Me,se,ie,!0)}}e:{if(q=A?rn(A):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var ce=am;else if(qc(q))if(Hc)ce=um;else{ce=lm;var ue=om}else(Z=q.nodeName)&&Z.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ce=cm);if(ce&&(ce=ce(e,A))){Vc(H,ce,i,V);break e}ue&&ue(e,q,A),e==="focusout"&&(ue=q._wrapperState)&&ue.controlled&&q.type==="number"&&fa(q,"number",q.value)}switch(ue=A?rn(A):window,e){case"focusin":(qc(ue)||ue.contentEditable==="true")&&(Xr=ue,Ba=A,Yn=null);break;case"focusout":Yn=Ba=Xr=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,Zc(H,i,V);break;case"selectionchange":if(fm)break;case"keydown":case"keyup":Zc(H,i,V)}var de;if(Ma)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Yr?Fc(e,i)&&(ge="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ge="onCompositionStart");ge&&(Mc&&i.locale!=="ko"&&(Yr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Yr&&(de=Ac()):(sr=V,Oa="value"in sr?sr.value:sr.textContent,Yr=!0)),ue=Qs(A,ge),0<ue.length&&(ge=new $c(ge,e,null,i,V),H.push({event:ge,listeners:ue}),de?ge.data=de:(de=Bc(i),de!==null&&(ge.data=de)))),(de=tm?rm(e,i):nm(e,i))&&(A=Qs(A,"onBeforeInput"),0<A.length&&(V=new $c("onBeforeInput","beforeinput",null,i,V),H.push({event:V,listeners:A}),V.data=de))}lu(H,t)})}function es(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Qs(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Dn(e,i),f!=null&&l.unshift(es(e,f,d)),f=Dn(e,t),f!=null&&l.push(es(e,f,d))),e=e.return}return l}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uu(e,t,i,l,d){for(var f=t._reactName,y=[];i!==null&&i!==l;){var x=i,N=x.alternate,A=x.stateNode;if(N!==null&&N===l)break;x.tag===5&&A!==null&&(x=A,d?(N=Dn(i,f),N!=null&&y.unshift(es(i,N,x))):d||(N=Dn(i,f),N!=null&&y.push(es(i,N,x)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var ym=/\r\n?/g,vm=/\u0000|\uFFFD/g;function du(e){return(typeof e=="string"?e:""+e).replace(ym,`
`).replace(vm,"")}function Ys(e,t,i){if(t=du(t),du(e)!==t&&i)throw Error(n(425))}function Xs(){}var Ja=null,Qa=null;function Ya(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xa=typeof setTimeout=="function"?setTimeout:void 0,xm=typeof clearTimeout=="function"?clearTimeout:void 0,hu=typeof Promise=="function"?Promise:void 0,wm=typeof queueMicrotask=="function"?queueMicrotask:typeof hu<"u"?function(e){return hu.resolve(null).then(e).catch(bm)}:Xa;function bm(e){setTimeout(function(){throw e})}function Za(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(l===0){e.removeChild(d),Vn(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=d}while(i);Vn(t)}function ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var tn=Math.random().toString(36).slice(2),Ut="__reactFiber$"+tn,ts="__reactProps$"+tn,Wt="__reactContainer$"+tn,eo="__reactEvents$"+tn,jm="__reactListeners$"+tn,_m="__reactHandles$"+tn;function _r(e){var t=e[Ut];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Wt]||i[Ut]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=fu(e);e!==null;){if(i=e[Ut])return i;e=fu(e)}return t}e=i,i=e.parentNode}return null}function rs(e){return e=e[Ut]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Zs(e){return e[ts]||null}var to=[],nn=-1;function or(e){return{current:e}}function Re(e){0>nn||(e.current=to[nn],to[nn]=null,nn--)}function Ce(e,t){nn++,to[nn]=e.current,e.current=t}var lr={},Ze=or(lr),lt=or(!1),Nr=lr;function sn(e,t){var i=e.type.contextTypes;if(!i)return lr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in i)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function ct(e){return e=e.childContextTypes,e!=null}function ei(){Re(lt),Re(Ze)}function pu(e,t,i){if(Ze.current!==lr)throw Error(n(168));Ce(Ze,t),Ce(lt,i)}function mu(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(n(108,Se(e)||"Unknown",d));return Q({},i,l)}function ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,Nr=Ze.current,Ce(Ze,e),Ce(lt,lt.current),!0}function gu(e,t,i){var l=e.stateNode;if(!l)throw Error(n(169));i?(e=mu(e,t,Nr),l.__reactInternalMemoizedMergedChildContext=e,Re(lt),Re(Ze),Ce(Ze,e)):Re(lt),Ce(lt,i)}var Kt=null,ri=!1,ro=!1;function yu(e){Kt===null?Kt=[e]:Kt.push(e)}function Nm(e){ri=!0,yu(e)}function cr(){if(!ro&&Kt!==null){ro=!0;var e=0,t=ke;try{var i=Kt;for(ke=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Kt=null,ri=!1}catch(d){throw Kt!==null&&(Kt=Kt.slice(e+1)),xc(Na,cr),d}finally{ke=t,ro=!1}}return null}var an=[],on=0,ni=null,si=0,bt=[],jt=0,Sr=null,Gt=1,Jt="";function kr(e,t){an[on++]=si,an[on++]=ni,ni=e,si=t}function vu(e,t,i){bt[jt++]=Gt,bt[jt++]=Jt,bt[jt++]=Sr,Sr=e;var l=Gt;e=Jt;var d=32-Ct(l)-1;l&=~(1<<d),i+=1;var f=32-Ct(t)+d;if(30<f){var y=d-d%5;f=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Gt=1<<32-Ct(t)+d|i<<d|l,Jt=f+e}else Gt=1<<f|i<<d|l,Jt=e}function no(e){e.return!==null&&(kr(e,1),vu(e,1,0))}function so(e){for(;e===ni;)ni=an[--on],an[on]=null,si=an[--on],an[on]=null;for(;e===Sr;)Sr=bt[--jt],bt[jt]=null,Jt=bt[--jt],bt[jt]=null,Gt=bt[--jt],bt[jt]=null}var gt=null,yt=null,Oe=!1,Pt=null;function xu(e,t){var i=kt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function wu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,yt=ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Sr!==null?{id:Gt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=kt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,gt=e,yt=null,!0):!1;default:return!1}}function io(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ao(e){if(Oe){var t=yt;if(t){var i=t;if(!wu(e,t)){if(io(e))throw Error(n(418));t=ar(i.nextSibling);var l=gt;t&&wu(e,t)?xu(l,i):(e.flags=e.flags&-4097|2,Oe=!1,gt=e)}}else{if(io(e))throw Error(n(418));e.flags=e.flags&-4097|2,Oe=!1,gt=e}}}function bu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function ii(e){if(e!==gt)return!1;if(!Oe)return bu(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ya(e.type,e.memoizedProps)),t&&(t=yt)){if(io(e))throw ju(),Error(n(418));for(;t;)xu(e,t),t=ar(t.nextSibling)}if(bu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){yt=ar(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=gt?ar(e.stateNode.nextSibling):null;return!0}function ju(){for(var e=yt;e;)e=ar(e.nextSibling)}function ln(){yt=gt=null,Oe=!1}function oo(e){Pt===null?Pt=[e]:Pt.push(e)}var Sm=z.ReactCurrentBatchConfig;function ns(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var l=i.stateNode}if(!l)throw Error(n(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var x=d.refs;y===null?delete x[f]:x[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _u(e){var t=e._init;return t(e._payload)}function Nu(e){function t(R,k){if(e){var O=R.deletions;O===null?(R.deletions=[k],R.flags|=16):O.push(k)}}function i(R,k){if(!e)return null;for(;k!==null;)t(R,k),k=k.sibling;return null}function l(R,k){for(R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function d(R,k){return R=yr(R,k),R.index=0,R.sibling=null,R}function f(R,k,O){return R.index=O,e?(O=R.alternate,O!==null?(O=O.index,O<k?(R.flags|=2,k):O):(R.flags|=2,k)):(R.flags|=1048576,k)}function y(R){return e&&R.alternate===null&&(R.flags|=2),R}function x(R,k,O,K){return k===null||k.tag!==6?(k=Zo(O,R.mode,K),k.return=R,k):(k=d(k,O),k.return=R,k)}function N(R,k,O,K){var ce=O.type;return ce===M?V(R,k,O.props.children,K,O.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===le&&_u(ce)===k.type)?(K=d(k,O.props),K.ref=ns(R,k,O),K.return=R,K):(K=Pi(O.type,O.key,O.props,null,R.mode,K),K.ref=ns(R,k,O),K.return=R,K)}function A(R,k,O,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==O.containerInfo||k.stateNode.implementation!==O.implementation?(k=el(O,R.mode,K),k.return=R,k):(k=d(k,O.children||[]),k.return=R,k)}function V(R,k,O,K,ce){return k===null||k.tag!==7?(k=Ir(O,R.mode,K,ce),k.return=R,k):(k=d(k,O),k.return=R,k)}function H(R,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Zo(""+k,R.mode,O),k.return=R,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case L:return O=Pi(k.type,k.key,k.props,null,R.mode,O),O.ref=ns(R,null,k),O.return=R,O;case B:return k=el(k,R.mode,O),k.return=R,k;case le:var K=k._init;return H(R,K(k._payload),O)}if(On(k)||ne(k))return k=Ir(k,R.mode,O,null),k.return=R,k;ai(R,k)}return null}function q(R,k,O,K){var ce=k!==null?k.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ce!==null?null:x(R,k,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case L:return O.key===ce?N(R,k,O,K):null;case B:return O.key===ce?A(R,k,O,K):null;case le:return ce=O._init,q(R,k,ce(O._payload),K)}if(On(O)||ne(O))return ce!==null?null:V(R,k,O,K,null);ai(R,O)}return null}function Z(R,k,O,K,ce){if(typeof K=="string"&&K!==""||typeof K=="number")return R=R.get(O)||null,x(k,R,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case L:return R=R.get(K.key===null?O:K.key)||null,N(k,R,K,ce);case B:return R=R.get(K.key===null?O:K.key)||null,A(k,R,K,ce);case le:var ue=K._init;return Z(R,k,O,ue(K._payload),ce)}if(On(K)||ne(K))return R=R.get(O)||null,V(k,R,K,ce,null);ai(k,K)}return null}function se(R,k,O,K){for(var ce=null,ue=null,de=k,ge=k=0,Ge=null;de!==null&&ge<O.length;ge++){de.index>ge?(Ge=de,de=null):Ge=de.sibling;var Ne=q(R,de,O[ge],K);if(Ne===null){de===null&&(de=Ge);break}e&&de&&Ne.alternate===null&&t(R,de),k=f(Ne,k,ge),ue===null?ce=Ne:ue.sibling=Ne,ue=Ne,de=Ge}if(ge===O.length)return i(R,de),Oe&&kr(R,ge),ce;if(de===null){for(;ge<O.length;ge++)de=H(R,O[ge],K),de!==null&&(k=f(de,k,ge),ue===null?ce=de:ue.sibling=de,ue=de);return Oe&&kr(R,ge),ce}for(de=l(R,de);ge<O.length;ge++)Ge=Z(de,R,ge,O[ge],K),Ge!==null&&(e&&Ge.alternate!==null&&de.delete(Ge.key===null?ge:Ge.key),k=f(Ge,k,ge),ue===null?ce=Ge:ue.sibling=Ge,ue=Ge);return e&&de.forEach(function(vr){return t(R,vr)}),Oe&&kr(R,ge),ce}function ie(R,k,O,K){var ce=ne(O);if(typeof ce!="function")throw Error(n(150));if(O=ce.call(O),O==null)throw Error(n(151));for(var ue=ce=null,de=k,ge=k=0,Ge=null,Ne=O.next();de!==null&&!Ne.done;ge++,Ne=O.next()){de.index>ge?(Ge=de,de=null):Ge=de.sibling;var vr=q(R,de,Ne.value,K);if(vr===null){de===null&&(de=Ge);break}e&&de&&vr.alternate===null&&t(R,de),k=f(vr,k,ge),ue===null?ce=vr:ue.sibling=vr,ue=vr,de=Ge}if(Ne.done)return i(R,de),Oe&&kr(R,ge),ce;if(de===null){for(;!Ne.done;ge++,Ne=O.next())Ne=H(R,Ne.value,K),Ne!==null&&(k=f(Ne,k,ge),ue===null?ce=Ne:ue.sibling=Ne,ue=Ne);return Oe&&kr(R,ge),ce}for(de=l(R,de);!Ne.done;ge++,Ne=O.next())Ne=Z(de,R,ge,Ne.value,K),Ne!==null&&(e&&Ne.alternate!==null&&de.delete(Ne.key===null?ge:Ne.key),k=f(Ne,k,ge),ue===null?ce=Ne:ue.sibling=Ne,ue=Ne);return e&&de.forEach(function(sg){return t(R,sg)}),Oe&&kr(R,ge),ce}function Me(R,k,O,K){if(typeof O=="object"&&O!==null&&O.type===M&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case L:e:{for(var ce=O.key,ue=k;ue!==null;){if(ue.key===ce){if(ce=O.type,ce===M){if(ue.tag===7){i(R,ue.sibling),k=d(ue,O.props.children),k.return=R,R=k;break e}}else if(ue.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===le&&_u(ce)===ue.type){i(R,ue.sibling),k=d(ue,O.props),k.ref=ns(R,ue,O),k.return=R,R=k;break e}i(R,ue);break}else t(R,ue);ue=ue.sibling}O.type===M?(k=Ir(O.props.children,R.mode,K,O.key),k.return=R,R=k):(K=Pi(O.type,O.key,O.props,null,R.mode,K),K.ref=ns(R,k,O),K.return=R,R=K)}return y(R);case B:e:{for(ue=O.key;k!==null;){if(k.key===ue)if(k.tag===4&&k.stateNode.containerInfo===O.containerInfo&&k.stateNode.implementation===O.implementation){i(R,k.sibling),k=d(k,O.children||[]),k.return=R,R=k;break e}else{i(R,k);break}else t(R,k);k=k.sibling}k=el(O,R.mode,K),k.return=R,R=k}return y(R);case le:return ue=O._init,Me(R,k,ue(O._payload),K)}if(On(O))return se(R,k,O,K);if(ne(O))return ie(R,k,O,K);ai(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,k!==null&&k.tag===6?(i(R,k.sibling),k=d(k,O),k.return=R,R=k):(i(R,k),k=Zo(O,R.mode,K),k.return=R,R=k),y(R)):i(R,k)}return Me}var cn=Nu(!0),Su=Nu(!1),oi=or(null),li=null,un=null,lo=null;function co(){lo=un=li=null}function uo(e){var t=oi.current;Re(oi),e._currentValue=t}function ho(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function dn(e,t){li=e,lo=un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ut=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(lo!==e)if(e={context:e,memoizedValue:t,next:null},un===null){if(li===null)throw Error(n(308));un=e,li.dependencies={lanes:0,firstContext:e}}else un=un.next=e;return t}var Er=null;function fo(e){Er===null?Er=[e]:Er.push(e)}function ku(e,t,i,l){var d=t.interleaved;return d===null?(i.next=i,fo(t)):(i.next=d.next,d.next=i),t.interleaved=i,Qt(e,l)}function Qt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ur=!1;function po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(_e&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Qt(e,i)}return d=l.interleaved,d===null?(t.next=t,fo(l)):(t.next=d.next,d.next=t),l.interleaved=t,Qt(e,i)}function ci(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Ea(e,i)}}function Cu(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?d=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ui(e,t,i,l){var d=e.updateQueue;ur=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var N=x,A=N.next;N.next=null,y===null?f=A:y.next=A,y=N;var V=e.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==y&&(x===null?V.firstBaseUpdate=A:x.next=A,V.lastBaseUpdate=N))}if(f!==null){var H=d.baseState;y=0,V=A=N=null,x=f;do{var q=x.lane,Z=x.eventTime;if((l&q)===q){V!==null&&(V=V.next={eventTime:Z,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var se=e,ie=x;switch(q=t,Z=i,ie.tag){case 1:if(se=ie.payload,typeof se=="function"){H=se.call(Z,H,q);break e}H=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ie.payload,q=typeof se=="function"?se.call(Z,H,q):se,q==null)break e;H=Q({},H,q);break e;case 2:ur=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,q=d.effects,q===null?d.effects=[x]:q.push(x))}else Z={eventTime:Z,lane:q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(A=V=Z,N=H):V=V.next=Z,y|=q;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;q=x,x=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(!0);if(V===null&&(N=H),d.baseState=N,d.firstBaseUpdate=A,d.lastBaseUpdate=V,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Pr|=y,e.lanes=y,e.memoizedState=H}}function Tu(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=i,typeof d!="function")throw Error(n(191,d));d.call(l)}}}var ss={},zt=or(ss),is=or(ss),as=or(ss);function Cr(e){if(e===ss)throw Error(n(174));return e}function mo(e,t){switch(Ce(as,t),Ce(is,e),Ce(zt,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ma(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ma(t,e)}Re(zt),Ce(zt,t)}function hn(){Re(zt),Re(is),Re(as)}function Pu(e){Cr(as.current);var t=Cr(zt.current),i=ma(t,e.type);t!==i&&(Ce(is,e),Ce(zt,i))}function go(e){is.current===e&&(Re(zt),Re(is))}var Ae=or(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=[];function vo(){for(var e=0;e<yo.length;e++)yo[e]._workInProgressVersionPrimary=null;yo.length=0}var hi=z.ReactCurrentDispatcher,xo=z.ReactCurrentBatchConfig,Tr=0,Ie=null,Be=null,We=null,fi=!1,os=!1,ls=0,km=0;function et(){throw Error(n(321))}function wo(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Tt(e[i],t[i]))return!1;return!0}function bo(e,t,i,l,d,f){if(Tr=f,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hi.current=e===null||e.memoizedState===null?Pm:Rm,e=i(l,d),os){f=0;do{if(os=!1,ls=0,25<=f)throw Error(n(301));f+=1,We=Be=null,t.updateQueue=null,hi.current=Om,e=i(l,d)}while(os)}if(hi.current=gi,t=Be!==null&&Be.next!==null,Tr=0,We=Be=Ie=null,fi=!1,t)throw Error(n(300));return e}function jo(){var e=ls!==0;return ls=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ie.memoizedState=We=e:We=We.next=e,We}function Nt(){if(Be===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=We===null?Ie.memoizedState:We.next;if(t!==null)We=t,Be=e;else{if(e===null)throw Error(n(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?Ie.memoizedState=We=e:We=We.next=e}return We}function cs(e,t){return typeof t=="function"?t(e):t}function _o(e){var t=Nt(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=Be,d=l.baseQueue,f=i.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}l.baseQueue=d=f,i.pending=null}if(d!==null){f=d.next,l=l.baseState;var x=y=null,N=null,A=f;do{var V=A.lane;if((Tr&V)===V)N!==null&&(N=N.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),l=A.hasEagerState?A.eagerState:e(l,A.action);else{var H={lane:V,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};N===null?(x=N=H,y=l):N=N.next=H,Ie.lanes|=V,Pr|=V}A=A.next}while(A!==null&&A!==f);N===null?y=l:N.next=x,Tt(l,t.memoizedState)||(ut=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=N,i.lastRenderedState=l}if(e=i.interleaved,e!==null){d=e;do f=d.lane,Ie.lanes|=f,Pr|=f,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function No(e){var t=Nt(),i=t.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);Tt(f,t.memoizedState)||(ut=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Ru(){}function Ou(e,t){var i=Ie,l=Nt(),d=t(),f=!Tt(l.memoizedState,d);if(f&&(l.memoizedState=d,ut=!0),l=l.queue,So(Du.bind(null,i,l,e),[e]),l.getSnapshot!==t||f||We!==null&&We.memoizedState.tag&1){if(i.flags|=2048,us(9,Iu.bind(null,i,l,d,t),void 0,null),Ke===null)throw Error(n(349));(Tr&30)!==0||Au(i,t,d)}return d}function Au(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Iu(e,t,i,l){t.value=i,t.getSnapshot=l,$u(t)&&Lu(e)}function Du(e,t,i){return i(function(){$u(t)&&Lu(e)})}function $u(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Tt(e,i)}catch{return!0}}function Lu(e){var t=Qt(e,1);t!==null&&It(t,e,1,-1)}function Mu(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},t.queue=e,e=e.dispatch=Tm.bind(null,Ie,e),[t.memoizedState,e]}function us(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function Uu(){return Nt().memoizedState}function pi(e,t,i,l){var d=Ft();Ie.flags|=e,d.memoizedState=us(1|t,i,void 0,l===void 0?null:l)}function mi(e,t,i,l){var d=Nt();l=l===void 0?null:l;var f=void 0;if(Be!==null){var y=Be.memoizedState;if(f=y.destroy,l!==null&&wo(l,y.deps)){d.memoizedState=us(t,i,f,l);return}}Ie.flags|=e,d.memoizedState=us(1|t,i,f,l)}function zu(e,t){return pi(8390656,8,e,t)}function So(e,t){return mi(2048,8,e,t)}function Fu(e,t){return mi(4,2,e,t)}function Bu(e,t){return mi(4,4,e,t)}function qu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vu(e,t,i){return i=i!=null?i.concat([e]):null,mi(4,4,qu.bind(null,t,e),i)}function ko(){}function Hu(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&wo(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function Wu(e,t){var i=Nt();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&wo(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function Ku(e,t,i){return(Tr&21)===0?(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=i):(Tt(i,t)||(i=_c(),Ie.lanes|=i,Pr|=i,e.baseState=!0),t)}function Em(e,t){var i=ke;ke=i!==0&&4>i?i:4,e(!0);var l=xo.transition;xo.transition={};try{e(!1),t()}finally{ke=i,xo.transition=l}}function Gu(){return Nt().memoizedState}function Cm(e,t,i){var l=mr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},Ju(e))Qu(t,i);else if(i=ku(e,t,i,l),i!==null){var d=at();It(i,e,l,d),Yu(i,t,l)}}function Tm(e,t,i){var l=mr(e),d={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ju(e))Qu(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,x=f(y,i);if(d.hasEagerState=!0,d.eagerState=x,Tt(x,y)){var N=t.interleaved;N===null?(d.next=d,fo(t)):(d.next=N.next,N.next=d),t.interleaved=d;return}}catch{}finally{}i=ku(e,t,d,l),i!==null&&(d=at(),It(i,e,l,d),Yu(i,t,l))}}function Ju(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Qu(e,t){os=fi=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Yu(e,t,i){if((i&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Ea(e,i)}}var gi={readContext:_t,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Pm={readContext:_t,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:zu,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,pi(4194308,4,qu.bind(null,t,e),i)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return pi(4,2,e,t)},useMemo:function(e,t){var i=Ft();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=Ft();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Cm.bind(null,Ie,e),[l.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:Mu,useDebugValue:ko,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=Mu(!1),t=e[0];return e=Em.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Ie,d=Ft();if(Oe){if(i===void 0)throw Error(n(407));i=i()}else{if(i=t(),Ke===null)throw Error(n(349));(Tr&30)!==0||Au(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,zu(Du.bind(null,l,f,e),[e]),l.flags|=2048,us(9,Iu.bind(null,l,f,i,t),void 0,null),i},useId:function(){var e=Ft(),t=Ke.identifierPrefix;if(Oe){var i=Jt,l=Gt;i=(l&~(1<<32-Ct(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=ls++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=km++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rm={readContext:_t,useCallback:Hu,useContext:_t,useEffect:So,useImperativeHandle:Vu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:Wu,useReducer:_o,useRef:Uu,useState:function(){return _o(cs)},useDebugValue:ko,useDeferredValue:function(e){var t=Nt();return Ku(t,Be.memoizedState,e)},useTransition:function(){var e=_o(cs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Ru,useSyncExternalStore:Ou,useId:Gu,unstable_isNewReconciler:!1},Om={readContext:_t,useCallback:Hu,useContext:_t,useEffect:So,useImperativeHandle:Vu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:Wu,useReducer:No,useRef:Uu,useState:function(){return No(cs)},useDebugValue:ko,useDeferredValue:function(e){var t=Nt();return Be===null?t.memoizedState=e:Ku(t,Be.memoizedState,e)},useTransition:function(){var e=No(cs)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Ru,useSyncExternalStore:Ou,useId:Gu,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=Q({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Eo(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:Q({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var yi={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=at(),d=mr(e),f=Yt(l,d);f.payload=t,i!=null&&(f.callback=i),t=dr(e,f,d),t!==null&&(It(t,e,d,l),ci(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=at(),d=mr(e),f=Yt(l,d);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=dr(e,f,d),t!==null&&(It(t,e,d,l),ci(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=at(),l=mr(e),d=Yt(i,l);d.tag=2,t!=null&&(d.callback=t),t=dr(e,d,l),t!==null&&(It(t,e,l,i),ci(t,e,l))}};function Xu(e,t,i,l,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):t.prototype&&t.prototype.isPureReactComponent?!Qn(i,l)||!Qn(d,f):!0}function Zu(e,t,i){var l=!1,d=lr,f=t.contextType;return typeof f=="object"&&f!==null?f=_t(f):(d=ct(t)?Nr:Ze.current,l=t.contextTypes,f=(l=l!=null)?sn(e,d):lr),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function ed(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Co(e,t,i,l){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},po(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=_t(f):(f=ct(t)?Nr:Ze.current,d.context=sn(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Eo(e,t,f,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&yi.enqueueReplaceState(d,d.state,null),ui(e,i,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var i="",l=t;do i+=me(l),l=l.return;while(l);var d=i}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function To(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Po(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Am=typeof WeakMap=="function"?WeakMap:Map;function td(e,t,i){i=Yt(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){Ni||(Ni=!0,Ho=l),Po(e,t)},i}function rd(e,t,i){i=Yt(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;i.payload=function(){return l(d)},i.callback=function(){Po(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Po(e,t),typeof l!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function nd(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Am;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(d.add(i),e=Km.bind(null,e,t,i),t.then(e,e))}function sd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function id(e,t,i,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Yt(-1,1),t.tag=2,dr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Im=z.ReactCurrentOwner,ut=!1;function it(e,t,i,l){t.child=e===null?Su(t,null,i,l):cn(t,e.child,i,l)}function ad(e,t,i,l,d){i=i.render;var f=t.ref;return dn(t,d),l=bo(e,t,i,l,f,d),i=jo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Xt(e,t,d)):(Oe&&i&&no(t),t.flags|=1,it(e,t,l,d),t.child)}function od(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!Xo(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,ld(e,t,f,l,d)):(e=Pi(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:Qn,i(y,l)&&e.ref===t.ref)return Xt(e,t,d)}return t.flags|=1,e=yr(f,l),e.ref=t.ref,e.return=t,t.child=e}function ld(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if(Qn(f,l)&&e.ref===t.ref)if(ut=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Xt(e,t,d)}return Ro(e,t,i,l,d)}function cd(e,t,i){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(mn,vt),vt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(mn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ce(mn,vt),vt|=l}else f!==null?(l=f.baseLanes|i,t.memoizedState=null):l=i,Ce(mn,vt),vt|=l;return it(e,t,d,i),t.child}function ud(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ro(e,t,i,l,d){var f=ct(i)?Nr:Ze.current;return f=sn(t,f),dn(t,d),i=bo(e,t,i,l,f,d),l=jo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Xt(e,t,d)):(Oe&&l&&no(t),t.flags|=1,it(e,t,i,d),t.child)}function dd(e,t,i,l,d){if(ct(i)){var f=!0;ti(t)}else f=!1;if(dn(t,d),t.stateNode===null)xi(e,t),Zu(t,i,l),Co(t,i,l,d),l=!0;else if(e===null){var y=t.stateNode,x=t.memoizedProps;y.props=x;var N=y.context,A=i.contextType;typeof A=="object"&&A!==null?A=_t(A):(A=ct(i)?Nr:Ze.current,A=sn(t,A));var V=i.getDerivedStateFromProps,H=typeof V=="function"||typeof y.getSnapshotBeforeUpdate=="function";H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==l||N!==A)&&ed(t,y,l,A),ur=!1;var q=t.memoizedState;y.state=q,ui(t,l,y,d),N=t.memoizedState,x!==l||q!==N||lt.current||ur?(typeof V=="function"&&(Eo(t,i,V,l),N=t.memoizedState),(x=ur||Xu(t,i,x,l,q,N,A))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=N),y.props=l,y.state=N,y.context=A,l=x):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,Eu(e,t),x=t.memoizedProps,A=t.type===t.elementType?x:Rt(t.type,x),y.props=A,H=t.pendingProps,q=y.context,N=i.contextType,typeof N=="object"&&N!==null?N=_t(N):(N=ct(i)?Nr:Ze.current,N=sn(t,N));var Z=i.getDerivedStateFromProps;(V=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==H||q!==N)&&ed(t,y,l,N),ur=!1,q=t.memoizedState,y.state=q,ui(t,l,y,d);var se=t.memoizedState;x!==H||q!==se||lt.current||ur?(typeof Z=="function"&&(Eo(t,i,Z,l),se=t.memoizedState),(A=ur||Xu(t,i,A,l,q,se,N)||!1)?(V||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,se,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,se,N)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),y.props=l,y.state=se,y.context=N,l=A):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),l=!1)}return Oo(e,t,i,l,f,d)}function Oo(e,t,i,l,d,f){ud(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return d&&gu(t,i,!1),Xt(e,t,f);l=t.stateNode,Im.current=t;var x=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=cn(t,e.child,null,f),t.child=cn(t,null,x,f)):it(e,t,x,f),t.memoizedState=l.state,d&&gu(t,i,!0),t.child}function hd(e){var t=e.stateNode;t.pendingContext?pu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pu(e,t.context,!1),mo(e,t.containerInfo)}function fd(e,t,i,l,d){return ln(),oo(d),t.flags|=256,it(e,t,i,l),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function pd(e,t,i){var l=t.pendingProps,d=Ae.current,f=!1,y=(t.flags&128)!==0,x;if((x=y)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ce(Ae,d&1),e===null)return ao(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=l.children,e=l.fallback,f?(l=t.mode,f=t.child,y={mode:"hidden",children:y},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Ri(y,l,0,null),e=Ir(e,l,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Io(i),t.memoizedState=Ao,e):Do(t,y));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Dm(e,t,y,l,x,d,i);if(f){f=l.fallback,y=t.mode,d=e.child,x=d.sibling;var N={mode:"hidden",children:l.children};return(y&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=N,t.deletions=null):(l=yr(d,N),l.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=yr(x,f):(f=Ir(f,y,i,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,y=e.child.memoizedState,y=y===null?Io(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~i,t.memoizedState=Ao,l}return f=e.child,e=f.sibling,l=yr(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function Do(e,t){return t=Ri({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vi(e,t,i,l){return l!==null&&oo(l),cn(t,e.child,null,i),e=Do(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dm(e,t,i,l,d,f,y){if(i)return t.flags&256?(t.flags&=-257,l=To(Error(n(422))),vi(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=Ri({mode:"visible",children:l.children},d,0,null),f=Ir(f,d,y,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&cn(t,e.child,null,y),t.child.memoizedState=Io(y),t.memoizedState=Ao,f);if((t.mode&1)===0)return vi(e,t,y,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var x=l.dgst;return l=x,f=Error(n(419)),l=To(f,l,void 0),vi(e,t,y,l)}if(x=(y&e.childLanes)!==0,ut||x){if(l=Ke,l!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|y))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Qt(e,d),It(l,e,d,-1))}return Yo(),l=To(Error(n(421))),vi(e,t,y,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Gm.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,yt=ar(d.nextSibling),gt=t,Oe=!0,Pt=null,e!==null&&(bt[jt++]=Gt,bt[jt++]=Jt,bt[jt++]=Sr,Gt=e.id,Jt=e.overflow,Sr=t),t=Do(t,l.children),t.flags|=4096,t)}function md(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ho(e.return,t,i)}function $o(e,t,i,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=d)}function gd(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(it(e,t,l.children,i),l=Ae.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&md(e,i,t);else if(e.tag===19)md(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ce(Ae,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&di(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),$o(t,!1,d,i,f);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&di(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}$o(t,!0,i,null,f);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,i=yr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=yr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function $m(e,t,i){switch(t.tag){case 3:hd(t),ln();break;case 5:Pu(t);break;case 1:ct(t.type)&&ti(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Ce(oi,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ce(Ae,Ae.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?pd(e,t,i):(Ce(Ae,Ae.current&1),e=Xt(e,t,i),e!==null?e.sibling:null);Ce(Ae,Ae.current&1);break;case 19:if(l=(i&t.childLanes)!==0,(e.flags&128)!==0){if(l)return gd(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Ae,Ae.current),l)break;return null;case 22:case 23:return t.lanes=0,cd(e,t,i)}return Xt(e,t,i)}var yd,Lo,vd,xd;yd=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Lo=function(){},vd=function(e,t,i,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,Cr(zt.current);var f=null;switch(i){case"input":d=da(e,d),l=da(e,l),f=[];break;case"select":d=Q({},d,{value:void 0}),l=Q({},l,{value:void 0}),f=[];break;case"textarea":d=pa(e,d),l=pa(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Xs)}ga(i,l);var y;i=null;for(A in d)if(!l.hasOwnProperty(A)&&d.hasOwnProperty(A)&&d[A]!=null)if(A==="style"){var x=d[A];for(y in x)x.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(c.hasOwnProperty(A)?f||(f=[]):(f=f||[]).push(A,null));for(A in l){var N=l[A];if(x=d?.[A],l.hasOwnProperty(A)&&N!==x&&(N!=null||x!=null))if(A==="style")if(x){for(y in x)!x.hasOwnProperty(y)||N&&N.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in N)N.hasOwnProperty(y)&&x[y]!==N[y]&&(i||(i={}),i[y]=N[y])}else i||(f||(f=[]),f.push(A,i)),i=N;else A==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,x=x?x.__html:void 0,N!=null&&x!==N&&(f=f||[]).push(A,N)):A==="children"?typeof N!="string"&&typeof N!="number"||(f=f||[]).push(A,""+N):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(c.hasOwnProperty(A)?(N!=null&&A==="onScroll"&&Pe("scroll",e),f||x===N||(f=[])):(f=f||[]).push(A,N))}i&&(f=f||[]).push("style",i);var A=f;(t.updateQueue=A)&&(t.flags|=4)}},xd=function(e,t,i,l){i!==l&&(t.flags|=4)};function ds(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function Lm(e,t,i){var l=t.pendingProps;switch(so(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return ct(t.type)&&ei(),tt(t),null;case 3:return l=t.stateNode,hn(),Re(lt),Re(Ze),vo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pt!==null&&(Go(Pt),Pt=null))),Lo(e,t),tt(t),null;case 5:go(t);var d=Cr(as.current);if(i=t.type,e!==null&&t.stateNode!=null)vd(e,t,i,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(n(166));return tt(t),null}if(e=Cr(zt.current),ii(t)){l=t.stateNode,i=t.type;var f=t.memoizedProps;switch(l[Ut]=t,l[ts]=f,e=(t.mode&1)!==0,i){case"dialog":Pe("cancel",l),Pe("close",l);break;case"iframe":case"object":case"embed":Pe("load",l);break;case"video":case"audio":for(d=0;d<Xn.length;d++)Pe(Xn[d],l);break;case"source":Pe("error",l);break;case"img":case"image":case"link":Pe("error",l),Pe("load",l);break;case"details":Pe("toggle",l);break;case"input":Zl(l,f),Pe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Pe("invalid",l);break;case"textarea":rc(l,f),Pe("invalid",l)}ga(i,f),d=null;for(var y in f)if(f.hasOwnProperty(y)){var x=f[y];y==="children"?typeof x=="string"?l.textContent!==x&&(f.suppressHydrationWarning!==!0&&Ys(l.textContent,x,e),d=["children",x]):typeof x=="number"&&l.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Ys(l.textContent,x,e),d=["children",""+x]):c.hasOwnProperty(y)&&x!=null&&y==="onScroll"&&Pe("scroll",l)}switch(i){case"input":Cs(l),tc(l,f,!0);break;case"textarea":Cs(l),sc(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Xs)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ic(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(i,{is:l.is}):(e=y.createElement(i),i==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,i),e[Ut]=t,e[ts]=l,yd(e,t,!1,!1),t.stateNode=e;e:{switch(y=ya(i,l),i){case"dialog":Pe("cancel",e),Pe("close",e),d=l;break;case"iframe":case"object":case"embed":Pe("load",e),d=l;break;case"video":case"audio":for(d=0;d<Xn.length;d++)Pe(Xn[d],e);d=l;break;case"source":Pe("error",e),d=l;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),d=l;break;case"details":Pe("toggle",e),d=l;break;case"input":Zl(e,l),d=da(e,l),Pe("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=Q({},l,{value:void 0}),Pe("invalid",e);break;case"textarea":rc(e,l),d=pa(e,l),Pe("invalid",e);break;default:d=l}ga(i,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var N=x[f];f==="style"?lc(e,N):f==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ac(e,N)):f==="children"?typeof N=="string"?(i!=="textarea"||N!=="")&&An(e,N):typeof N=="number"&&An(e,""+N):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?N!=null&&f==="onScroll"&&Pe("scroll",e):N!=null&&I(e,f,N,y))}switch(i){case"input":Cs(e),tc(e,l,!1);break;case"textarea":Cs(e),sc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+xe(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Wr(e,!!l.multiple,f,!1):l.defaultValue!=null&&Wr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Xs)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)xd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(i=Cr(as.current),Cr(zt.current),ii(t)){if(l=t.stateNode,i=t.memoizedProps,l[Ut]=t,(f=l.nodeValue!==i)&&(e=gt,e!==null))switch(e.tag){case 3:Ys(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ys(l.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Ut]=t,t.stateNode=l}return tt(t),null;case 13:if(Re(Ae),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&yt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ju(),ln(),t.flags|=98560,f=!1;else if(f=ii(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Ut]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),f=!1}else Pt!==null&&(Go(Pt),Pt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ae.current&1)!==0?qe===0&&(qe=3):Yo())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return hn(),Lo(e,t),e===null&&Zn(t.stateNode.containerInfo),tt(t),null;case 10:return uo(t.type._context),tt(t),null;case 17:return ct(t.type)&&ei(),tt(t),null;case 19:if(Re(Ae),f=t.memoizedState,f===null)return tt(t),null;if(l=(t.flags&128)!==0,y=f.rendering,y===null)if(l)ds(f,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=di(e),y!==null){for(t.flags|=128,ds(f,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)f=i,e=l,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ce(Ae,Ae.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>gn&&(t.flags|=128,l=!0,ds(f,!1),t.lanes=4194304)}else{if(!l)if(e=di(y),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ds(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Oe)return tt(t),null}else 2*Le()-f.renderingStartTime>gn&&i!==1073741824&&(t.flags|=128,l=!0,ds(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(i=f.last,i!==null?i.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,i=Ae.current,Ce(Ae,l?i&1|2:i&1),t):(tt(t),null);case 22:case 23:return Qo(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(vt&1073741824)!==0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Mm(e,t){switch(so(t),t.tag){case 1:return ct(t.type)&&ei(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),Re(lt),Re(Ze),vo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return go(t),null;case 13:if(Re(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ae),null;case 4:return hn(),null;case 10:return uo(t.type._context),null;case 22:case 23:return Qo(),null;case 24:return null;default:return null}}var wi=!1,rt=!1,Um=typeof WeakSet=="function"?WeakSet:Set,te=null;function pn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){$e(e,t,l)}else i.current=null}function Mo(e,t,i){try{i()}catch(l){$e(e,t,l)}}var wd=!1;function zm(e,t){if(Ja=zs,e=Xc(),Fa(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,x=-1,N=-1,A=0,V=0,H=e,q=null;t:for(;;){for(var Z;H!==i||d!==0&&H.nodeType!==3||(x=y+d),H!==f||l!==0&&H.nodeType!==3||(N=y+l),H.nodeType===3&&(y+=H.nodeValue.length),(Z=H.firstChild)!==null;)q=H,H=Z;for(;;){if(H===e)break t;if(q===i&&++A===d&&(x=y),q===f&&++V===l&&(N=y),(Z=H.nextSibling)!==null)break;H=q,q=H.parentNode}H=Z}i=x===-1||N===-1?null:{start:x,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(Qa={focusedElem:e,selectionRange:i},zs=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var se=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var ie=se.memoizedProps,Me=se.memoizedState,R=t.stateNode,k=R.getSnapshotBeforeUpdate(t.elementType===t.type?ie:Rt(t.type,ie),Me);R.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){$e(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return se=wd,wd=!1,se}function hs(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Mo(t,i,f)}d=d.next}while(d!==l)}}function bi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function Uo(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function bd(e){var t=e.alternate;t!==null&&(e.alternate=null,bd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[ts],delete t[eo],delete t[jm],delete t[_m])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jd(e){return e.tag===5||e.tag===3||e.tag===4}function _d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zo(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Xs));else if(l!==4&&(e=e.child,e!==null))for(zo(e,t,i),e=e.sibling;e!==null;)zo(e,t,i),e=e.sibling}function Fo(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Fo(e,t,i),e=e.sibling;e!==null;)Fo(e,t,i),e=e.sibling}var Je=null,Ot=!1;function hr(e,t,i){for(i=i.child;i!==null;)Nd(e,t,i),i=i.sibling}function Nd(e,t,i){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Is,i)}catch{}switch(i.tag){case 5:rt||pn(i,t);case 6:var l=Je,d=Ot;Je=null,hr(e,t,i),Je=l,Ot=d,Je!==null&&(Ot?(e=Je,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Je.removeChild(i.stateNode));break;case 18:Je!==null&&(Ot?(e=Je,i=i.stateNode,e.nodeType===8?Za(e.parentNode,i):e.nodeType===1&&Za(e,i),Vn(e)):Za(Je,i.stateNode));break;case 4:l=Je,d=Ot,Je=i.stateNode.containerInfo,Ot=!0,hr(e,t,i),Je=l,Ot=d;break;case 0:case 11:case 14:case 15:if(!rt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Mo(i,t,y),d=d.next}while(d!==l)}hr(e,t,i);break;case 1:if(!rt&&(pn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(x){$e(i,t,x)}hr(e,t,i);break;case 21:hr(e,t,i);break;case 22:i.mode&1?(rt=(l=rt)||i.memoizedState!==null,hr(e,t,i),rt=l):hr(e,t,i);break;default:hr(e,t,i)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Um),t.forEach(function(l){var d=Jm.bind(null,e,l);i.has(l)||(i.add(l),l.then(d,d))})}}function At(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];try{var f=e,y=t,x=y;e:for(;x!==null;){switch(x.tag){case 5:Je=x.stateNode,Ot=!1;break e;case 3:Je=x.stateNode.containerInfo,Ot=!0;break e;case 4:Je=x.stateNode.containerInfo,Ot=!0;break e}x=x.return}if(Je===null)throw Error(n(160));Nd(f,y,d),Je=null,Ot=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(A){$e(d,t,A)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kd(t,e),t=t.sibling}function kd(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Bt(e),l&4){try{hs(3,e,e.return),bi(3,e)}catch(ie){$e(e,e.return,ie)}try{hs(5,e,e.return)}catch(ie){$e(e,e.return,ie)}}break;case 1:At(t,e),Bt(e),l&512&&i!==null&&pn(i,i.return);break;case 5:if(At(t,e),Bt(e),l&512&&i!==null&&pn(i,i.return),e.flags&32){var d=e.stateNode;try{An(d,"")}catch(ie){$e(e,e.return,ie)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,y=i!==null?i.memoizedProps:f,x=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&ec(d,f),ya(x,y);var A=ya(x,f);for(y=0;y<N.length;y+=2){var V=N[y],H=N[y+1];V==="style"?lc(d,H):V==="dangerouslySetInnerHTML"?ac(d,H):V==="children"?An(d,H):I(d,V,H,A)}switch(x){case"input":ha(d,f);break;case"textarea":nc(d,f);break;case"select":var q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var Z=f.value;Z!=null?Wr(d,!!f.multiple,Z,!1):q!==!!f.multiple&&(f.defaultValue!=null?Wr(d,!!f.multiple,f.defaultValue,!0):Wr(d,!!f.multiple,f.multiple?[]:"",!1))}d[ts]=f}catch(ie){$e(e,e.return,ie)}}break;case 6:if(At(t,e),Bt(e),l&4){if(e.stateNode===null)throw Error(n(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ie){$e(e,e.return,ie)}}break;case 3:if(At(t,e),Bt(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Vn(t.containerInfo)}catch(ie){$e(e,e.return,ie)}break;case 4:At(t,e),Bt(e);break;case 13:At(t,e),Bt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Vo=Le())),l&4&&Sd(e);break;case 22:if(V=i!==null&&i.memoizedState!==null,e.mode&1?(rt=(A=rt)||V,At(t,e),rt=A):At(t,e),Bt(e),l&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!V&&(e.mode&1)!==0)for(te=e,V=e.child;V!==null;){for(H=te=V;te!==null;){switch(q=te,Z=q.child,q.tag){case 0:case 11:case 14:case 15:hs(4,q,q.return);break;case 1:pn(q,q.return);var se=q.stateNode;if(typeof se.componentWillUnmount=="function"){l=q,i=q.return;try{t=l,se.props=t.memoizedProps,se.state=t.memoizedState,se.componentWillUnmount()}catch(ie){$e(l,i,ie)}}break;case 5:pn(q,q.return);break;case 22:if(q.memoizedState!==null){Td(H);continue}}Z!==null?(Z.return=q,te=Z):Td(H)}V=V.sibling}e:for(V=null,H=e;;){if(H.tag===5){if(V===null){V=H;try{d=H.stateNode,A?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=H.stateNode,N=H.memoizedProps.style,y=N!=null&&N.hasOwnProperty("display")?N.display:null,x.style.display=oc("display",y))}catch(ie){$e(e,e.return,ie)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=A?"":H.memoizedProps}catch(ie){$e(e,e.return,ie)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:At(t,e),Bt(e),l&4&&Sd(e);break;case 21:break;default:At(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(jd(i)){var l=i;break e}i=i.return}throw Error(n(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(An(d,""),l.flags&=-33);var f=_d(e);Fo(e,f,d);break;case 3:case 4:var y=l.stateNode.containerInfo,x=_d(e);zo(e,x,y);break;default:throw Error(n(161))}}catch(N){$e(e,e.return,N)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fm(e,t,i){te=e,Ed(e)}function Ed(e,t,i){for(var l=(e.mode&1)!==0;te!==null;){var d=te,f=d.child;if(d.tag===22&&l){var y=d.memoizedState!==null||wi;if(!y){var x=d.alternate,N=x!==null&&x.memoizedState!==null||rt;x=wi;var A=rt;if(wi=y,(rt=N)&&!A)for(te=d;te!==null;)y=te,N=y.child,y.tag===22&&y.memoizedState!==null?Pd(d):N!==null?(N.return=y,te=N):Pd(d);for(;f!==null;)te=f,Ed(f),f=f.sibling;te=d,wi=x,rt=A}Cd(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,te=f):Cd(e)}}function Cd(e){for(;te!==null;){var t=te;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||bi(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!rt)if(i===null)l.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Rt(t.type,i.memoizedProps);l.componentDidUpdate(d,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Tu(t,f,l);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Tu(t,y,i)}break;case 5:var x=t.stateNode;if(i===null&&t.flags&4){i=x;var N=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&i.focus();break;case"img":N.src&&(i.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var A=t.alternate;if(A!==null){var V=A.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&Vn(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}rt||t.flags&512&&Uo(t)}catch(q){$e(t,t.return,q)}}if(t===e){te=null;break}if(i=t.sibling,i!==null){i.return=t.return,te=i;break}te=t.return}}function Td(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var i=t.sibling;if(i!==null){i.return=t.return,te=i;break}te=t.return}}function Pd(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{bi(4,t)}catch(N){$e(t,i,N)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(N){$e(t,d,N)}}var f=t.return;try{Uo(t)}catch(N){$e(t,f,N)}break;case 5:var y=t.return;try{Uo(t)}catch(N){$e(t,y,N)}}}catch(N){$e(t,t.return,N)}if(t===e){te=null;break}var x=t.sibling;if(x!==null){x.return=t.return,te=x;break}te=t.return}}var Bm=Math.ceil,ji=z.ReactCurrentDispatcher,Bo=z.ReactCurrentOwner,St=z.ReactCurrentBatchConfig,_e=0,Ke=null,Ue=null,Qe=0,vt=0,mn=or(0),qe=0,fs=null,Pr=0,_i=0,qo=0,ps=null,dt=null,Vo=0,gn=1/0,Zt=null,Ni=!1,Ho=null,fr=null,Si=!1,pr=null,ki=0,ms=0,Wo=null,Ei=-1,Ci=0;function at(){return(_e&6)!==0?Le():Ei!==-1?Ei:Ei=Le()}function mr(e){return(e.mode&1)===0?1:(_e&2)!==0&&Qe!==0?Qe&-Qe:Sm.transition!==null?(Ci===0&&(Ci=_c()),Ci):(e=ke,e!==0||(e=window.event,e=e===void 0?16:Oc(e.type)),e)}function It(e,t,i,l){if(50<ms)throw ms=0,Wo=null,Error(n(185));Un(e,i,l),((_e&2)===0||e!==Ke)&&(e===Ke&&((_e&2)===0&&(_i|=i),qe===4&&gr(e,Qe)),ht(e,l),i===1&&_e===0&&(t.mode&1)===0&&(gn=Le()+500,ri&&cr()))}function ht(e,t){var i=e.callbackNode;Sp(e,t);var l=Ls(e,e===Ke?Qe:0);if(l===0)i!==null&&wc(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&wc(i),t===1)e.tag===0?Nm(Od.bind(null,e)):yu(Od.bind(null,e)),wm(function(){(_e&6)===0&&cr()}),i=null;else{switch(Nc(l)){case 1:i=Na;break;case 4:i=bc;break;case 16:i=As;break;case 536870912:i=jc;break;default:i=As}i=zd(i,Rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Rd(e,t){if(Ei=-1,Ci=0,(_e&6)!==0)throw Error(n(327));var i=e.callbackNode;if(yn()&&e.callbackNode!==i)return null;var l=Ls(e,e===Ke?Qe:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Ti(e,l);else{t=l;var d=_e;_e|=2;var f=Id();(Ke!==e||Qe!==t)&&(Zt=null,gn=Le()+500,Or(e,t));do try{Hm();break}catch(x){Ad(e,x)}while(!0);co(),ji.current=f,_e=d,Ue!==null?t=0:(Ke=null,Qe=0,t=qe)}if(t!==0){if(t===2&&(d=Sa(e),d!==0&&(l=d,t=Ko(e,d))),t===1)throw i=fs,Or(e,0),gr(e,l),ht(e,Le()),i;if(t===6)gr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!qm(d)&&(t=Ti(e,l),t===2&&(f=Sa(e),f!==0&&(l=f,t=Ko(e,f))),t===1))throw i=fs,Or(e,0),gr(e,l),ht(e,Le()),i;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(n(345));case 2:Ar(e,dt,Zt);break;case 3:if(gr(e,l),(l&130023424)===l&&(t=Vo+500-Le(),10<t)){if(Ls(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){at(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Xa(Ar.bind(null,e,dt,Zt),t);break}Ar(e,dt,Zt);break;case 4:if(gr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var y=31-Ct(l);f=1<<y,y=t[y],y>d&&(d=y),l&=~f}if(l=d,l=Le()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Bm(l/1960))-l,10<l){e.timeoutHandle=Xa(Ar.bind(null,e,dt,Zt),l);break}Ar(e,dt,Zt);break;case 5:Ar(e,dt,Zt);break;default:throw Error(n(329))}}}return ht(e,Le()),e.callbackNode===i?Rd.bind(null,e):null}function Ko(e,t){var i=ps;return e.current.memoizedState.isDehydrated&&(Or(e,t).flags|=256),e=Ti(e,t),e!==2&&(t=dt,dt=i,t!==null&&Go(t)),e}function Go(e){dt===null?dt=e:dt.push.apply(dt,e)}function qm(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!Tt(f(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~qo,t&=~_i,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ct(t),l=1<<i;e[i]=-1,t&=~l}}function Od(e){if((_e&6)!==0)throw Error(n(327));yn();var t=Ls(e,0);if((t&1)===0)return ht(e,Le()),null;var i=Ti(e,t);if(e.tag!==0&&i===2){var l=Sa(e);l!==0&&(t=l,i=Ko(e,l))}if(i===1)throw i=fs,Or(e,0),gr(e,t),ht(e,Le()),i;if(i===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ar(e,dt,Zt),ht(e,Le()),null}function Jo(e,t){var i=_e;_e|=1;try{return e(t)}finally{_e=i,_e===0&&(gn=Le()+500,ri&&cr())}}function Rr(e){pr!==null&&pr.tag===0&&(_e&6)===0&&yn();var t=_e;_e|=1;var i=St.transition,l=ke;try{if(St.transition=null,ke=1,e)return e()}finally{ke=l,St.transition=i,_e=t,(_e&6)===0&&cr()}}function Qo(){vt=mn.current,Re(mn)}function Or(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,xm(i)),Ue!==null)for(i=Ue.return;i!==null;){var l=i;switch(so(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ei();break;case 3:hn(),Re(lt),Re(Ze),vo();break;case 5:go(l);break;case 4:hn();break;case 13:Re(Ae);break;case 19:Re(Ae);break;case 10:uo(l.type._context);break;case 22:case 23:Qo()}i=i.return}if(Ke=e,Ue=e=yr(e.current,null),Qe=vt=t,qe=0,fs=null,qo=_i=Pr=0,dt=ps=null,Er!==null){for(t=0;t<Er.length;t++)if(i=Er[t],l=i.interleaved,l!==null){i.interleaved=null;var d=l.next,f=i.pending;if(f!==null){var y=f.next;f.next=d,l.next=y}i.pending=l}Er=null}return e}function Ad(e,t){do{var i=Ue;try{if(co(),hi.current=gi,fi){for(var l=Ie.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}fi=!1}if(Tr=0,We=Be=Ie=null,os=!1,ls=0,Bo.current=null,i===null||i.return===null){qe=1,fs=t,Ue=null;break}e:{var f=e,y=i.return,x=i,N=t;if(t=Qe,x.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var A=N,V=x,H=V.tag;if((V.mode&1)===0&&(H===0||H===11||H===15)){var q=V.alternate;q?(V.updateQueue=q.updateQueue,V.memoizedState=q.memoizedState,V.lanes=q.lanes):(V.updateQueue=null,V.memoizedState=null)}var Z=sd(y);if(Z!==null){Z.flags&=-257,id(Z,y,x,f,t),Z.mode&1&&nd(f,A,t),t=Z,N=A;var se=t.updateQueue;if(se===null){var ie=new Set;ie.add(N),t.updateQueue=ie}else se.add(N);break e}else{if((t&1)===0){nd(f,A,t),Yo();break e}N=Error(n(426))}}else if(Oe&&x.mode&1){var Me=sd(y);if(Me!==null){(Me.flags&65536)===0&&(Me.flags|=256),id(Me,y,x,f,t),oo(fn(N,x));break e}}f=N=fn(N,x),qe!==4&&(qe=2),ps===null?ps=[f]:ps.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var R=td(f,N,t);Cu(f,R);break e;case 1:x=N;var k=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(fr===null||!fr.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var K=rd(f,x,t);Cu(f,K);break e}}f=f.return}while(f!==null)}$d(i)}catch(ce){t=ce,Ue===i&&i!==null&&(Ue=i=i.return);continue}break}while(!0)}function Id(){var e=ji.current;return ji.current=gi,e===null?gi:e}function Yo(){(qe===0||qe===3||qe===2)&&(qe=4),Ke===null||(Pr&268435455)===0&&(_i&268435455)===0||gr(Ke,Qe)}function Ti(e,t){var i=_e;_e|=2;var l=Id();(Ke!==e||Qe!==t)&&(Zt=null,Or(e,t));do try{Vm();break}catch(d){Ad(e,d)}while(!0);if(co(),_e=i,ji.current=l,Ue!==null)throw Error(n(261));return Ke=null,Qe=0,qe}function Vm(){for(;Ue!==null;)Dd(Ue)}function Hm(){for(;Ue!==null&&!gp();)Dd(Ue)}function Dd(e){var t=Ud(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?$d(e):Ue=t,Bo.current=null}function $d(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Lm(i,t,vt),i!==null){Ue=i;return}}else{if(i=Mm(i,t),i!==null){i.flags&=32767,Ue=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);qe===0&&(qe=5)}function Ar(e,t,i){var l=ke,d=St.transition;try{St.transition=null,ke=1,Wm(e,t,i,l)}finally{St.transition=d,ke=l}return null}function Wm(e,t,i,l){do yn();while(pr!==null);if((_e&6)!==0)throw Error(n(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(kp(e,f),e===Ke&&(Ue=Ke=null,Qe=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Si||(Si=!0,zd(As,function(){return yn(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=St.transition,St.transition=null;var y=ke;ke=1;var x=_e;_e|=4,Bo.current=null,zm(e,i),kd(i,e),hm(Qa),zs=!!Ja,Qa=Ja=null,e.current=i,Fm(i),yp(),_e=x,ke=y,St.transition=f}else e.current=i;if(Si&&(Si=!1,pr=e,ki=d),f=e.pendingLanes,f===0&&(fr=null),wp(i.stateNode),ht(e,Le()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],l(d.value,{componentStack:d.stack,digest:d.digest});if(Ni)throw Ni=!1,e=Ho,Ho=null,e;return(ki&1)!==0&&e.tag!==0&&yn(),f=e.pendingLanes,(f&1)!==0?e===Wo?ms++:(ms=0,Wo=e):ms=0,cr(),null}function yn(){if(pr!==null){var e=Nc(ki),t=St.transition,i=ke;try{if(St.transition=null,ke=16>e?16:e,pr===null)var l=!1;else{if(e=pr,pr=null,ki=0,(_e&6)!==0)throw Error(n(331));var d=_e;for(_e|=4,te=e.current;te!==null;){var f=te,y=f.child;if((te.flags&16)!==0){var x=f.deletions;if(x!==null){for(var N=0;N<x.length;N++){var A=x[N];for(te=A;te!==null;){var V=te;switch(V.tag){case 0:case 11:case 15:hs(8,V,f)}var H=V.child;if(H!==null)H.return=V,te=H;else for(;te!==null;){V=te;var q=V.sibling,Z=V.return;if(bd(V),V===A){te=null;break}if(q!==null){q.return=Z,te=q;break}te=Z}}}var se=f.alternate;if(se!==null){var ie=se.child;if(ie!==null){se.child=null;do{var Me=ie.sibling;ie.sibling=null,ie=Me}while(ie!==null)}}te=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,te=y;else e:for(;te!==null;){if(f=te,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:hs(9,f,f.return)}var R=f.sibling;if(R!==null){R.return=f.return,te=R;break e}te=f.return}}var k=e.current;for(te=k;te!==null;){y=te;var O=y.child;if((y.subtreeFlags&2064)!==0&&O!==null)O.return=y,te=O;else e:for(y=k;te!==null;){if(x=te,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:bi(9,x)}}catch(ce){$e(x,x.return,ce)}if(x===y){te=null;break e}var K=x.sibling;if(K!==null){K.return=x.return,te=K;break e}te=x.return}}if(_e=d,cr(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Is,e)}catch{}l=!0}return l}finally{ke=i,St.transition=t}}return!1}function Ld(e,t,i){t=fn(i,t),t=td(e,t,1),e=dr(e,t,1),t=at(),e!==null&&(Un(e,1,t),ht(e,t))}function $e(e,t,i){if(e.tag===3)Ld(e,e,i);else for(;t!==null;){if(t.tag===3){Ld(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fr===null||!fr.has(l))){e=fn(i,e),e=rd(t,e,1),t=dr(t,e,1),e=at(),t!==null&&(Un(t,1,e),ht(t,e));break}}t=t.return}}function Km(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&i,Ke===e&&(Qe&i)===i&&(qe===4||qe===3&&(Qe&130023424)===Qe&&500>Le()-Vo?Or(e,0):qo|=i),ht(e,t)}function Md(e,t){t===0&&((e.mode&1)===0?t=1:(t=$s,$s<<=1,($s&130023424)===0&&($s=4194304)));var i=at();e=Qt(e,t),e!==null&&(Un(e,t,i),ht(e,i))}function Gm(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Md(e,i)}function Jm(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(t),Md(e,i)}var Ud;Ud=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)ut=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return ut=!1,$m(e,t,i);ut=(e.flags&131072)!==0}else ut=!1,Oe&&(t.flags&1048576)!==0&&vu(t,si,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;xi(e,t),e=t.pendingProps;var d=sn(t,Ze.current);dn(t,i),d=bo(null,t,l,e,d,i);var f=jo();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(l)?(f=!0,ti(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,po(t),d.updater=yi,t.stateNode=d,d._reactInternals=t,Co(t,l,e,i),t=Oo(null,t,l,!0,f,i)):(t.tag=0,Oe&&f&&no(t),it(null,t,d,i),t=t.child),t;case 16:l=t.elementType;e:{switch(xi(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=Ym(l),e=Rt(l,e),d){case 0:t=Ro(null,t,l,e,i);break e;case 1:t=dd(null,t,l,e,i);break e;case 11:t=ad(null,t,l,e,i);break e;case 14:t=od(null,t,l,Rt(l.type,e),i);break e}throw Error(n(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Ro(e,t,l,d,i);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),dd(e,t,l,d,i);case 3:e:{if(hd(t),e===null)throw Error(n(387));l=t.pendingProps,f=t.memoizedState,d=f.element,Eu(e,t),ui(t,l,null,i);var y=t.memoizedState;if(l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=fn(Error(n(423)),t),t=fd(e,t,l,i,d);break e}else if(l!==d){d=fn(Error(n(424)),t),t=fd(e,t,l,i,d);break e}else for(yt=ar(t.stateNode.containerInfo.firstChild),gt=t,Oe=!0,Pt=null,i=Su(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ln(),l===d){t=Xt(e,t,i);break e}it(e,t,l,i)}t=t.child}return t;case 5:return Pu(t),e===null&&ao(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,y=d.children,Ya(l,d)?y=null:f!==null&&Ya(l,f)&&(t.flags|=32),ud(e,t),it(e,t,y,i),t.child;case 6:return e===null&&ao(t),null;case 13:return pd(e,t,i);case 4:return mo(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=cn(t,null,l,i):it(e,t,l,i),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),ad(e,t,l,d,i);case 7:return it(e,t,t.pendingProps,i),t.child;case 8:return it(e,t,t.pendingProps.children,i),t.child;case 12:return it(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,y=d.value,Ce(oi,l._currentValue),l._currentValue=y,f!==null)if(Tt(f.value,y)){if(f.children===d.children&&!lt.current){t=Xt(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){y=f.child;for(var N=x.firstContext;N!==null;){if(N.context===l){if(f.tag===1){N=Yt(-1,i&-i),N.tag=2;var A=f.updateQueue;if(A!==null){A=A.shared;var V=A.pending;V===null?N.next=N:(N.next=V.next,V.next=N),A.pending=N}}f.lanes|=i,N=f.alternate,N!==null&&(N.lanes|=i),ho(f.return,i,t),x.lanes|=i;break}N=N.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(n(341));y.lanes|=i,x=y.alternate,x!==null&&(x.lanes|=i),ho(y,i,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}it(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,dn(t,i),d=_t(d),l=l(d),t.flags|=1,it(e,t,l,i),t.child;case 14:return l=t.type,d=Rt(l,t.pendingProps),d=Rt(l.type,d),od(e,t,l,d,i);case 15:return ld(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),xi(e,t),t.tag=1,ct(l)?(e=!0,ti(t)):e=!1,dn(t,i),Zu(t,l,d),Co(t,l,d,i),Oo(null,t,l,!0,e,i);case 19:return gd(e,t,i);case 22:return cd(e,t,i)}throw Error(n(156,t.tag))};function zd(e,t){return xc(e,t)}function Qm(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,i,l){return new Qm(e,t,i,l)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ym(e){if(typeof e=="function")return Xo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===G)return 11;if(e===Ee)return 14}return 2}function yr(e,t){var i=e.alternate;return i===null?(i=kt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Pi(e,t,i,l,d,f){var y=2;if(l=e,typeof e=="function")Xo(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case M:return Ir(i.children,d,f,t);case X:y=8,d|=8;break;case W:return e=kt(12,i,t,d|2),e.elementType=W,e.lanes=f,e;case Y:return e=kt(13,i,t,d),e.elementType=Y,e.lanes=f,e;case pe:return e=kt(19,i,t,d),e.elementType=pe,e.lanes=f,e;case J:return Ri(i,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case be:y=10;break e;case ee:y=9;break e;case G:y=11;break e;case Ee:y=14;break e;case le:y=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=kt(y,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function Ir(e,t,i,l){return e=kt(7,e,l,t),e.lanes=i,e}function Ri(e,t,i,l){return e=kt(22,e,l,t),e.elementType=J,e.lanes=i,e.stateNode={isHidden:!1},e}function Zo(e,t,i){return e=kt(6,e,null,t),e.lanes=i,e}function el(e,t,i){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xm(e,t,i,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ka(0),this.expirationTimes=ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function tl(e,t,i,l,d,f,y,x,N){return e=new Xm(e,t,i,x,N),t===1?(t=1,f===!0&&(t|=8)):t=0,f=kt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},po(f),e}function Zm(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function Fd(e){if(!e)return lr;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var i=e.type;if(ct(i))return mu(e,i,t)}return t}function Bd(e,t,i,l,d,f,y,x,N){return e=tl(i,l,!0,e,d,f,y,x,N),e.context=Fd(null),i=e.current,l=at(),d=mr(i),f=Yt(l,d),f.callback=t??null,dr(i,f,d),e.current.lanes=d,Un(e,d,l),ht(e,l),e}function Oi(e,t,i,l){var d=t.current,f=at(),y=mr(d);return i=Fd(i),t.context===null?t.context=i:t.pendingContext=i,t=Yt(f,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=dr(d,t,y),e!==null&&(It(e,d,y,f),ci(e,d,y)),y}function Ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function rl(e,t){qd(e,t),(e=e.alternate)&&qd(e,t)}function eg(){return null}var Vd=typeof reportError=="function"?reportError:function(e){console.error(e)};function nl(e){this._internalRoot=e}Ii.prototype.render=nl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Oi(e,t,null,null)},Ii.prototype.unmount=nl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rr(function(){Oi(null,e,null,null)}),t[Wt]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ec();e={blockedOn:null,target:e,priority:t};for(var i=0;i<nr.length&&t!==0&&t<nr[i].priority;i++);nr.splice(i,0,e),i===0&&Pc(e)}};function sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Di(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hd(){}function tg(e,t,i,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var A=Ai(y);f.call(A)}}var y=Bd(t,l,e,0,null,!1,!1,"",Hd);return e._reactRootContainer=y,e[Wt]=y.current,Zn(e.nodeType===8?e.parentNode:e),Rr(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var x=l;l=function(){var A=Ai(N);x.call(A)}}var N=tl(e,0,!1,null,null,!1,!1,"",Hd);return e._reactRootContainer=N,e[Wt]=N.current,Zn(e.nodeType===8?e.parentNode:e),Rr(function(){Oi(t,N,i,l)}),N}function $i(e,t,i,l,d){var f=i._reactRootContainer;if(f){var y=f;if(typeof d=="function"){var x=d;d=function(){var N=Ai(y);x.call(N)}}Oi(t,y,e,d)}else y=tg(i,t,e,d,l);return Ai(y)}Sc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Mn(t.pendingLanes);i!==0&&(Ea(t,i|1),ht(t,Le()),(_e&6)===0&&(gn=Le()+500,cr()))}break;case 13:Rr(function(){var l=Qt(e,1);if(l!==null){var d=at();It(l,e,1,d)}}),rl(e,1)}},Ca=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var i=at();It(t,e,134217728,i)}rl(e,134217728)}},kc=function(e){if(e.tag===13){var t=mr(e),i=Qt(e,t);if(i!==null){var l=at();It(i,e,t,l)}rl(e,t)}},Ec=function(){return ke},Cc=function(e,t){var i=ke;try{return ke=e,t()}finally{ke=i}},wa=function(e,t,i){switch(t){case"input":if(ha(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=Zs(l);if(!d)throw Error(n(90));Xl(l),ha(l,d)}}}break;case"textarea":nc(e,i);break;case"select":t=i.value,t!=null&&Wr(e,!!i.multiple,t,!1)}},hc=Jo,fc=Rr;var rg={usingClientEntryPoint:!1,Events:[rs,rn,Zs,uc,dc,Jo]},gs={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ng={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yc(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||eg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Li.isDisabled&&Li.supportsFiber)try{Is=Li.inject(ng),Mt=Li}catch{}}return ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rg,ft.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sl(t))throw Error(n(200));return Zm(e,t,null,i)},ft.createRoot=function(e,t){if(!sl(e))throw Error(n(299));var i=!1,l="",d=Vd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=tl(e,1,!1,null,null,i,!1,l,d),e[Wt]=t.current,Zn(e.nodeType===8?e.parentNode:e),new nl(t)},ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=yc(t),e=e===null?null:e.stateNode,e},ft.flushSync=function(e){return Rr(e)},ft.hydrate=function(e,t,i){if(!Di(t))throw Error(n(200));return $i(null,e,t,!0,i)},ft.hydrateRoot=function(e,t,i){if(!sl(e))throw Error(n(405));var l=i!=null&&i.hydratedSources||null,d=!1,f="",y=Vd;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=Bd(t,null,e,1,i??null,d,!1,f,y),e[Wt]=t.current,Zn(e),l)for(e=0;e<l.length;e++)i=l[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new Ii(t)},ft.render=function(e,t,i){if(!Di(t))throw Error(n(200));return $i(null,e,t,!1,i)},ft.unmountComponentAtNode=function(e){if(!Di(e))throw Error(n(40));return e._reactRootContainer?(Rr(function(){$i(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1},ft.unstable_batchedUpdates=Jo,ft.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!Di(i))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return $i(e,t,i,!1,l)},ft.version="18.3.1-next-f1338f8080-20240426",ft}var Zd;function pg(){if(Zd)return ol.exports;Zd=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),ol.exports=fg(),ol.exports}var eh;function mg(){if(eh)return Mi;eh=1;var o=pg();return Mi.createRoot=o.createRoot,Mi.hydrateRoot=o.hydrateRoot,Mi}var gg=mg(),j=Dl();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vg=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,a)=>a?a.toUpperCase():n.toLowerCase()),th=o=>{const r=vg(o);return r.charAt(0).toUpperCase()+r.slice(1)},Bh=(...o)=>o.filter((r,n,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=j.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:c="",children:u,iconNode:h,...p},m)=>j.createElement("svg",{ref:m,...xg,width:r,height:r,stroke:o,strokeWidth:a?Number(n)*24/Number(r):n,className:Bh("lucide",c),...p},[...h.map(([g,v])=>j.createElement(g,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(o,r)=>{const n=j.forwardRef(({className:a,...c},u)=>j.createElement(wg,{ref:u,iconNode:r,className:Bh(`lucide-${yg(th(o))}`,`lucide-${o}`,a),...c}));return n.displayName=th(o),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qh=fe("activity",bg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],_g=fe("arrow-down",jg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$l=fe("award",Ng);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kg=fe("bell",Sg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Cg=fe("briefcase",Eg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Pg=fe("building-2",Tg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],br=fe("calendar",Rg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Vh=fe("chart-column",Og);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ig=fe("chevron-down",Ag);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$g=fe("chevron-left",Dg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mg=fe("chevron-right",Lg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hh=fe("circle-alert",Ug);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ns=fe("circle-check-big",zg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bg=fe("circle-check",Fg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wh=fe("circle-x",qg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hg=fe("circle",Vg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Kg=fe("clipboard-check",Wg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Kh=fe("clock",Gg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Qg=fe("database",Jg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ll=fe("download",Yg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zg=fe("eye-off",Xg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gh=fe("eye",e0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Et=fe("file-text",t0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],rh=fe("file",r0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Jh=fe("flag",n0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],i0=fe("folder-kanban",s0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ml=fe("funnel",a0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],l0=fe("grip-vertical",o0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],u0=fe("key",c0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],bs=fe("mail",d0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ss=fe("map-pin",h0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yl=fe("package",f0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],m0=fe("pencil",p0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Yi=fe("phone",g0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ot=fe("plus",y0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ks=fe("search",v0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ul=fe("send",x0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zl=fe("settings",w0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],j0=fe("share-2",b0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vr=fe("square-pen",_0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3",key:"1pi83i"}],["path",{d:"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3",key:"ido5k7"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],S0=fe("square-split-vertical",N0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Vt=fe("trash-2",k0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Qh=fe("trending-up",E0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],T0=fe("triangle-alert",C0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],R0=fe("user",P0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Fl=fe("users",O0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Yh=fe("video",A0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],nh=fe("workflow",I0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hr=fe("x",D0);function $0({currentPage:o,onNavigate:r}){const n=[{icon:Cg,label:"Portefeuille projets",page:"portfolio"},{icon:i0,label:"Projets",page:"projects"},{icon:br,label:"Planning",page:"planning"},{icon:Fl,label:"Ressources",page:"resources"},{icon:Pg,label:"Clients",page:"clients"},{icon:$l,label:"Comptences",page:"competences"},{icon:yl,label:"Articles",page:"articles"},{icon:Vh,label:"Reporting",page:"reporting"},{icon:zl,label:"Administration",page:"administration"}];return s.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[s.jsx("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white",children:"PM"})}),s.jsx("span",{className:"text-gray-900",children:"ProjectHub"})]})}),s.jsx("nav",{className:"flex-1 px-4 py-6",children:s.jsx("ul",{className:"space-y-1",children:n.map(a=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>r(a.page),className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-colors ${o===a.page?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx(a.icon,{className:"w-5 h-5"}),s.jsx("span",{children:a.label})]})},a.label))})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-700",children:"JD"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-gray-900 truncate",children:"Jean Dupont"}),s.jsx("div",{className:"text-gray-500 text-sm",children:"Chef de projet"})]})]})})]})}function Ve({isOpen:o,onClose:r,title:n,children:a,size:c="md"}){if(!o)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),s.jsxs("div",{className:`relative bg-white rounded-xl shadow-2xl w-full ${u[c]} mx-4 max-h-[90vh] flex flex-col`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-gray-900",children:n}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Hr,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a})]})]})}var vl=function(o,r){return vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},vl(o,r)};function Xh(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");vl(o,r);function n(){this.constructor=o}o.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Xi=function(){return Xi=Object.assign||function(r){for(var n,a=1,c=arguments.length;a<c;a++){n=arguments[a];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},Xi.apply(this,arguments)};function Pn(o,r){var n={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&r.indexOf(a)<0&&(n[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(o);c<a.length;c++)r.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(o,a[c])&&(n[a[c]]=o[a[c]]);return n}function Zh(o,r,n,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,n):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,r,n,a);else for(var p=o.length-1;p>=0;p--)(h=o[p])&&(u=(c<3?h(u):c>3?h(r,n,u):h(r,n))||u);return c>3&&u&&Object.defineProperty(r,n,u),u}function ef(o,r){return function(n,a){r(n,a,o)}}function tf(o,r,n,a,c,u){function h(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var p=a.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!r&&o?a.static?o:o.prototype:null,v=r||(g?Object.getOwnPropertyDescriptor(g,a.name):{}),_,w=!1,b=n.length-1;b>=0;b--){var S={};for(var E in a)S[E]=E==="access"?{}:a[E];for(var E in a.access)S.access[E]=a.access[E];S.addInitializer=function(T){if(w)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(T||null))};var C=(0,n[b])(p==="accessor"?{get:v.get,set:v.set}:v[m],S);if(p==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(_=h(C.get))&&(v.get=_),(_=h(C.set))&&(v.set=_),(_=h(C.init))&&c.unshift(_)}else(_=h(C))&&(p==="field"?c.unshift(_):v[m]=_)}g&&Object.defineProperty(g,a.name,v),w=!0}function rf(o,r,n){for(var a=arguments.length>2,c=0;c<r.length;c++)n=a?r[c].call(o,n):r[c].call(o);return a?n:void 0}function nf(o){return typeof o=="symbol"?o:"".concat(o)}function sf(o,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function af(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function re(o,r,n,a){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function p(v){try{g(a.next(v))}catch(_){h(_)}}function m(v){try{g(a.throw(v))}catch(_){h(_)}}function g(v){v.done?u(v.value):c(v.value).then(p,m)}g((a=a.apply(o,r||[])).next())})}function of(o,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,c,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(a=1,c&&(u=g[0]&2?c.return:g[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,g[1])).done)return u;switch(c=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,c=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){n.label=g[1];break}if(g[0]===6&&n.label<u[1]){n.label=u[1],u=g;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(g);break}u[2]&&n.ops.pop(),n.trys.pop();continue}g=r.call(o,n)}catch(v){g=[6,v],c=0}finally{a=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var aa=Object.create?(function(o,r,n,a){a===void 0&&(a=n);var c=Object.getOwnPropertyDescriptor(r,n);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(o,a,c)}):(function(o,r,n,a){a===void 0&&(a=n),o[a]=r[n]});function lf(o,r){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&aa(r,o,n)}function Zi(o){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&o[r],a=0;if(n)return n.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bl(o,r){var n=typeof Symbol=="function"&&o[Symbol.iterator];if(!n)return o;var a=n.call(o),c,u=[],h;try{for(;(r===void 0||r-- >0)&&!(c=a.next()).done;)u.push(c.value)}catch(p){h={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(h)throw h.error}}return u}function cf(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Bl(arguments[r]));return o}function uf(){for(var o=0,r=0,n=arguments.length;r<n;r++)o+=arguments[r].length;for(var a=Array(o),c=0,r=0;r<n;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,c++)a[c]=u[h];return a}function df(o,r,n){if(n||arguments.length===2)for(var a=0,c=r.length,u;a<c;a++)(u||!(a in r))&&(u||(u=Array.prototype.slice.call(r,0,a)),u[a]=r[a]);return o.concat(u||Array.prototype.slice.call(r))}function En(o){return this instanceof En?(this.v=o,this):new En(o)}function hf(o,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(o,r||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(b){return function(S){return Promise.resolve(S).then(b,_)}}function p(b,S){a[b]&&(c[b]=function(E){return new Promise(function(C,T){u.push([b,E,C,T])>1||m(b,E)})},S&&(c[b]=S(c[b])))}function m(b,S){try{g(a[b](S))}catch(E){w(u[0][3],E)}}function g(b){b.value instanceof En?Promise.resolve(b.value.v).then(v,_):w(u[0][2],b)}function v(b){m("next",b)}function _(b){m("throw",b)}function w(b,S){b(S),u.shift(),u.length&&m(u[0][0],u[0][1])}}function ff(o){var r,n;return r={},a("next"),a("throw",function(c){throw c}),a("return"),r[Symbol.iterator]=function(){return this},r;function a(c,u){r[c]=o[c]?function(h){return(n=!n)?{value:En(o[c](h)),done:!1}:u?u(h):h}:u}}function pf(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],n;return r?r.call(o):(o=typeof Zi=="function"?Zi(o):o[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(u){n[u]=o[u]&&function(h){return new Promise(function(p,m){h=o[u](h),c(p,m,h.done,h.value)})}}function c(u,h,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},h)}}function mf(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}var L0=Object.create?(function(o,r){Object.defineProperty(o,"default",{enumerable:!0,value:r})}):function(o,r){o.default=r},xl=function(o){return xl=Object.getOwnPropertyNames||function(r){var n=[];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[n.length]=a);return n},xl(o)};function gf(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var n=xl(o),a=0;a<n.length;a++)n[a]!=="default"&&aa(r,o,n[a]);return L0(r,o),r}function yf(o){return o&&o.__esModule?o:{default:o}}function vf(o,r,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?o!==r||!a:!r.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(o):a?a.value:r.get(o)}function xf(o,r,n,a,c){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?o!==r||!c:!r.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?c.call(o,n):c?c.value=n:r.set(o,n),n}function wf(o,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?r===o:o.has(r)}function bf(o,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var a,c;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=r[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=r[Symbol.dispose],n&&(c=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");c&&(a=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),o.stack.push({value:r,dispose:a,async:n})}else n&&o.stack.push({async:!0});return r}var M0=typeof SuppressedError=="function"?SuppressedError:function(o,r,n){var a=new Error(n);return a.name="SuppressedError",a.error=o,a.suppressed=r,a};function jf(o){function r(u){o.error=o.hasError?new M0(u,o.error,"An error was suppressed during disposal."):u,o.hasError=!0}var n,a=0;function c(){for(;n=o.stack.pop();)try{if(!n.async&&a===1)return a=0,o.stack.push(n),Promise.resolve().then(c);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(u).then(c,function(h){return r(h),c()})}else a|=1}catch(h){r(h)}if(a===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return c()}function _f(o,r){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,c,u,h){return a?r?".jsx":".js":c&&(!u||!h)?n:c+u+"."+h.toLowerCase()+"js"}):o}const U0={__extends:Xh,__assign:Xi,__rest:Pn,__decorate:Zh,__param:ef,__esDecorate:tf,__runInitializers:rf,__propKey:nf,__setFunctionName:sf,__metadata:af,__awaiter:re,__generator:of,__createBinding:aa,__exportStar:lf,__values:Zi,__read:Bl,__spread:cf,__spreadArrays:uf,__spreadArray:df,__await:En,__asyncGenerator:hf,__asyncDelegator:ff,__asyncValues:pf,__makeTemplateObject:mf,__importStar:gf,__importDefault:yf,__classPrivateFieldGet:vf,__classPrivateFieldSet:xf,__classPrivateFieldIn:wf,__addDisposableResource:bf,__disposeResources:jf,__rewriteRelativeImportExtension:_f},z0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:bf,get __assign(){return Xi},__asyncDelegator:ff,__asyncGenerator:hf,__asyncValues:pf,__await:En,__awaiter:re,__classPrivateFieldGet:vf,__classPrivateFieldIn:wf,__classPrivateFieldSet:xf,__createBinding:aa,__decorate:Zh,__disposeResources:jf,__esDecorate:tf,__exportStar:lf,__extends:Xh,__generator:of,__importDefault:yf,__importStar:gf,__makeTemplateObject:mf,__metadata:af,__param:ef,__propKey:nf,__read:Bl,__rest:Pn,__rewriteRelativeImportExtension:_f,__runInitializers:rf,__setFunctionName:sf,__spread:cf,__spreadArray:df,__spreadArrays:uf,__values:Zi,default:U0},Symbol.toStringTag,{value:"Module"})),F0=o=>o?(...r)=>o(...r):(...r)=>fetch(...r);class oa extends Error{constructor(r,n="FunctionsError",a){super(r),this.name=n,this.context=a}}class Nf extends oa{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class wl extends oa{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class bl extends oa{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var ea;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(ea||(ea={}));class B0{constructor(r,{headers:n={},customFetch:a,region:c=ea.Any}={}){this.url=r,this.headers=n,this.region=c,this.fetch=F0(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return re(this,arguments,void 0,function*(n,a={}){var c;let u,h;try{const{headers:p,method:m,body:g,signal:v,timeout:_}=a;let w={},{region:b}=a;b||(b=this.region);const S=new URL(`${this.url}/${n}`);b&&b!=="any"&&(w["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let E;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",E=g):typeof g=="string"?(w["Content-Type"]="text/plain",E=g):typeof FormData<"u"&&g instanceof FormData?E=g:(w["Content-Type"]="application/json",E=JSON.stringify(g)):E=g;let C=v;_&&(h=new AbortController,u=setTimeout(()=>h.abort(),_),v?(C=h.signal,v.addEventListener("abort",()=>h.abort())):C=h.signal);const T=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),p),body:E,signal:C}).catch(L=>{throw new Nf(L)}),D=T.headers.get("x-relay-error");if(D&&D==="true")throw new wl(T);if(!T.ok)throw new bl(T);let I=((c=T.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),z;return I==="application/json"?z=yield T.json():I==="application/octet-stream"||I==="application/pdf"?z=yield T.blob():I==="text/event-stream"?z=T:I==="multipart/form-data"?z=yield T.formData():z=yield T.text(),{data:z,error:null,response:T}}catch(p){return{data:null,error:p,response:p instanceof bl||p instanceof wl?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var nt={};const Rn=og(z0);var Ui={},zi={},Fi={},Bi={},qi={},Vi={},sh;function Sf(){if(sh)return Vi;sh=1,Object.defineProperty(Vi,"__esModule",{value:!0});class o extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Vi.default=o,Vi}var ih;function kf(){if(ih)return qi;ih=1,Object.defineProperty(qi,"__esModule",{value:!0});const r=Rn.__importDefault(Sf());class n{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,v,_,w;let b=null,S=null,E=null,C=m.status,T=m.statusText;if(m.ok){if(this.method!=="HEAD"){const L=await m.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=L:S=JSON.parse(L))}const I=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),z=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");I&&z&&z.length>1&&(E=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,E=null,C=406,T="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const I=await m.text();try{b=JSON.parse(I),Array.isArray(b)&&m.status===404&&(S=[],b=null,C=200,T="OK")}catch{m.status===404&&I===""?(C=204,T="No Content"):b={message:I}}if(b&&this.isMaybeSingle&&(!((w=b?.details)===null||w===void 0)&&w.includes("0 rows"))&&(b=null,C=200,T="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:S,count:E,status:C,statusText:T}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,v,_,w,b,S;let E="";const C=m?.cause;if(C){const T=(g=C?.message)!==null&&g!==void 0?g:"",D=(v=C?.code)!==null&&v!==void 0?v:"";E=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,E+=`

Caused by: ${(w=C?.name)!==null&&w!==void 0?w:"Error"}: ${T}`,D&&(E+=` (${D})`),C?.stack&&(E+=`
${C.stack}`)}else E=(b=m?.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(S=m?.name)!==null&&S!==void 0?S:"FetchError"}: ${m?.message}`,details:E,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}}return qi.default=n,qi}var ah;function Ef(){if(ah)return Bi;ah=1,Object.defineProperty(Bi,"__esModule",{value:!0});const r=Rn.__importDefault(kf());class n extends r.default{select(c){let u=!1;const h=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var v;const _=[c?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),w=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${_};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Bi.default=n,Bi}var oh;function ql(){if(oh)return Fi;oh=1,Object.defineProperty(Fi,"__esModule",{value:!0});const r=Rn.__importDefault(Ef()),n=new RegExp("[,()]");class a extends r.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}regexMatch(u,h){return this.url.searchParams.append(u,`match.${h}`),this}regexIMatch(u,h){return this.url.searchParams.append(u,`imatch.${h}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}isDistinct(u,h){return this.url.searchParams.append(u,`isdistinct.${h}`),this}in(u,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const v=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${v}.${h}`),this}match(u){return Object.entries(u).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(u,h,p){return this.url.searchParams.append(u,`not.${h}.${p}`),this}or(u,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,p){return this.url.searchParams.append(u,`${h}.${p}`),this}}return Fi.default=a,Fi}var lh;function Cf(){if(lh)return zi;lh=1,Object.defineProperty(zi,"__esModule",{value:!0});const r=Rn.__importDefault(ql());class n{constructor(c,{headers:u={},schema:h,fetch:p}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(c,u){const{head:h=!1,count:p}=u??{},m=h?"HEAD":"GET";let g=!1;const v=(c??"*").split("").map(_=>/\s/.test(_)&&!g?"":(_==='"'&&(g=!g),_)).join("");return this.url.searchParams.set("select",v),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(g.length>0){const v=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var g;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const _=c.reduce((w,b)=>w.concat(Object.keys(b)),[]);if(_.length>0){const w=[...new Set(_)].map(b=>`"${b}"`);this.url.searchParams.set("columns",w.join(","))}}return new r.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return zi.default=n,zi}var ch;function q0(){if(ch)return Ui;ch=1,Object.defineProperty(Ui,"__esModule",{value:!0});const o=Rn,r=o.__importDefault(Cf()),n=o.__importDefault(ql());class a{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${u}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:g}={}){var v;let _;const w=new URL(`${this.url}/rpc/${u}`);let b;p||m?(_=p?"HEAD":"GET",Object.entries(h).filter(([E,C])=>C!==void 0).map(([E,C])=>[E,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([E,C])=>{w.searchParams.append(E,C)})):(_="POST",b=h);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new n.default({method:_,url:w,headers:S,schema:this.schemaName,body:b,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Ui.default=a,Ui}var uh;function V0(){if(uh)return nt;uh=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const o=Rn,r=o.__importDefault(q0());nt.PostgrestClient=r.default;const n=o.__importDefault(Cf());nt.PostgrestQueryBuilder=n.default;const a=o.__importDefault(ql());nt.PostgrestFilterBuilder=a.default;const c=o.__importDefault(Ef());nt.PostgrestTransformBuilder=c.default;const u=o.__importDefault(kf());nt.PostgrestBuilder=u.default;const h=o.__importDefault(Sf());return nt.PostgrestError=h.default,nt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},nt}var Tf=V0();const Pf=ag(Tf),H0=ig({__proto__:null,default:Pf},[Tf]),{PostgrestClient:W0,PostgrestQueryBuilder:Sw,PostgrestFilterBuilder:kw,PostgrestTransformBuilder:Ew,PostgrestBuilder:Cw,PostgrestError:K0}=Pf||H0;class Rf{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,c=parseInt(a.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const a=this.getWebSocketConstructor();return new a(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const G0="2.87.3",J0=`realtime-js/${G0}`,Of="1.0.0",Q0="2.0.0",dh=Of,jl=1e4,Y0=1e3,X0=100;var zr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(zr||(zr={}));var ze;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(ze||(ze={}));var Lt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Lt||(Lt={}));var _l;(function(o){o.websocket="websocket"})(_l||(_l={}));var Fr;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Fr||(Fr={}));class Z0{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let a=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,a;const c=(a=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var n,a;const c=(a=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,n,a){var c,u;const h=r.topic,p=(c=r.ref)!==null&&c!==void 0?c:"",m=(u=r.join_ref)!==null&&u!==void 0?u:"",g=r.payload.event,v=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+g.length+_.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(b),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,m.length),S.setUint8(E++,p.length),S.setUint8(E++,h.length),S.setUint8(E++,g.length),S.setUint8(E++,_.length),S.setUint8(E++,n),Array.from(m,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(p,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(h,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(g,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(_,T=>S.setUint8(E++,T.charCodeAt(0)));var C=new Uint8Array(b.byteLength+a.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(a),b.byteLength),C.buffer}decode(r,n){if(this._isArrayBuffer(r)){let a=this._binaryDecode(r);return n(a)}if(typeof r=="string"){const a=JSON.parse(r),[c,u,h,p,m]=a;return n({join_ref:c,ref:u,topic:h,event:p,payload:m})}return n({})}_binaryDecode(r){const n=new DataView(r),a=n.getUint8(0),c=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,c)}}_decodeUserBroadcast(r,n,a){const c=n.getUint8(1),u=n.getUint8(2),h=n.getUint8(3),p=n.getUint8(4);let m=this.HEADER_LENGTH+4;const g=a.decode(r.slice(m,m+c));m=m+c;const v=a.decode(r.slice(m,m+u));m=m+u;const _=a.decode(r.slice(m,m+h));m=m+h;const w=r.slice(m,r.byteLength),b=p===this.JSON_ENCODING?JSON.parse(a.decode(w)):w,S={type:this.BROADCAST_EVENT,event:v,payload:b};return h>0&&(S.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([a])=>n.includes(a)))}}class Af{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Te||(Te={}));const hh=(o,r,n={})=>{var a;const c=(a=n.skipTypes)!==null&&a!==void 0?a:[];return r?Object.keys(r).reduce((u,h)=>(u[h]=ey(h,o,r,c),u),{}):{}},ey=(o,r,n,a)=>{const c=r.find(p=>p.name===o),u=c?.type,h=n[o];return u&&!a.includes(u)?If(u,h):Nl(h)},If=(o,r)=>{if(o.charAt(0)==="_"){const n=o.slice(1,o.length);return sy(r,n)}switch(o){case Te.bool:return ty(r);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return ry(r);case Te.json:case Te.jsonb:return ny(r);case Te.timestamp:return iy(r);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return Nl(r);default:return Nl(r)}},Nl=o=>o,ty=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},ry=o=>{if(typeof o=="string"){const r=parseFloat(o);if(!Number.isNaN(r))return r}return o},ny=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(r){return console.log(`JSON parse error: ${r}`),o}return o},sy=(o,r)=>{if(typeof o!="string")return o;const n=o.length-1,a=o[n];if(o[0]==="{"&&a==="}"){let u;const h=o.slice(1,n);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>If(r,p))}return o},iy=o=>typeof o=="string"?o.replace(" ","T"):o,Df=o=>{const r=new URL(o);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class ul{constructor(r,n,a={},c=jl){this.channel=r,this.event=n,this.payload=a,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var a;return this._hasReceived(r)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Sl;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Sl||(Sl={}));class Nn{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nn.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=Nn.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Nn.syncDiff(this.state,c,u,h),p())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,a,c){const u=this.cloneDeep(r),h=this.transformState(n),p={},m={};return this.map(u,(g,v)=>{h[g]||(m[g]=v)}),this.map(h,(g,v)=>{const _=u[g];if(_){const w=v.map(C=>C.presence_ref),b=_.map(C=>C.presence_ref),S=v.filter(C=>b.indexOf(C.presence_ref)<0),E=_.filter(C=>w.indexOf(C.presence_ref)<0);S.length>0&&(p[g]=S),E.length>0&&(m[g]=E)}else p[g]=v}),this.syncDiff(u,{joins:p,leaves:m},a,c)}static syncDiff(r,n,a,c){const{joins:u,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var g;const v=(g=r[p])!==null&&g!==void 0?g:[];if(r[p]=this.cloneDeep(m),v.length>0){const _=r[p].map(b=>b.presence_ref),w=v.filter(b=>_.indexOf(b.presence_ref)<0);r[p].unshift(...w)}a(p,v,m)}),this.map(h,(p,m)=>{let g=r[p];if(!g)return;const v=m.map(_=>_.presence_ref);g=g.filter(_=>v.indexOf(_.presence_ref)<0),r[p]=g,c(p,g,m),g.length===0&&delete r[p]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(a=>n(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,a)=>{const c=r[a];return"metas"in c?n[a]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[a]=c,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kl;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(kl||(kl={}));var Sn;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Sn||(Sn={}));var qt;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));const ay=ze;class Br{constructor(r,n={config:{}},a){var c,u;if(this.topic=r,this.params=n,this.socket=a,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ul(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new Af(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new Nn(this),this.broadcastEndpointURL=Df(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var a,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(c=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&c!==void 0?c:[],v=!!this.bindings[Sn.PRESENCE]&&this.bindings[Sn.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,_={},w={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(b=>r?.(qt.CHANNEL_ERROR,b)),this._onClose(()=>r?.(qt.CLOSED)),this.updateJoinPayload(Object.assign({config:w},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){r?.(qt.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(S=E?.length)!==null&&S!==void 0?S:0,T=[];for(let D=0;D<C;D++){const I=E[D],{filter:{event:z,schema:L,table:B,filter:M}}=I,X=b&&b[D];if(X&&X.event===z&&Br.isFilterValueEqual(X.schema,L)&&Br.isFilterValueEqual(X.table,B)&&Br.isFilterValueEqual(X.filter,M))T.push(Object.assign(Object.assign({},I),{id:X.id}));else{this.unsubscribe(),this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,r&&r(qt.SUBSCRIBED);return}}).receive("error",b=>{this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{r?.(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,a){return this.state===ze.joined&&r===Sn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,a)}async httpSend(r,n,a={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(r,n={}){var a,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,m;const g=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(c=>{a=new ul(this,Lt.leave,{},r),a.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(r,n,a){const c=new AbortController,u=setTimeout(()=>c.abort(),a),h=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(u),h}_push(r,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ul(this,r,n,a);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>X0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,a){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,a){var c,u;const h=r.toLocaleLowerCase(),{close:p,error:m,leave:g,join:v}=Lt;if(a&&[p,m,g,v].indexOf(h)>=0&&a!==this._joinRef())return;let w=this._onMessage(h,n,a);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(b=>{var S,E,C;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(E=b.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===h}).map(b=>b.callback(w,a)):(u=this.bindings[h])===null||u===void 0||u.filter(b=>{var S,E,C,T,D,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in b){const z=b.id,L=(S=b.filter)===null||S===void 0?void 0:S.event;return z&&((E=n.ids)===null||E===void 0?void 0:E.includes(z))&&(L==="*"||L?.toLocaleLowerCase()===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const z=(D=(T=b?.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return z==="*"||z===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===h}).map(b=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:E,table:C,commit_timestamp:T,type:D,errors:I}=S;w=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:T,eventType:D,new:{},old:{},errors:I}),this._getPayloadRecords(S))}b.callback(w,a)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,a){const c=r.toLocaleLowerCase(),u={type:c,filter:n,callback:a};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(r,n){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===a&&Br.isEqual(c.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const a in r)if(r[a]!==n[a])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Lt.close,{},r)}_onError(r){this._on(Lt.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=hh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=hh(r.columns,r.old_record)),n}}const dl=()=>{},Hi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oy=[1e3,2e3,5e3,1e4],ly=1e4,cy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $f{constructor(r,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jl,this.transport=null,this.heartbeatIntervalMs=Hi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dl,this.ref=0,this.reconnectTimer=null,this.vsn=dh,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new Z0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((a=n?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${_l.websocket}`,this.httpEndpoint=Df(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Rf.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,a){this.logger(r,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case zr.connecting:return Fr.Connecting;case zr.open:return Fr.Open;case zr.closing:return Fr.Closing;default:return Fr.Closed}}isConnected(){return this.connectionState()===Fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const a=`realtime:${r}`,c=this.getChannels().find(u=>u.topic===a);if(c)return c;{const u=new Br(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:a,payload:c,ref:u}=r,h=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${n} ${a} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Y0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Hi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:c,payload:u,ref:h}=n,p=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${a} ${c} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(a)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===zr.open||this.conn.readyState===zr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Lt.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const a=r.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${r}${a}${c}`}_workerObjectUrl(r){let n;if(r)n=r;else{const a=new Blob([cy],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,a=!1;if(r)n=r,a=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const u={access_token:n,version:J0};n&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(Lt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(n)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Af(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,a,c,u,h,p,m,g,v,_,w,b;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:jl,this.heartbeatIntervalMs=(c=r?.heartbeatIntervalMs)!==null&&c!==void 0?c:Hi.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:dl,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:dh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=r?.reconnectAfterMs)!==null&&g!==void 0?g:(S=>oy[S-1]||ly),this.vsn){case Of:this.encode=(v=r?.encode)!==null&&v!==void 0?v:((S,E)=>E(JSON.stringify(S))),this.decode=(_=r?.decode)!==null&&_!==void 0?_:((S,E)=>E(JSON.parse(S)));break;case Q0:this.encode=(w=r?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(b=r?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class la extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function De(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class uy extends la{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class El extends la{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const Vl=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),dy=()=>Response,Cl=o=>{if(Array.isArray(o))return o.map(n=>Cl(n));if(typeof o=="function"||o!==Object(o))return o;const r={};return Object.entries(o).forEach(([n,a])=>{const c=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[c]=Cl(a)}),r},hy=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},fy=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o),hl=o=>{var r;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(r=o.error)===null||r===void 0?void 0:r.message)||JSON.stringify(o)},py=(o,r,n)=>re(void 0,void 0,void 0,function*(){const a=yield dy();o instanceof a&&!n?.noResolveJson?o.json().then(c=>{const u=o.status||500,h=c?.statusCode||u+"";r(new uy(hl(c),u,h))}).catch(c=>{r(new El(hl(c),c))}):r(new El(hl(o),o))}),my=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return o==="GET"||!a?c:(hy(a)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(a)):c.body=a,r?.duplex&&(c.duplex=r.duplex),Object.assign(Object.assign({},c),n))};function Es(o,r,n,a,c,u){return re(this,void 0,void 0,function*(){return new Promise((h,p)=>{o(n,my(r,a,c,u)).then(m=>{if(!m.ok)throw m;return a?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>py(m,p,a))})})}function js(o,r,n,a){return re(this,void 0,void 0,function*(){return Es(o,"GET",r,n,a)})}function $t(o,r,n,a,c){return re(this,void 0,void 0,function*(){return Es(o,"POST",r,a,c,n)})}function Tl(o,r,n,a,c){return re(this,void 0,void 0,function*(){return Es(o,"PUT",r,a,c,n)})}function gy(o,r,n,a){return re(this,void 0,void 0,function*(){return Es(o,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function Hl(o,r,n,a,c){return re(this,void 0,void 0,function*(){return Es(o,"DELETE",r,a,c,n)})}class yy{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}var Lf;class vy{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Lf]="BlobDownloadBuilder",this.promise=null}asStream(){return new yy(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}})}}Lf=Symbol.toStringTag;const xy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wy{constructor(r,n={},a,c){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=Vl(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,a,c){return re(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},fh),c);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),c?.headers&&(p=Object.assign(Object.assign({},p),c.headers));const g=this._removeEmptyFolders(n),v=this._getFinalPath(g),_=yield(r=="PUT"?Tl:$t)(this.fetch,`${this.url}/object/${v}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:_.Id,fullPath:_.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(De(u))return{data:null,error:u};throw u}})}upload(r,n,a){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,a)})}uploadToSignedUrl(r,n,a,c){return re(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",n);try{let m;const g=Object.assign({upsert:fh.upsert},c),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",g.cacheControl)):(m=a,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType);const _=yield Tl(this.fetch,p.toString(),m,{headers:v});return{data:{path:u,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(De(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,n){return re(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r);const c=Object.assign({},this.headers);n?.upsert&&(c["x-upsert"]="true");const u=yield $t(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:c}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new la("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}update(r,n,a){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,a)})}move(r,n,a){return re(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}copy(r,n,a){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}createSignedUrl(r,n,a){return re(this,void 0,void 0,function*(){try{let c=this._getFinalPath(r),u=yield $t(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}createSignedUrls(r,n,a){return re(this,void 0,void 0,function*(){try{const c=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}download(r,n){const c=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),h=u?`?${u}`:"",p=this._getFinalPath(r),m=()=>js(this.fetch,`${this.url}/${c}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new vy(m,this.shouldThrowOnError)}info(r){return re(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const a=yield js(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cl(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}exists(r){return re(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield gy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a)&&a instanceof El){const c=a.originalError;if([400,404].includes(c?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(r,n){const a=this._getFinalPath(r),c=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&c.push(u);const p=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&c.push(m);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${g}`)}}}remove(r){return re(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}list(r,n,a){return re(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},xy),n),{prefix:r||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}listV2(r,n){return re(this,void 0,void 0,function*(){try{const a=Object.assign({},r);return{data:yield $t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const Mf="2.87.3",Uf={"X-Client-Info":`storage-js/${Mf}`};class by{constructor(r,n={},a,c){this.shouldThrowOnError=!1;const u=new URL(r);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uf),n),this.fetch=Vl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return re(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield js(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}getBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}createBucket(r){return re(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(De(c))return{data:null,error:c};throw c}})}updateBucket(r,n){return re(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}})}emptyBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}deleteBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var _s=class extends Error{constructor(o,r){super(o),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jy(o,r,n){const a=new URL(r,o);if(n)for(const[c,u]of Object.entries(n))u!==void 0&&a.searchParams.set(c,u);return a.toString()}async function _y(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function Ny(o){const r=o.fetchImpl??globalThis.fetch;return{async request({method:n,path:a,query:c,body:u,headers:h}){const p=jy(o.baseUrl,a,c),m=await _y(o.auth),g=await r(p,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...m,...h},body:u?JSON.stringify(u):void 0}),v=await g.text(),_=(g.headers.get("content-type")||"").includes("application/json"),w=_&&v?JSON.parse(v):v;if(!g.ok){const b=_?w:void 0,S=b?.error;throw new _s(S?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:g.status,headers:g.headers,data:w}}}}function Wi(o){return o.join("")}var Sy=class{constructor(o,r=""){this.client=o,this.prefix=r}async listNamespaces(o){const r=o?{parent:Wi(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(o,r){const n={namespace:o.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wi(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wi(o.namespace)}`}),!0}catch(r){if(r instanceof _s&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(o,r){try{return await this.createNamespace(o,r)}catch(n){if(n instanceof _s&&n.status===409)return;throw n}}};function vn(o){return o.join("")}var ky=class{constructor(o,r="",n){this.client=o,this.prefix=r,this.accessDelegation=n}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables`})).data.identifiers}async createTable(o,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(o,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(o,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(o){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,headers:r})).data.metadata}async tableExists(o){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vn(o.namespace)}/tables/${o.name}`,headers:r}),!0}catch(n){if(n instanceof _s&&n.status===404)return!1;throw n}}async createTableIfNotExists(o,r){try{return await this.createTable(o,r)}catch(n){if(n instanceof _s&&n.status===409)return await this.loadTable({namespace:o.namespace,name:r.name});throw n}}},Ey=class{constructor(o){let r="v1";o.catalogName&&(r+=`/${o.catalogName}`);const n=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=Ny({baseUrl:n,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=o.accessDelegation?.join(","),this.namespaceOps=new Sy(this.client,r),this.tableOps=new ky(this.client,r,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,r){return this.namespaceOps.createNamespace(o,r)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,r){return this.tableOps.createTable(o,r)}async updateTable(o,r){return this.tableOps.updateTable(o,r)}async dropTable(o,r){await this.tableOps.dropTable(o,r)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,r){return this.namespaceOps.createNamespaceIfNotExists(o,r)}async createTableIfNotExists(o,r){return this.tableOps.createTableIfNotExists(o,r)}};class Cy{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uf),n),this.fetch=Vl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}listBuckets(r){return re(this,void 0,void 0,function*(){try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const a=n.toString(),c=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield js(this.fetch,c,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}deleteBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}})}from(r){if(!fy(r))throw new la("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ey({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>re(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(n,{get(u,h){const p=u[h];return typeof p!="function"?p:(...m)=>re(this,void 0,void 0,function*(){try{return{data:yield p.apply(u,m),error:null}}catch(g){if(a)throw g;return{data:null,error:g}}})}})}}const Wl={"X-Client-Info":`storage-js/${Mf}`,"Content-Type":"application/json"};class zf extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xt(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class fl extends zf{constructor(r,n,a){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ty extends zf{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var ph;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ph||(ph={}));const Kl=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Py=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},mh=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Ry=(o,r,n)=>re(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!n?.noResolveJson){const c=o.status||500,u=o;if(typeof u.json=="function")u.json().then(h=>{const p=h?.statusCode||h?.code||c+"";r(new fl(mh(h),c,p))}).catch(()=>{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new fl(p,c,h))});else{const h=c+"",p=u.statusText||`HTTP ${c} error`;r(new fl(p,c,h))}}else r(new Ty(mh(o),o))}),Oy=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return a?(Py(a)?(c.headers=Object.assign({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(a)):c.body=a,Object.assign(Object.assign({},c),n)):c};function Ay(o,r,n,a,c,u){return re(this,void 0,void 0,function*(){return new Promise((h,p)=>{o(n,Oy(r,a,c,u)).then(m=>{if(!m.ok)throw m;if(a?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>Ry(m,p,a))})})}function wt(o,r,n,a,c){return re(this,void 0,void 0,function*(){return Ay(o,"POST",r,a,c,n)})}class Iy{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wl),n),this.fetch=Kl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return re(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getIndex(r,n){return re(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}listIndexes(r){return re(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return re(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}}class Dy{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wl),n),this.fetch=Kl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return re(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getVectors(r){return re(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}listVectors(r){return re(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield wt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}queryVectors(r){return re(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteVectors(r){return re(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}}class $y{constructor(r,n={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wl),n),this.fetch=Kl(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return re(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}getBucket(r){return re(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}listBuckets(){return re(this,arguments,void 0,function*(r={}){try{return{data:yield wt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return re(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}}class Ly extends $y{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new My(this.url,this.headers,r,this.fetch)}createBucket(r){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return re(this,void 0,void 0,function*(){return n.createBucket.call(this,r)})}getBucket(r){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return re(this,void 0,void 0,function*(){return n.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return re(this,arguments,void 0,function*(n={}){return r.listBuckets.call(this,n)})}deleteBucket(r){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return re(this,void 0,void 0,function*(){return n.deleteBucket.call(this,r)})}}class My extends Iy{constructor(r,n,a,c){super(r,n,c),this.vectorBucketName=a}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new Uy(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class Uy extends Dy{constructor(r,n,a,c,u){super(r,n,u),this.vectorBucketName=a,this.indexName=c}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zy extends by{constructor(r,n={},a,c){super(r,n,a,c)}from(r){return new wy(this.url,this.headers,r,this.fetch)}get vectors(){return new Ly(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Cy(this.url+"/iceberg",this.headers,this.fetch)}}const Fy="2.87.3";let vs="";typeof Deno<"u"?vs="deno":typeof document<"u"?vs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vs="react-native":vs="node";const By={"X-Client-Info":`supabase-js-${vs}/${Fy}`},qy={headers:By},Vy={schema:"public"},Hy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wy={},Ky=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Gy=()=>Headers,Jy=(o,r,n)=>{const a=Ky(n),c=Gy();return async(u,h)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:o;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",o),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),a(u,Object.assign(Object.assign({},h),{headers:g}))}};function Qy(o){return o.endsWith("/")?o:o+"/"}function Yy(o,r){var n,a;const{db:c,auth:u,realtime:h,global:p}=o,{db:m,auth:g,realtime:v,global:_}=r,w={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},_),p),{headers:Object.assign(Object.assign({},(n=_?.headers)!==null&&n!==void 0?n:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return o.accessToken?w.accessToken=o.accessToken:delete w.accessToken,w}function Xy(o){const r=o?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ff="2.87.3",jn=30*1e3,Pl=3,pl=Pl*jn,Zy="http://localhost:9999",ev="supabase.auth.token",tv={"X-Client-Info":`gotrue-js/${Ff}`},Rl="X-Supabase-Api-Version",Bf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nv=600*1e3;class Cn extends Error{constructor(r,n,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function oe(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class qf extends Cn{constructor(r,n,a){super(r,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function Vf(o){return oe(o)&&o.name==="AuthApiError"}class xr extends Cn{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class Ht extends Cn{constructor(r,n,a,c){super(r,a,c),this.name=n,this.status=a}}class pt extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hf(o){return oe(o)&&o.name==="AuthSessionMissingError"}class Lr extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xs extends Ht{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class ws extends Ht{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wf(o){return oe(o)&&o.name==="AuthImplicitGrantRedirectError"}class Ol extends Ht{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kf extends Ht{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function sv(o){return oe(o)&&o.name==="AuthPKCECodeVerifierMissingError"}class ta extends Ht{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Ji(o){return oe(o)&&o.name==="AuthRetryableFetchError"}class Al extends Ht{constructor(r,n,a){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}function iv(o){return oe(o)&&o.name==="AuthWeakPasswordError"}class ra extends Ht{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gh=` 	
\r=`.split(""),av=(()=>{const o=new Array(128);for(let r=0;r<o.length;r+=1)o[r]=-1;for(let r=0;r<gh.length;r+=1)o[gh[r].charCodeAt(0)]=-2;for(let r=0;r<na.length;r+=1)o[na[r].charCodeAt(0)]=r;return o})();function yh(o,r,n){if(o!==null)for(r.queue=r.queue<<8|o,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(na[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(na[a]),r.queuedBits-=6}}function Gf(o,r,n){const a=av[o];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function vh(o){const r=[],n=h=>{r.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{cv(h,a,n)};for(let h=0;h<o.length;h+=1)Gf(o.charCodeAt(h),c,u);return r.join("")}function ov(o,r){if(o<=127){r(o);return}else if(o<=2047){r(192|o>>6),r(128|o&63);return}else if(o<=65535){r(224|o>>12),r(128|o>>6&63),r(128|o&63);return}else if(o<=1114111){r(240|o>>18),r(128|o>>12&63),r(128|o>>6&63),r(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function lv(o,r){for(let n=0;n<o.length;n+=1){let a=o.charCodeAt(n);if(a>55295&&a<=56319){const c=(a-55296)*1024&65535;a=(o.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}ov(a,r)}}function cv(o,r,n){if(r.utf8seq===0){if(o<=127){n(o);return}for(let a=1;a<6;a+=1)if((o>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=o&31;else if(r.utf8seq===3)r.codepoint=o&15;else if(r.utf8seq===4)r.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|o&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function kn(o){const r=[],n={queue:0,queuedBits:0},a=c=>{r.push(c)};for(let c=0;c<o.length;c+=1)Gf(o.charCodeAt(c),n,a);return new Uint8Array(r)}function uv(o){const r=[];return lv(o,n=>r.push(n)),new Uint8Array(r)}function qr(o){const r=[],n={queue:0,queuedBits:0},a=c=>{r.push(c)};return o.forEach(c=>yh(c,n,a)),yh(null,n,a),r.join("")}function dv(o){return Math.round(Date.now()/1e3)+o}function hv(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",Dr={tested:!1,writable:!1},Jf=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dr.tested)return Dr.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Dr.tested=!0,Dr.writable=!0}catch{Dr.tested=!0,Dr.writable=!1}return Dr.writable};function fv(o){const r={},n=new URL(o);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,u)=>{r[u]=c})}catch{}return n.searchParams.forEach((a,c)=>{r[c]=a}),r}const Qf=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),pv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",_n=async(o,r,n)=>{await o.setItem(r,JSON.stringify(n))},$r=async(o,r)=>{const n=await o.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ye=async(o,r)=>{await o.removeItem(r)};class ca{constructor(){this.promise=new ca.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}ca.promiseConstructor=Promise;function ml(o){const r=o.split(".");if(r.length!==3)throw new ra("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!rv.test(r[a]))throw new ra("JWT not in base64url format");return{header:JSON.parse(vh(r[0])),payload:JSON.parse(vh(r[1])),signature:kn(r[2]),raw:{header:r[0],payload:r[1]}}}async function mv(o){return await new Promise(r=>{setTimeout(()=>r(null),o)})}function gv(o,r){return new Promise((a,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await o(u);if(!r(u,null,h)){a(h);return}}catch(h){if(!r(u,h)){c(h);return}}})()})}function yv(o){return("0"+o.toString(16)).substr(-2)}function vv(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let c="";for(let u=0;u<56;u++)c+=n.charAt(Math.floor(Math.random()*a));return c}return crypto.getRandomValues(r),Array.from(r,yv).join("")}async function xv(o){const n=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(a);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function wv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const n=await xv(o);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(o,r,n=!1){const a=vv();let c=a;n&&(c+="/PASSWORD_RECOVERY"),await _n(o,`${r}-code-verifier`,c);const u=await wv(a);return[u,a===u?"plain":"s256"]}const bv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jv(o){const r=o.headers.get(Rl);if(!r||!r.match(bv))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function _v(o){if(!o)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(o<=r)throw new Error("JWT has expired")}function Nv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(o){if(!Sv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gl(){const o={};return new Proxy(o,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kv(o,r){return new Proxy(o,{get:(n,a,c)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const u=a.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,c)}return!r.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,a,c)}})}function xh(o){return JSON.parse(JSON.stringify(o))}const Mr=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Ev=[502,503,504];async function wh(o){var r;if(!pv(o))throw new ta(Mr(o),0);if(Ev.includes(o.status))throw new ta(Mr(o),o.status);let n;try{n=await o.json()}catch(u){throw new xr(Mr(u),u)}let a;const c=jv(o);if(c&&c.getTime()>=Bf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Al(Mr(n),o.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new pt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Al(Mr(n),o.status,n.weak_password.reasons);throw new qf(Mr(n),o.status||500,a)}const Cv=(o,r,n,a)=>{const c={method:o,headers:r?.headers||{}};return o==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),c.body=JSON.stringify(a),Object.assign(Object.assign({},c),n))};async function he(o,r,n,a){var c;const u=Object.assign({},a?.headers);u[Rl]||(u[Rl]=Bf["2024-01-01"].name),a?.jwt&&(u.Authorization=`Bearer ${a.jwt}`);const h=(c=a?.query)!==null&&c!==void 0?c:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await Tv(o,r,n+p,{headers:u,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function Tv(o,r,n,a,c,u){const h=Cv(r,a,c,u);let p;try{p=await o(n,Object.assign({},h))}catch(m){throw console.error(m),new ta(Mr(m),0)}if(p.ok||await wh(p),a?.noResolveJson)return p;try{return await p.json()}catch(m){await wh(m)}}function Dt(o){var r;let n=null;Ov(o)&&(n=Object.assign({},o),o.expires_at||(n.expires_at=dv(o.expires_in)));const a=(r=o.user)!==null&&r!==void 0?r:o;return{data:{session:n,user:a},error:null}}function bh(o){const r=Dt(o);return!r.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(r.data.weak_password=o.weak_password),r}function wr(o){var r;return{data:{user:(r=o.user)!==null&&r!==void 0?r:o},error:null}}function Pv(o){return{data:o,error:null}}function Rv(o){const{action_link:r,email_otp:n,hashed_token:a,redirect_to:c,verification_type:u}=o,h=Pn(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:n,hashed_token:a,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function jh(o){return o}function Ov(o){return o.access_token&&o.refresh_token&&o.expires_in}const Qi=["global","local","others"];class Gl{constructor({url:r="",headers:n={},fetch:a}){this.url=r,this.headers=n,this.fetch=Qf(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=Qi[0]){if(Qi.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qi.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,n={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wr})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:n}=r,a=Pn(r,["options"]),c=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(c.new_email=a?.newEmail,delete c.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Rv,redirectTo:n?.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:wr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,a,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:jh});if(v.error)throw v.error;const _=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);g[`${C}Page`]=E}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(oe(g))return{data:{users:[]},error:g};throw g}}async getUserById(r){wn(r);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:wr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){wn(r);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:wr})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,n=!1){wn(r);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:wr})}catch(a){if(oe(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){wn(r.userId);try{const{data:n,error:a}=await he(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:a}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(r){wn(r.userId),wn(r.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,a,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:jh});if(v.error)throw v.error;const _=await v.json(),w=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);g[`${C}Page`]=E}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(oe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(r){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(oe(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(r){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function _h(o={}){return{getItem:r=>o[r]||null,setItem:(r,n)=>{o[r]=n},removeItem:r=>{delete o[r]}}}const Ur={debug:!!(globalThis&&Jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jl extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Yf extends Jl{}class Av extends Jl{}async function Xf(o,r,n){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async c=>{if(c){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,c.name);try{return await n()}finally{Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,c.name)}}else{if(r===0)throw Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Yf(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Ur.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Nh={};async function Iv(o,r,n){var a;const c=(a=Nh[o])!==null&&a!==void 0?a:Promise.resolve(),u=Promise.race([c.catch(()=>null),r>=0?new Promise((h,p)=>{setTimeout(()=>{p(new Av(`Acquiring process lock with name "${o}" timed out`))},r)}):null].filter(h=>h)).catch(h=>{if(h&&h.isAcquireTimeout)throw h;return null}).then(async()=>await n());return Nh[o]=u.catch(async h=>{if(h&&h.isAcquireTimeout)return await c,null;throw h}),await u}function Dv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Zf(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function $v(o){return parseInt(o,16)}function Lv(o){const r=new TextEncoder().encode(o);return"0x"+Array.from(r,a=>a.toString(16).padStart(2,"0")).join("")}function Mv(o){var r;const{chainId:n,domain:a,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:v,uri:_,version:w}=o;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((r=o.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const b=Zf(o.address),S=v?`${v}://${a}`:a,E=o.statement?`${o.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${b}

${E}`;let T=`URI: ${_}
Version: ${w}
Chain ID: ${n}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(T+=`
Expiration Time: ${c.toISOString()}`),p&&(T+=`
Not Before: ${p.toISOString()}`),m&&(T+=`
Request ID: ${m}`),g){let D=`
Resources:`;for(const I of g){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);D+=`
- ${I}`}T+=D}return`${C}
${T}`}class Fe extends Error{constructor({message:r,code:n,cause:a,name:c}){var u;super(r,{cause:a}),this.__isWebAuthnError=!0,this.name=(u=c??(a instanceof Error?a.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class sa extends Fe{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function Uv({error:o,options:r}){var n,a,c;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(r.mediation==="conditional"&&((a=u.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new Fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new Fe({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new Fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const h=window.location.hostname;if(ep(h)){if(u.rp.id!==h)return new Fe({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function zv({error:o,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new Fe({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const a=window.location.hostname;if(ep(a)){if(n.rpId!==a)return new Fe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new Fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new Fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new Fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Fv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Bv=new Fv;function qv(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:r,user:n,excludeCredentials:a}=o,c=Pn(o,["challenge","user","excludeCredentials"]),u=kn(r).buffer,h=Object.assign(Object.assign({},n),{id:kn(n.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:h});if(a&&a.length>0){p.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const g=a[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:kn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function Vv(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:r,allowCredentials:n}=o,a=Pn(o,["challenge","allowCredentials"]),c=kn(r).buffer,u=Object.assign(Object.assign({},a),{challenge:c});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const p=n[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:kn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function Hv(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const n=o;return{id:o.id,rawId:o.id,response:{attestationObject:qr(new Uint8Array(o.response.attestationObject)),clientDataJSON:qr(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Wv(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const n=o,a=o.getClientExtensionResults(),c=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:qr(new Uint8Array(c.authenticatorData)),clientDataJSON:qr(new Uint8Array(c.clientDataJSON)),signature:qr(new Uint8Array(c.signature)),userHandle:c.userHandle?qr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function ep(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Sh(){var o,r;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Kv(o){try{const r=await navigator.credentials.create(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",r)}:{data:null,error:new sa("Empty credential response",r)}}catch(r){return{data:null,error:Uv({error:r,options:o})}}}async function Gv(o){try{const r=await navigator.credentials.get(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",r)}:{data:null,error:new sa("Empty credential response",r)}}catch(r){return{data:null,error:zv({error:r,options:o})}}}const Jv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Qv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ia(...o){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),a={};for(const c of o)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))a[u]=h;else if(n(h))a[u]=h;else if(r(h)){const p=a[u];r(p)?a[u]=ia(p,h):a[u]=ia(h)}else a[u]=h}return a}function Yv(o,r){return ia(Jv,o,r||{})}function Xv(o,r){return ia(Qv,o,r||{})}class Zv{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:a,signal:c},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!h)return{data:null,error:p};const m=c??Bv.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${a}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=Yv(h.webauthn.credential_options.publicKey,u?.create),{data:v,error:_}=await Kv({publicKey:g,signal:m});return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const g=Xv(h.webauthn.credential_options.publicKey,u?.request),{data:v,error:_}=await Gv(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new xr("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:a})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new Cn("rpId is required for WebAuthn authentication")};try{if(!Sh())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:a},signal:c},{request:u});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:a,credential_response:m.credential_response}})}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new xr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new Cn("rpId is required for WebAuthn registration")};try{if(!Sh())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===r&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:c},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return oe(h)?{data:null,error:h}:{data:null,error:new xr("Unexpected error in register",h)}}}}Dv();const ex={url:Zy,storageKey:ev,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kh(o,r,n){return await n()}const bn={};class Tn{get jwks(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:r})}constructor(r){var n,a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},ex),r);if(this.storageKey=u.storageKey,this.instanceID=(n=Tn.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Xe()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Gl({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Qf(u.fetch),this.lock=u.lock||kh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Xe()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Xf:this.lock=kh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Zv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_h(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=_h(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ff}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},a="none";if(Xe()&&(n=fv(window.location.href),this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce")),Xe()&&this.detectSessionInUrl&&a!=="none"){const{data:c,error:u}=await this._getSessionFromURL(n,a);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Wf(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new xr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,a,c;try{const u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(c=r?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Dt}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,a,c;try{let u;if("email"in r){const{email:v,password:_,options:w}=r;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await xn(this.storage,this.storageKey)),u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:v,password:_,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:b,code_challenge_method:S},xform:Dt})}else if("phone"in r){const{phone:v,password:_,options:w}=r;u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(c=w?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Dt})}else throw new xs("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return await Ye(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:h,options:p}=r;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bh})}else if("phone"in r){const{phone:u,password:h,options:p}=r;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:bh})}else throw new xs("You must provide either an email or phone number and a password");const{data:a,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a||!a.session||!a.user){const u=new Lr;return this._returnResult({data:{user:null,session:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:c})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,a,c,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,a,c,u,h,p,m,g,v,_,w;let b,S;if("message"in r)b=r.message,S=r.signature;else{const{chain:E,wallet:C,statement:T,options:D}=r;let I;if(Xe())if(typeof C=="object")I=C;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")I=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const z=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href),L=await I.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=Zf(L[0]);let M=(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!M){const W=await I.request({method:"eth_chainId"});M=$v(W)}const X={domain:z.host,address:B,statement:T,uri:z.href,version:"1",chainId:M,nonce:(c=D?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=D?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=D?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=D?.signInWithEthereum)===null||v===void 0?void 0:v.resources};b=Mv(X),S=await I.request({method:"personal_sign",params:[Lv(b),B]})}try{const{data:E,error:C}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Dt});if(C)throw C;if(!E||!E.session||!E.user){const T=new Lr;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(oe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(r){var n,a,c,u,h,p,m,g,v,_,w,b;let S,E;if("message"in r)S=r.message,E=r.signature;else{const{chain:C,wallet:T,statement:D,options:I}=r;let z;if(Xe())if(typeof T=="object")z=T;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))z=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=T}const L=new URL((n=I?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in z&&z.signIn){const B=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),D?{statement:D}:null));let M;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")M=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)M=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)S=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),E=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${L.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(c=(a=I?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=I?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((g=I?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((_=(v=I?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...I.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const B=await z.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=B}}try{const{data:C,error:T}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:qr(E)},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Dt});if(T)throw T;if(!C||!C.session||!C.user){const D=new Lr;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:T})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(r){const n=await $r(this.storage,`${this.storageKey}-code-verifier`),[a,c]=(n??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Kf;const{data:u,error:h}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Dt});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new Lr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:a,token:c,access_token:u,nonce:h}=r,p=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Dt}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new Lr;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,a,c,u,h;try{if("email"in r){const{email:p,options:m}=r;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await xn(this.storage,this.storageKey));const{error:_}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in r){const{phone:p,options:m}=r,{data:g,error:v}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m?.data)!==null&&c!==void 0?c:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new xs("You must provide either an email or phone number.")}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var n,a;try{let c,u;"options"in r&&(c=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:Dt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var n,a,c,u,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await xn(this.storage,this.storageKey));const g=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((c=r?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:Pv});return!((u=g.data)===null||u===void 0)&&u.url&&Xe()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)throw a;if(!n)throw new pt;const{error:c}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:a,type:c,options:u}=r,{error:h}=await he(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:a,type:c,options:u}=r,{data:h,error:p}=await he(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new xs("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<pl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const h=await $r(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=gl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=kv(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:wr}):await this._useSession(async n=>{var a,c,u;const{data:h,error:p}=n;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:wr})})}catch(n){if(oe(n))return Hf(n)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async a=>{const{data:c,error:u}=a;if(u)throw u;if(!c.session)throw new pt;const h=c.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await xn(this.storage,this.storageKey));const{data:g,error:v}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:wr});if(v)throw v;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new pt;const n=Date.now()/1e3;let a=n,c=!0,u=null;const{payload:h}=ml(r.access_token);if(h.exp&&(a=h.exp,c=a<=n),c){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var a;if(!r){const{data:h,error:p}=n;if(p)throw p;r=(a=h.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new pt;const{data:c,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!Xe())throw new ws("No browser detected.");if(r.error||r.error_description||r.error_code)throw new ws(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ol("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ws("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Ol("No code detected.");const{data:D,error:I}=await this._exchangeCodeForSession(r.code);if(I)throw I;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=r;if(!u||!p||!h||!g)throw new ws("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(p);let w=v+_;m&&(w=parseInt(m));const b=w-v;b*1e3<=jn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const S=w-_;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,v);const{data:E,error:C}=await this._getUser(u);if(C)throw C;const T={provider_token:a,provider_refresh_token:c,access_token:u,expires_in:_,expires_at:w,refresh_token:h,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:r.type},error:null})}catch(a){if(oe(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await $r(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({error:u});const h=(a=c.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(Vf(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=hv(),a={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async n=>{var a,c;try{const{data:{session:u},error:h}=n;if(h)throw h;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let a=null,c=null;this.flowType==="pkce"&&([a,c]=await xn(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:a,error:c}=await this._useSession(async u=>{var h,p,m,g,v;const{data:_,error:w}=u;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",b,{headers:this.headers,jwt:(v=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(c)throw c;return Xe()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:r.provider,url:a?.url},error:null})}catch(a){if(oe(a))return this._returnResult({data:{provider:r.provider,url:null},error:a});throw a}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var a;try{const{error:c,data:{session:u}}=n;if(c)throw c;const{options:h,provider:p,token:m,access_token:g,nonce:v}=r,_=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=u?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:p,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Dt}),{data:w,error:b}=_;return b?this._returnResult({data:{user:null,session:null},error:b}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Lr}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:b}))}catch(c){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),oe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var a,c;const{data:u,error:h}=n;if(h)throw h;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await gv(async c=>(c>0&&await mv(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Dt})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Ji(u)&&Date.now()+h-a<jn})}catch(a){if(this._debug(n,"error",a),oe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",a),Xe()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const c=await $r(this.storage,this.storageKey);if(c&&this.userStorage){let h=await $r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await _n(this.userStorage,this.storageKey+"-user",h)),c.user=(r=h?.user)!==null&&r!==void 0?r:gl()}else if(c&&!c.user&&!c.user){const h=await $r(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await Ye(this.storage,this.storageKey+"-user"),await _n(this.storage,this.storageKey,c)):c.user=gl()}if(this._debug(a,"session from storage",c),!this._isValidSession(c)){this._debug(a,"session is not valid"),c!==null&&await this._removeSession();return}const u=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pl;if(this._debug(a,`session has${u?"":" not"} expired with margin of ${pl}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Ji(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(c.access_token);!p&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(a,"error",c),console.error(c);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var n,a;if(!r)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new ca;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new pt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),oe(u)){const h={data:null,error:u};return Ji(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,n,a=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,n)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Ye(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await _n(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const u=xh(c);await _n(this.storage,this.storageKey,u)}else{const c=xh(n);await _n(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ye(this.storage,this.storageKey),await Ye(this.storage,this.storageKey+"-code-verifier"),await Ye(this.storage,this.storageKey+"-user"),this.userStorage&&await Ye(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Xe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),jn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((a.expires_at*1e3-r)/jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${jn}ms, refresh threshold is ${Pl} ticks`),c<=Pl&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Jl)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,a){const c=[`provider=${encodeURIComponent(n)}`];if(a?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&c.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[u,h]=await xn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(p.toString())}if(a?.queryParams){const u=new URLSearchParams(a.queryParams);c.push(u.toString())}return a?.skipBrowserRedirect&&c.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;return u?this._returnResult({data:null,error:u}):await he(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var a,c;const{data:u,error:h}=n;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:g}=await he(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return g?this._returnResult({data:null,error:g}):(r.factorType==="totp"&&m.type==="totp"&&(!((c=m?.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Hv(r.webauthn.credential_response):Wv(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await he(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=await he(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:qv(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Vv(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:a}=await this._challenge({factorId:r.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n?.factors)!==null&&r!==void 0?r:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ml(a.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;return c?this._returnResult({data:null,error:c}):a?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:a.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new pt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async a=>{const{data:{session:c},error:u}=a;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new pt});const h=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(r,n){try{return await this._useSession(async a=>{const{data:{session:c},error:u}=a;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new pt});const h=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new pt})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;return c?this._returnResult({data:null,error:c}):a?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let a=n.keys.find(p=>p.kid===r);if(a)return a;const c=Date.now();if(a=this.jwks.keys.find(p=>p.kid===r),a&&this.jwks_cached_at+nv>c)return a;const{data:u,error:h}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,a=u.keys.find(p=>p.kid===r),!a)?null:a}async getClaims(r,n={}){try{let a=r;if(!a){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});a=b.session.access_token}const{header:c,payload:u,signature:h,raw:{header:p,payload:m}}=ml(a);n?.allowExpired||_v(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!g){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:u,header:c,signature:h},error:null}}const v=Nv(c.alg),_=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,h,uv(`${p}.${m}`)))throw new ra("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}}Tn.nextInstanceID={};const tx=Gl,tp=Tn;class rx extends tp{constructor(r){super(r)}}class rp{constructor(r,n,a){var c,u,h;this.supabaseUrl=r,this.supabaseKey=n;const p=Xy(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:Vy,realtime:Wy,auth:Object.assign(Object.assign({},Hy),{storageKey:m}),global:qy},v=Yy(a??{},g);this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=Jy(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new W0(new URL("rest/v1",p).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new zy(this.storageUrl.href,this.headers,this.fetch,a?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new B0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:c,userStorage:u,storageKey:h,flowType:p,lock:m,debug:g,throwOnError:v},_,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rx({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),_),storageKey:h,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:c,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new $f(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nx=(o,r,n)=>new rp(o,r,n);function sx(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const r=o.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}sx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ix=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:tx,AuthApiError:qf,AuthClient:tp,AuthError:Cn,AuthImplicitGrantRedirectError:ws,AuthInvalidCredentialsError:xs,AuthInvalidJwtError:ra,AuthInvalidTokenResponseError:Lr,AuthPKCECodeVerifierMissingError:Kf,AuthPKCEGrantCodeExchangeError:Ol,AuthRetryableFetchError:ta,AuthSessionMissingError:pt,AuthUnknownError:xr,AuthWeakPasswordError:Al,CustomAuthError:Ht,get FunctionRegion(){return ea},FunctionsError:oa,FunctionsFetchError:Nf,FunctionsHttpError:bl,FunctionsRelayError:wl,GoTrueAdminApi:Gl,GoTrueClient:Tn,NavigatorLockAcquireTimeoutError:Yf,PostgrestError:K0,REALTIME_CHANNEL_STATES:ay,get REALTIME_LISTEN_TYPES(){return Sn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return kl},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Sl},get REALTIME_SUBSCRIBE_STATES(){return qt},RealtimeChannel:Br,RealtimeClient:$f,RealtimePresence:Nn,SIGN_OUT_SCOPES:Qi,SupabaseClient:rp,WebSocketFactory:Rf,createClient:nx,isAuthApiError:Vf,isAuthError:oe,isAuthImplicitGrantRedirectError:Wf,isAuthPKCECodeVerifierMissingError:sv,isAuthRetryableFetchError:Ji,isAuthSessionMissingError:Hf,isAuthWeakPasswordError:iv,lockInternals:Ur,navigatorLock:Xf,processLock:Iv},Symbol.toStringTag,{value:"Module"})),{createClient:ax}=ix,ox=void 0,lx=void 0;throw new Error("Variables Supabase manquantes : vrifiez le fichier .env");const ae=ax(ox,lx);function np(o){return{id:o.id,clientNumber:o.client_number,name:o.name,address:o.address??"",phone:o.phone??"",tier:o.tier,contacts:(o.contacts??[]).map(r=>({id:r.id,name:r.name,role:r.role??"",email:r.email??"",phone:r.phone??""}))}}async function sp(){const{data:o,error:r}=await ae.from("clients").select(`
      id,
      client_number,
      name,
      address,
      phone,
      tier,
      contacts:client_contacts(
        id,
        name,
        role,
        email,
        phone
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(np)}async function cx(o){const{data:r,error:n}=await ae.from("clients").select(`
      id,
      client_number,
      name,
      address,
      phone,
      tier,
      contacts:client_contacts(
        id,
        name,
        role,
        email,
        phone
      )
    `).eq("id",o).maybeSingle();if(n)throw n;return r?np(r):null}async function ux(o){const{data:r,error:n}=await ae.from("clients").insert({name:o.name,address:o.address??"",phone:o.phone??"",tier:o.tier}).select("id").single();if(n)throw n;const a=(o.contacts??[]).map(c=>({client_id:r.id,name:c.name,role:c.role??"",email:c.email??"",phone:c.phone??""}));if(a.length){const{error:c}=await ae.from("client_contacts").insert(a);if(c)throw c}}async function dx(o,r){const{error:n}=await ae.from("clients").update({name:r.name,address:r.address??"",phone:r.phone??"",tier:r.tier,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;const{error:a}=await ae.from("client_contacts").delete().eq("client_id",o);if(a)throw a;const c=(r.contacts??[]).map(u=>({client_id:o,name:u.name,role:u.role??"",email:u.email??"",phone:u.phone??""}));if(c.length){const{error:u}=await ae.from("client_contacts").insert(c);if(u)throw u}}async function hx(o){const{error:r}=await ae.from("clients").delete().eq("id",o);if(r)throw r}async function fx(){const{data:o,error:r}=await ae.from("prestations").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function ip(){const{data:o,error:r}=await ae.from("competences").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function ap(o){const r=(o??"").trim();if(!r)throw new Error("Le nom de prestation est vide.");const{data:n,error:a}=await ae.from("prestations").select("id").eq("name",r).maybeSingle();if(a)throw a;if(n?.id)return n.id;const{data:c,error:u}=await ae.from("prestations").insert({name:r}).select("id").single();if(!u&&c?.id)return c.id;const{data:h,error:p}=await ae.from("prestations").select("id").eq("name",r).maybeSingle();if(p)throw p;if(h?.id)return h.id;throw u||new Error("Impossible de crer / rcuprer la prestation.")}async function ua(o){const r=Array.from(new Set((o??[]).map(g=>(g??"").trim()).filter(Boolean)));if(r.length===0)return[];const{data:n,error:a}=await ae.from("competences").select("id,name").in("name",r);if(a)throw a;const c=new Set((n??[]).map(g=>g.name)),u=r.filter(g=>!c.has(g));if(u.length>0){const{error:g}=await ae.from("competences").insert(u.map(v=>({name:v})));if(g&&g.code!=="23505")throw g}const{data:h,error:p}=await ae.from("competences").select("id,name").in("name",r);if(p)throw p;const m=new Map((h??[]).map(g=>[g.name,g.id]));return r.map(g=>m.get(g)).filter(Boolean)}async function Ql(){const{data:o,error:r}=await ae.from("consultants").select(`
      id,
      name,
      email,
      phone,
      service,
      location,
      work_mon,
      work_tue,
      work_wed,
      work_thu,
      work_fri,
      work_sat,
      work_sun,
      competences:consultant_competences(
        competence:competences(name)
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,email:n.email??"",phone:n.phone??"",service:n.service,location:n.location,competences:(n.competences??[]).map(a=>a.competence?.name).filter(Boolean),workDays:{mon:!!n.work_mon,tue:!!n.work_tue,wed:!!n.work_wed,thu:!!n.work_thu,fri:!!n.work_fri,sat:!!n.work_sat,sun:!!n.work_sun}}))}async function px(o){const{data:r,error:n}=await ae.from("consultants").insert({name:o.name,email:o.email?.trim()?o.email.trim():null,phone:o.phone?.trim()?o.phone.trim():null,service:o.service,location:o.location,work_mon:o.workDays.mon,work_tue:o.workDays.tue,work_wed:o.workDays.wed,work_thu:o.workDays.thu,work_fri:o.workDays.fri,work_sat:o.workDays.sat,work_sun:o.workDays.sun}).select("id").single();if(n)throw n;const a=await ua(o.competences);if(a.length>0){const{error:c}=await ae.from("consultant_competences").insert(a.map(u=>({consultant_id:r.id,competence_id:u})));if(c)throw c}}async function mx(o,r){const{error:n}=await ae.from("consultants").update({name:r.name,email:r.email?.trim()?r.email.trim():null,phone:r.phone?.trim()?r.phone.trim():null,service:r.service,location:r.location,work_mon:r.workDays.mon,work_tue:r.workDays.tue,work_wed:r.workDays.wed,work_thu:r.workDays.thu,work_fri:r.workDays.fri,work_sat:r.workDays.sat,work_sun:r.workDays.sun,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;const{error:a}=await ae.from("consultant_competences").delete().eq("consultant_id",o);if(a)throw a;const c=await ua(r.competences);if(c.length>0){const{error:u}=await ae.from("consultant_competences").insert(c.map(h=>({consultant_id:o,competence_id:h})));if(u)throw u}}async function gx(o){const{error:r}=await ae.from("consultant_competences").delete().eq("consultant_id",o);if(r)throw r;const{error:n}=await ae.from("consultants").delete().eq("id",o);if(n)throw n}function Eh(o){return Math.round((o+Number.EPSILON)*100)/100}async function yx(){const{data:o,error:r}=await ae.from("projects").select(`
      id,
      name,
      order_date,
      sales_type,
      status,
      commercial_name,
      notes,
      client_id,
      client:clients(
        id,
        client_number,
        name,
        address
      ),
      client_contact_id,
      contact:client_contacts(
        id,
        name,
        email,
        phone
      ),
      project_manager_id,
      project_manager:consultants(
        id,
        name
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,clientId:n.client_id,clientNumber:n.client?.client_number??"",clientName:n.client?.name??"",clientAddress:n.client?.address??"",clientContactId:n.client_contact_id??null,clientContactName:n.contact?.name??null,clientContactEmail:n.contact?.email??null,clientContactPhone:n.contact?.phone??null,commercialName:n.commercial_name??"",projectManagerId:n.project_manager_id??null,projectManagerName:n.project_manager?.name??null,orderDate:n.order_date??null,salesType:n.sales_type??"",status:n.status,notes:n.notes??""}))}async function vx(o){const{error:r}=await ae.from("projects").insert({name:o.name,client_id:o.clientId,client_contact_id:o.clientContactId??null,commercial_name:o.commercialName??"",project_manager_id:o.projectManagerId??null,order_date:o.orderDate??null,sales_type:o.salesType??"",status:o.status,notes:o.notes??""});if(r)throw r}async function xx(o,r){const{error:n}=await ae.from("projects").update({name:r.name,client_id:r.clientId,client_contact_id:r.clientContactId??null,commercial_name:r.commercialName??"",project_manager_id:r.projectManagerId??null,order_date:r.orderDate??null,sales_type:r.salesType??"",status:r.status,notes:r.notes??"",updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n}async function wx(o){const{error:r}=await ae.from("projects").delete().eq("id",o);if(r)throw r}async function bx(o){const{data:r,error:n}=await ae.from("project_lines").select(`
      id,
      project_id,
      article_id,
      sold_quantity,
      amount,
      consultant_id,
      planned_start_date,
      planned_end_date,
      planned_quantity,
      realized_quantity,
      booking_id,
      article:articles(
        id,
        name,
        service,
        competences:article_competences(
          competence:competences(name)
        )
      ),
      consultant:consultants(
        id,
        name
      )
    `).eq("project_id",o).order("created_at",{ascending:!0});if(n)throw n;return(r??[]).map(a=>({id:a.id,projectId:a.project_id,articleId:a.article_id,articleName:a.article?.name??"",articleService:a.article?.service??"",articleCompetencesRequired:(a.article?.competences??[]).map(c=>c.competence?.name).filter(Boolean),soldQuantity:Number(a.sold_quantity??0),amount:Number(a.amount??0),consultantId:a.consultant_id??null,consultantName:a.consultant?.name??null,plannedStartDate:a.planned_start_date??null,plannedEndDate:a.planned_end_date??null,plannedQuantity:Number(a.planned_quantity??0),realizedQuantity:Number(a.realized_quantity??0),bookingId:a.booking_id??null}))}async function jx(o,r){const{data:n,error:a}=await ae.from("project_lines").insert({project_id:o,article_id:r.articleId,sold_quantity:r.soldQuantity,amount:r.amount,consultant_id:r.consultantId??null,planned_start_date:r.plannedStartDate??null,planned_end_date:r.plannedEndDate??null,planned_quantity:r.plannedQuantity??0,realized_quantity:r.realizedQuantity??0}).select("id").single();if(a)throw a;await Yl(n.id)}async function _x(o,r){const{error:n}=await ae.from("project_lines").update({article_id:r.articleId,sold_quantity:r.soldQuantity,amount:r.amount,consultant_id:r.consultantId??null,planned_start_date:r.plannedStartDate??null,planned_end_date:r.plannedEndDate??null,planned_quantity:r.plannedQuantity??0,realized_quantity:r.realizedQuantity??0,updated_at:new Date().toISOString()}).eq("id",o);if(n)throw n;await Yl(o)}async function Nx(o){const{data:r,error:n}=await ae.from("project_lines").select("booking_id").eq("id",o).maybeSingle();if(n)throw n;const a=r?.booking_id;if(a){const{error:u}=await ae.from("consultant_bookings").delete().eq("id",a);if(u)throw u}const{error:c}=await ae.from("project_lines").delete().eq("id",o);if(c)throw c}async function Sx(o){const{data:r,error:n}=await ae.from("project_lines").select("id, project_id, article_id, sold_quantity, amount, consultant_id, planned_start_date, planned_end_date, planned_quantity, realized_quantity").eq("id",o).single();if(n)throw n;const a=Number(r.sold_quantity??0),c=Number(r.planned_quantity??0),u=Number(r.amount??0);if(!(a>0))throw new Error("La quantit vendue est invalide.");if(!(c>0&&c<a))throw new Error("Pour reporter un reliquat, la quantit planifie doit tre strictement entre 0 et la quantit vendue.");const h=a-c,p=Eh(u*c/a),m=Eh(u-p),{error:g}=await ae.from("project_lines").update({sold_quantity:c,amount:p,updated_at:new Date().toISOString()}).eq("id",o);if(g)throw g;const{error:v}=await ae.from("project_lines").insert({project_id:r.project_id,article_id:r.article_id,sold_quantity:h,amount:m,consultant_id:null,planned_start_date:null,planned_end_date:null,planned_quantity:0,realized_quantity:0});if(v)throw v;await Yl(o)}async function Yl(o){const{data:r,error:n}=await ae.from("project_lines").select(`
      id,
      booking_id,
      consultant_id,
      planned_start_date,
      planned_end_date,
      planned_quantity,
      article:articles(name),
      project:projects(
        name,
        client:clients(client_number, name)
      )
    `).eq("id",o).single();if(n)throw n;const a=r.consultant_id,c=r.planned_start_date,u=r.planned_end_date,h=Number(r.planned_quantity??0),p=r.booking_id??null;if(!(!!a&&!!c&&!!u&&h>0)){if(p){const{error:D}=await ae.from("consultant_bookings").delete().eq("id",p);if(D)throw D;const{error:I}=await ae.from("project_lines").update({booking_id:null}).eq("id",o);if(I)throw I}return}const g=r.project?.client?.client_number??"",v=r.project?.client?.name??"",_=r.project?.name??"Projet",w=r.article?.name??"Prestation",b=`${g}  ${v}  ${_}  ${w}`.trim(),S=`Ligne projet: ${o}
Qt planifie: ${h}`;if(p){const{error:D}=await ae.from("consultant_bookings").update({consultant_id:a,kind:"booking",title:b,notes:S,start_date:c,end_date:u}).eq("id",p);if(D)throw D;return}const{data:E,error:C}=await ae.from("consultant_bookings").insert({consultant_id:a,kind:"booking",title:b,notes:S,start_date:c,end_date:u}).select("id").single();if(C)throw C;const{error:T}=await ae.from("project_lines").update({booking_id:E.id}).eq("id",o);if(T)throw T}function He({message:o,type:r,onClose:n}){j.useEffect(()=>{const u=setTimeout(()=>{n()},5e3);return()=>clearTimeout(u)},[n]);const a={success:s.jsx(Ns,{className:"w-5 h-5 text-green-600"}),error:s.jsx(Wh,{className:"w-5 h-5 text-red-600"}),info:s.jsx(Hh,{className:"w-5 h-5 text-blue-600"})},c={success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"};return s.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-up",children:s.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg ${c[r]} min-w-[300px]`,children:[a[r],s.jsx("span",{className:"flex-1 text-gray-900",children:o}),s.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded transition-colors",children:s.jsx(Hr,{className:"w-4 h-4 text-gray-600"})})]})})}const kx=[{value:"devis_en_cours",label:"Devis en cours"},{value:"commande_receptionnee",label:"Commande rceptionne"},{value:"attente_affectation_dp",label:"En attente d'affectation de DP"},{value:"en_cours_deploiement",label:"En cours de dploiement"},{value:"facture",label:"Factur"},{value:"paye",label:"Pay"},{value:"termine",label:"Termin"}],Ex=["Packag","Sur-mesure","Rgie","Forfait","Abonnement"];function Il({isOpen:o,onClose:r,project:n,onSaved:a}){const[c,u]=j.useState(!1),[h,p]=j.useState(null),[m,g]=j.useState([]),[v,_]=j.useState([]),[w,b]=j.useState(n?.name??""),[S,E]=j.useState(n?.clientId??""),[C,T]=j.useState(n?.clientContactId??""),[D,I]=j.useState(n?.commercialName??""),[z,L]=j.useState(n?.projectManagerId??""),[B,M]=j.useState(n?.orderDate??""),[X,W]=j.useState(n?.salesType??""),[be,ee]=j.useState(n?.status??"devis_en_cours"),[G,Y]=j.useState(n?.notes??""),[pe,Ee]=j.useState(!1),[le,J]=j.useState(!1),[U,ne]=j.useState("");j.useEffect(()=>{o&&(b(n?.name??""),E(n?.clientId??""),T(n?.clientContactId??""),I(n?.commercialName??""),L(n?.projectManagerId??""),M(n?.orderDate??""),W(n?.salesType??""),ee(n?.status??"devis_en_cours"),Y(n?.notes??""))},[o,n]),j.useEffect(()=>{if(!o)return;let $=!1;return(async()=>{u(!0),p(null);try{const[me,ve]=await Promise.all([sp(),Ql()]);if($)return;g(me),_(ve)}catch(me){if($)return;p(me?.message??"Erreur lors du chargement des donnes.")}finally{$||u(!1)}})(),()=>{$=!0}},[o]);const Q=j.useMemo(()=>m.find($=>$.id===S)??null,[m,S]),P=j.useMemo(()=>Q?.contacts??[],[Q]);j.useEffect(()=>{if(o){if(!S){T("");return}C&&!P.some($=>$.id===C)&&T("")}},[o,S,C,P]);const F=j.useMemo(()=>!(!w.trim()||!S||!X.trim()||!D.trim()),[w,S,X,D]),ye=async $=>{if($.preventDefault(),!F)return;const me={name:w.trim(),clientId:S,clientContactId:C||null,commercialName:D.trim(),projectManagerId:z||null,orderDate:B||null,salesType:X.trim(),status:be,notes:G??""};Ee(!0);try{n?(await xx(n.id,me),ne("Projet mis  jour")):(await vx(me),ne("Projet cr")),J(!0),await a?.(),setTimeout(()=>r(),650)}catch(ve){p(ve?.message??"Erreur lors de l'enregistrement.")}finally{Ee(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs(Ve,{isOpen:o,onClose:r,title:n?"Modifier le projet":"Crer un projet",size:"lg",children:[h&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-700 border border-red-200",children:h}),c?s.jsx("div",{className:"text-gray-600",children:"Chargement"}):s.jsxs("form",{onSubmit:ye,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom du projet *"}),s.jsx("input",{type:"text",value:w,onChange:$=>b($.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Dploiement SIRH  Phase 1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Client (N client) *"}),s.jsxs("select",{value:S,onChange:$=>E($.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner"}),m.map($=>s.jsxs("option",{value:$.id,children:[$.clientNumber,"  ",$.name]},$.id))]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Q?.address?`Adresse : ${Q.address}`:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Interlocuteur client"}),s.jsxs("select",{value:C,onChange:$=>T($.target.value),disabled:!S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-500",children:[s.jsx("option",{value:"",children:""}),P.map($=>s.jsxs("option",{value:$.id,children:[$.name,$.email?` (${$.email})`:""]},$.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Commercial *"}),s.jsx("input",{type:"text",value:D,onChange:$=>I($.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom du commercial"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Directeur de projet"}),s.jsxs("select",{value:z,onChange:$=>L($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Non affect"}),v.map($=>s.jsxs("option",{value:$.id,children:[$.name,"  ",$.service]},$.id))]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"(Affectation DP :  renseigner aprs la commande si besoin.)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date de commande"}),s.jsx("input",{type:"date",value:B,onChange:$=>M($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de vente *"}),s.jsx("input",{list:"sales-types",value:X,onChange:$=>W($.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Packag"}),s.jsx("datalist",{id:"sales-types",children:Ex.map($=>s.jsx("option",{value:$},$))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"tat *"}),s.jsx("select",{value:be,onChange:$=>ee($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:kx.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:G,onChange:$=>Y($.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Informations utiles, contexte, contraintes"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",disabled:pe,children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!F||pe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:pe?"Enregistrement":n?"Mettre  jour":"Crer"})]})]})]}),le&&s.jsx(He,{message:U,type:"success",onClose:()=>J(!1)})]})}function Cx({currentPage:o}){const[r,n]=j.useState(!1),[a,c]=j.useState(!1),u=()=>{c(!0)},h={portfolio:"Tableau de bord  Direction de projet",projects:"Projets",planning:"Planning des interventions",resources:"Gestion des ressources",clients:"Clients",competences:"Gestion des comptences",articles:"Catalogue des articles",reporting:"Reporting et analyses",administration:"Administration et paramtrage"};return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-gray-900",children:h[o]})}),o==="portfolio"&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("span",{className:"text-gray-700",children:"Client ABC - Implmentation SIRH"}),s.jsx(Ig,{className:"w-4 h-4 text-gray-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-full text-sm hover:bg-blue-100 transition-colors",children:"Packag"}),s.jsx("button",{className:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-full text-sm hover:bg-gray-200 transition-colors",children:"Sur-mesure"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Cette semaine"}),s.jsx("button",{className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:"30 jours"}),s.jsx("button",{className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:"90 jours"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un projet"})]}),s.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(kg,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]}),s.jsx(Il,{isOpen:r,onClose:()=>n(!1),onSaved:u}),a&&s.jsx(He,{message:"Projet cr avec succs",type:"success",onClose:()=>c(!1)})]})}function Ki(o){const r=Number(String(o).replace(",","."));return Number.isFinite(r)?r:0}function Tx(o,r){const n=(o??[]).filter(Boolean);if(n.length===0)return 100;const a=new Set((r?.competences??[]).filter(Boolean)),c=n.filter(u=>a.has(u)).length;return Math.round(c/n.length*100)}function Ch({isOpen:o,onClose:r,onSave:n,articles:a,consultants:c,line:u}){const[h,p]=j.useState(u?.articleId??""),[m,g]=j.useState(String(u?.soldQuantity??1)),[v,_]=j.useState(String(u?.amount??0)),[w,b]=j.useState(u?.consultantId??""),[S,E]=j.useState(u?.plannedStartDate??""),[C,T]=j.useState(u?.plannedEndDate??""),[D,I]=j.useState(String(u?.plannedQuantity??0)),[z,L]=j.useState(String(u?.realizedQuantity??0)),[B,M]=j.useState(!1),[X,W]=j.useState(null),[be,ee]=j.useState(!1);j.useEffect(()=>{o&&(p(u?.articleId??""),g(String(u?.soldQuantity??1)),_(String(u?.amount??0)),b(u?.consultantId??""),E(u?.plannedStartDate??""),T(u?.plannedEndDate??""),I(String(u?.plannedQuantity??0)),L(String(u?.realizedQuantity??0)),W(null))},[o,u]);const G=j.useMemo(()=>a.find(U=>U.id===h),[a,h]),Y=j.useMemo(()=>c.find(U=>U.id===w),[c,w]),pe=j.useMemo(()=>{const U=Math.max(0,Ki(m)),ne=Math.max(0,Ki(D)),Q=Math.max(0,Ki(z)),P=Math.max(0,Ki(v)),F=Math.max(0,U-ne);return{sold:U,planned:ne,realized:Q,amt:P,remaining:F}},[m,D,z,v]),Ee=j.useMemo(()=>!(!h||pe.sold<=0||pe.planned<0||pe.planned>pe.sold||pe.realized<0||pe.realized>pe.planned||pe.amt<0),[h,pe]),le=j.useMemo(()=>Tx(G?.competencesRequired,Y),[G,Y]),J=async U=>{if(U.preventDefault(),!!Ee){M(!0),W(null);try{const ne=C||S||null,Q={articleId:h,soldQuantity:pe.sold,amount:pe.amt,consultantId:w||null,plannedStartDate:S||null,plannedEndDate:ne,plannedQuantity:pe.planned,realizedQuantity:pe.realized};await n(Q),ee(!0),setTimeout(()=>r(),450)}catch(ne){W(ne?.message??"Erreur lors de l'enregistrement.")}finally{M(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsxs(Ve,{isOpen:o,onClose:r,title:u?"Modifier une ligne":"Ajouter une ligne",size:"lg",children:[X&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-700 border border-red-200",children:X}),s.jsxs("form",{onSubmit:J,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Article *"}),s.jsxs("select",{value:h,onChange:U=>p(U.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner"}),a.map(U=>s.jsxs("option",{value:U.id,children:[U.name,"  ",U.service]},U.id))]}),G?.competencesRequired?.length?s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:G.competencesRequired.map(U=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:U},U))}):s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Aucune comptence requise."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit vendue *"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:m,onChange:U=>g(U.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Montant"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:v,onChange:U=>_(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reste  planifier"}),s.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:pe.remaining})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Ressource"}),s.jsxs("select",{value:w,onChange:U=>b(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Non attribue"}),c.map(U=>s.jsxs("option",{value:U.id,children:[U.name,"  ",U.service]},U.id))]}),w&&G?s.jsxs("div",{className:"text-xs mt-1 text-gray-600",children:["Matching comptences : ",s.jsxs("span",{className:"text-gray-900",children:[le,"%"]})]}):null]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date prvue (dbut)"}),s.jsx("input",{type:"date",value:S,onChange:U=>E(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date prvue (fin)"}),s.jsx("input",{type:"date",value:C,onChange:U=>T(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit planifie"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:D,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Doit tre  quantit vendue."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantit ralise"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:z,onChange:U=>L(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Doit tre  quantit planifie."})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",disabled:B,children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!Ee||B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:B?"Enregistrement":u?"Mettre  jour":"Ajouter"})]})]})]}),be&&s.jsx(He,{message:u?"Ligne mise  jour":"Ligne ajoute",type:"success",onClose:()=>ee(!1)})]})}function Th(o){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o||0)}catch{return`${(o||0).toFixed(2)} `}}function Px(o){return{devis_en_cours:"Devis en cours",commande_receptionnee:"Commande rceptionne",attente_affectation_dp:"En attente d'affectation de DP",en_cours_deploiement:"En cours de dploiement",facture:"Factur",paye:"Pay",termine:"Termin"}[o]??o}function Rx(o){return{devis_en_cours:"bg-gray-100 text-gray-700",commande_receptionnee:"bg-blue-50 text-blue-700",attente_affectation_dp:"bg-amber-50 text-amber-700",en_cours_deploiement:"bg-indigo-50 text-indigo-700",facture:"bg-purple-50 text-purple-700",paye:"bg-green-50 text-green-700",termine:"bg-green-100 text-green-700"}[o]??"bg-gray-100 text-gray-700"}function op(o){if(!("project"in o))return s.jsx(Ve,{isOpen:o.isOpen,onClose:o.onClose,title:"Dtails du projet",size:"xl",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"text-gray-900 font-medium",children:"Cette vue a t remplace par le module Projets."}),s.jsx("div",{className:"mt-2 text-gray-600",children:"Ouvrez un projet depuis la section Projets pour afficher la fiche complte (articles, planification, reliquats)."}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:o.onClose,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})});const{isOpen:r,onClose:n,project:a,articles:c,consultants:u}=o,[h,p]=j.useState(!1),[m,g]=j.useState(null),[v,_]=j.useState([]),[w,b]=j.useState(!1),[S,E]=j.useState(void 0),[C,T]=j.useState(""),[D,I]=j.useState(!1),[z,L]=j.useState(!1),[B,M]=j.useState(null),[X,W]=j.useState(null),be=a.clientId??a.client_id??a.clientID??null,ee=async()=>{p(!0),g(null);try{const $=await bx(a.id);_($)}catch($){g($?.message??"Erreur de chargement.")}finally{p(!1)}},G=async()=>{if(!be){W(null);return}L(!0),M(null);try{const $=await cx(be);W($)}catch($){M($?.message??"Impossible de charger les informations client."),W(null)}finally{L(!1)}};j.useEffect(()=>{r&&(ee(),G())},[r,a.id,be]);const Y=j.useMemo(()=>{const $=v.reduce((xe,je)=>xe+(je.amount||0),0),me=v.reduce((xe,je)=>xe+(je.soldQuantity||0),0),ve=v.reduce((xe,je)=>xe+(je.plannedQuantity||0),0),Se=v.reduce((xe,je)=>xe+(je.realizedQuantity||0),0);return{amount:$,sold:me,planned:ve,realized:Se,remaining:Math.max(0,me-ve)}},[v]),pe=async $=>{await jx(a.id,$),await ee(),T("Ligne ajoute"),I(!0)},Ee=async $=>{S&&(await _x(S.id,$),await ee(),E(void 0),T("Ligne mise  jour"),I(!0))},le=async $=>{confirm("Supprimer cette ligne ?")&&(await Nx($),await ee(),T("Ligne supprime"),I(!0))},J=async $=>{confirm("Crer une nouvelle ligne avec le reliquat non planifi ?")&&(await Sx($.id),await ee(),T("Reliquat report"),I(!0))},U=X?.clientNumber??a.clientNumber??"",ne=X?.name??a.clientName??"",Q=X?.address??a.clientAddress??"",P=X?.phone??"",F=X?.tier??a.clientTier??null,ye=X?.contacts??[];return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:r,onClose:n,title:a.name,size:"xl",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900 font-medium",children:"Articles du projet"}),s.jsx("div",{className:"text-gray-500 text-sm",children:"Planification, ralisation et reliquats (scission)."})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[s.jsxs("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:["Total",Th(Y.amount)]}),s.jsxs("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs bg-amber-50 text-amber-700",children:["Reste",Y.remaining]}),s.jsxs("button",{type:"button",onClick:()=>b(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(ot,{className:"w-4 h-4"}),"Ajouter"]})]})]}),h?s.jsx("div",{className:"p-6 text-gray-600",children:"Chargement"}):m?s.jsx("div",{className:"p-6 text-red-700 bg-red-50 border-t border-red-200",children:m}):s.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Article"}),s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Affectation"}),s.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Quantits"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Montant"}),s.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map($=>{const me=$.soldQuantity||0,ve=$.plannedQuantity||0,Se=$.realizedQuantity||0,xe=Math.max(0,me-ve),je=me>0?Math.min(100,Math.round(ve/me*100)):0,st=ve>0&&xe>0;return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors align-top",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"text-gray-900 font-medium",children:$.articleName}),$.articleService?s.jsx("div",{className:"mt-1 text-xs text-gray-500",children:$.articleService}):null]}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"text-gray-900",children:$.consultantName||"Non attribue"}),s.jsx("div",{className:"mt-1 text-xs text-gray-500",children:$.plannedStartDate?s.jsxs("span",{children:[$.plannedStartDate,$.plannedEndDate&&$.plannedEndDate!==$.plannedStartDate?`  ${$.plannedEndDate}`:""]}):"Dates non dfinies"})]}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[s.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-blue-700",children:["Vendu ",me]}),s.jsxs("span",{className:"px-2 py-1 rounded-full bg-orange-50 text-orange-700",children:["Planifi ",ve]}),s.jsxs("span",{className:"px-2 py-1 rounded-full bg-green-50 text-green-700",children:["Ralis ",Se]}),s.jsxs("span",{className:`px-2 py-1 rounded-full ${xe>0?"bg-red-50 text-red-700":"bg-gray-100 text-gray-700"}`,children:["Reste ",xe]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"h-1.5 bg-gray-100 rounded",children:s.jsx("div",{className:"h-1.5 bg-orange-500 rounded",style:{width:`${je}%`}})}),s.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[je,"% planifi"]})]})]}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-900 whitespace-nowrap",children:Th($.amount)}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[st&&s.jsx("button",{type:"button",onClick:()=>void J($),className:"p-2 text-amber-700 hover:bg-amber-50 rounded-lg",title:"Scinder (reporter le reliquat)",children:s.jsx(S0,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>E($),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void le($.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},$.id)})})]}),v.length===0&&s.jsx("div",{className:"py-10 text-center text-gray-500",children:"Aucune ligne pour ce projet"})]})]})}),s.jsx("div",{className:"lg:col-span-1 space-y-4",children:s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Client"}),s.jsx("div",{className:"text-gray-900 font-medium",children:(U||"")+(ne?`  ${ne}`:"")}),F!=null&&F!==""?s.jsxs("div",{className:"mt-1 inline-flex px-2 py-1 rounded-full text-xs bg-indigo-50 text-indigo-700",children:["Tier ",F]}):null]}),s.jsx("div",{className:`inline-flex px-3 py-1 rounded-full text-xs ${Rx(a.status)}`,children:Px(a.status)})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Commercial"}),s.jsx("div",{className:"text-gray-900",children:a.commercialName||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Directeur de projet"}),s.jsx("div",{className:"text-gray-900",children:a.projectManagerName||"Non affect"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Date commande"}),s.jsx("div",{className:"text-gray-900",children:a.orderDate||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Type de vente"}),s.jsx("div",{className:"text-gray-900",children:a.salesType||""})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Coordonnes client"]}),z?s.jsx("div",{className:"text-sm text-gray-600",children:"Chargement des coordonnes"}):B?s.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg p-3",children:B}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-gray-900",children:Q||""}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx(Yi,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:P||""})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[s.jsx(Fl,{className:"w-4 h-4"}),"Interlocuteurs"]}),z?s.jsx("div",{className:"text-sm text-gray-600",children:"Chargement"}):ye.length===0?s.jsx("div",{className:"text-sm text-gray-600",children:"Aucun interlocuteur"}):s.jsx("div",{className:"space-y-2",children:ye.map($=>s.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-gray-900 font-medium",children:$.name}),$.role?s.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-50 text-blue-700",children:$.role}):null]}),s.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bs,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:$.email||""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:$.phone||""})]})]})]},$.id))})]})]})]})})]})}),s.jsx(Ch,{isOpen:w,onClose:()=>b(!1),onSave:pe,articles:c,consultants:u}),S&&s.jsx(Ch,{isOpen:!!S,onClose:()=>E(void 0),onSave:Ee,articles:c,consultants:u,line:S}),D&&s.jsx(He,{message:C,type:"success",onClose:()=>I(!1)})]})}const Ph=[{id:"1",name:"Marie Lefebvre",service:"SIRH",competences:["Paie","GTA","Formation"],location:"Paris",availability:60,matchScore:95,availableDates:"Du 15/01 au 28/02/2026"},{id:"3",name:"Sophie Martin",service:"SIRH",competences:["Formation","Paie","Reprise de donnes"],location:"Bordeaux",availability:80,matchScore:90,availableDates:"Du 01/01 au 31/03/2026"},{id:"4",name:"Lucas Bernard",service:"SIRH",competences:["GTA","Paramtrage","Support"],location:"Paris",availability:45,matchScore:85,availableDates:"Du 20/01 au 15/03/2026"},{id:"2",name:"Thomas Durand",service:"Finance",competences:["SIGF","Paramtrage","Installation"],location:"Lyon",availability:30,matchScore:60,availableDates:"Du 01/02 au 30/04/2026"}];function Ox({isOpen:o,onClose:r}){const[n,a]=j.useState([]),[c,u]=j.useState(!1),h=g=>{a(v=>v.includes(g)?v.filter(_=>_!==g):[...v,g])},p=()=>{u(!0),setTimeout(()=>{r(),a([])},1500)},m=g=>g>=90?"text-green-600":g>=75?"text-blue-600":g>=60?"text-orange-600":"text-gray-600";return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Ressources suggres pour ce projet",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-blue-900 mb-2",children:"Critres de recherche"}),s.jsxs("div",{className:"text-blue-700 text-sm space-y-1",children:[s.jsx("div",{children:" Comptences requises : Paie, GTA, Formation"}),s.jsx("div",{children:" Services : SIRH"}),s.jsx("div",{children:" Priode du projet : 15/06/2025 - 30/09/2025"}),s.jsx("div",{children:" Localisation prfrentielle : Paris, le-de-France"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-gray-900",children:["Consultants disponibles (",Ph.length,")"]}),Ph.map(g=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${n.includes(g.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h(g.id),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"pt-1",children:s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${n.includes(g.id)?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:n.includes(g.id)&&s.jsx(Bg,{className:"w-4 h-4 text-white"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-gray-900",children:g.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-sm text-gray-600",children:g.service}),s.jsx("span",{className:"text-gray-300",children:""}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Ss,{className:"w-3 h-3"}),g.location]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm ${m(g.matchScore)}`,children:["Compatibilit : ",g.matchScore,"%"]}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Dispo : ",g.availability,"%"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.competences.map((v,_)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:[s.jsx($l,{className:"w-3 h-3"}),v]},_))}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(br,{className:"w-3 h-3"}),g.availableDates]})]})]})},g.id))]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[n.length," consultant",n.length!==1?"s":""," slectionn",n.length!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:p,disabled:n.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Affecter au projet"})]})]})]})}),c&&s.jsx(He,{message:`${n.length} consultant${n.length!==1?"s":""} affect${n.length!==1?"s":""} au projet`,type:"success",onClose:()=>u(!1)})]})}const Rh=[{id:"1",article:"Installation SIRH Paie",consultant:"Marie Lefebvre",mode:"Sur site",startDate:"15/06/2025",endDate:"19/06/2025",duration:5,location:"Paris, Client ABC"},{id:"2",article:"Paramtrage Paie",consultant:"Marie Lefebvre",mode:" distance",startDate:"22/06/2025",endDate:"03/07/2025",duration:10},{id:"3",article:"Reprise de donnes",consultant:"Sophie Martin",mode:" distance",startDate:"06/07/2025",endDate:"10/07/2025",duration:5},{id:"4",article:"Formation utilisateurs",consultant:"Lucas Bernard",mode:"Hybride",startDate:"13/07/2025",endDate:"17/07/2025",duration:5,location:"Paris, Client ABC (J1-J2)"},{id:"5",article:"Formation administrateurs",consultant:"Marie Lefebvre",mode:"Sur site",startDate:"20/07/2025",endDate:"22/07/2025",duration:3,location:"Paris, Client ABC"}];function Ax({isOpen:o,onClose:r}){const[n,a]=j.useState(!1),[c,u]=j.useState(""),h=()=>{u("Planning export en PDF"),a(!0)},p=()=>{u("Planning export en Excel"),a(!0)},m=g=>{switch(g){case"Sur site":return"bg-blue-100 text-blue-700";case" distance":return"bg-green-100 text-green-700";case"Hybride":return"bg-purple-100 text-purple-700"}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Planning dtaill des interventions",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Projet"}),s.jsx("div",{className:"text-gray-900",children:"Client ABC - Implmentation SIRH"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Priode"}),s.jsx("div",{className:"text-gray-900",children:"15/06/2025 - 30/09/2025"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Jours vendus"}),s.jsx("div",{className:"text-gray-900",children:"35 jours"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 mb-1",children:"Consultants"}),s.jsx("div",{className:"text-gray-900",children:"3 consultants"})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:h,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsx("span",{children:"Exporter en PDF"})]}),s.jsxs("button",{onClick:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:[s.jsx(Ll,{className:"w-4 h-4"}),s.jsx("span",{children:"Exporter en Excel"})]})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Prestation"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Consultant"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Mode"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Dates"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Dure"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"Lieu"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:Rh.map((g,v)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs",children:v+1}),s.jsx("span",{className:"text-sm text-gray-900",children:g.article})]})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.consultant}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(g.mode)}`,children:g.mode})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-900",children:[s.jsx(br,{className:"w-3 h-3 text-gray-400"}),g.startDate," - ",g.endDate]})}),s.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[g.duration," j"]}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:g.location||"-"})]},g.id))}),s.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:4,className:"px-4 py-3 text-sm text-gray-900",children:"Total"}),s.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[Rh.reduce((g,v)=>g+v.duration,0)," j"]}),s.jsx("td",{})]})})]})})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsx("p",{className:"text-blue-700 text-sm",children:" Ce planning a t gnr automatiquement en tenant compte du squenage des prestations et de la disponibilit des consultants."})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Fermer"}),s.jsx("button",{onClick:()=>{u("Planning enregistr"),a(!0),setTimeout(()=>r(),1500)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer le planning"})]})]})}),n&&s.jsx(He,{message:c,type:"success",onClose:()=>a(!1)})]})}function Ix(){const[o,r]=j.useState(!1),[n,a]=j.useState(!1),[c,u]=j.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 mb-1",children:"Projet  Client ABC"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Type : Packag"})]}),s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:" risque"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Qh,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-blue-900 text-sm",children:"Jours vendus"})]}),s.jsx("div",{className:"text-blue-900",children:"35"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(br,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-orange-900 text-sm",children:"Jours consomms"})]}),s.jsx("div",{className:"text-orange-900",children:"18"}),s.jsx("div",{className:"mt-1",children:s.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"51%"}})})})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(br,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-900 text-sm",children:"Jours restants"})]}),s.jsx("div",{className:"text-green-900",children:"17"}),s.jsx("p",{className:"text-green-700 text-sm mt-1",children:"49% disponible"})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-gray-600 text-sm",children:"Date de dbut : 15/06/2025"}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Date de fin prvue : 30/09/2025"})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Voir le projet complet"}),s.jsxs("button",{onClick:()=>a(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[s.jsx(Fl,{className:"w-4 h-4"}),s.jsx("span",{children:"Suggrer ressources"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsx("span",{children:"Gnrer planning"})]})]})]}),s.jsx(op,{isOpen:o,onClose:()=>r(!1)}),s.jsx(Ox,{isOpen:n,onClose:()=>a(!1)}),s.jsx(Ax,{isOpen:c,onClose:()=>u(!1)})]})}function Dx({isOpen:o,onClose:r}){const n=[{name:"Installation",service:"Service Technique",allocated:8,consumed:5,interventions:[{date:"20/06/2025",duration:2,consultant:"Pierre Martin",type:"Installation serveurs"},{date:"22/06/2025",duration:3,consultant:"Sophie Leroy",type:"Configuration rseau"}]},{name:"Paramtrage SIRH",service:"Service SIRH",allocated:15,consumed:10,interventions:[{date:"25/06/2025",duration:4,consultant:"Marc Dubois",type:"Paramtrage modules"},{date:"28/06/2025",duration:3,consultant:"Marc Dubois",type:"Configuration workflow"},{date:"02/07/2025",duration:3,consultant:"Claire Bernard",type:"Tests paramtrages"}]},{name:"Formation",service:"Service Formation",allocated:6,consumed:3,interventions:[{date:"12/12/2025",duration:3,consultant:"Julie Rousseau",type:"Formation administrateurs"}]},{name:"Reprise de donnes",service:"Service Data",allocated:6,consumed:0,interventions:[]}],a=(u,h)=>Math.round(u/h*100),c=u=>u>90?"bg-red-500":u>75?"bg-orange-500":"bg-green-500";return s.jsx(Ve,{isOpen:o,onClose:r,title:"Dtails par prestation / service",size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[n.map((u,h)=>{const p=a(u.consumed,u.allocated);return s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(qh,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-gray-900",children:u.name})]}),s.jsx("p",{className:"text-gray-600 text-sm",children:u.service})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-gray-900",children:[u.consumed," / ",u.allocated," jours"]}),s.jsxs("div",{className:`text-sm ${p>75?"text-orange-600":"text-green-600"}`,children:[p,"% consomm"]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full ${c(p)}`,style:{width:`${p}%`}})})}),u.interventions.length>0?s.jsxs("div",{children:[s.jsx("h4",{className:"text-gray-700 mb-3",children:"Interventions ralises"}),s.jsx("div",{className:"space-y-2",children:u.interventions.map((m,g)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Kh,{className:"w-4 h-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900 text-sm",children:m.type}),s.jsx("div",{className:"text-gray-500 text-xs",children:m.date})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(R0,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-gray-700 text-sm",children:m.consultant})]}),s.jsxs("span",{className:"text-blue-600",children:[m.duration,"j"]})]})]},g))})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Aucune intervention ralise pour le moment"}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Jours restants"}),s.jsxs("span",{className:`${u.allocated-u.consumed>0?"text-green-600":"text-red-600"}`,children:[u.allocated-u.consumed," jours"]})]})})]},h)}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})})}function $x(){const[o,r]=j.useState(!1),n=[{name:"Installation",service:"Service Technique",consumed:5,total:8,status:"good"},{name:"Paramtrage SIRH",service:"Service SIRH",consumed:10,total:15,status:"warning"},{name:"Formation",service:"Service Formation",consumed:3,total:6,status:"good"},{name:"Reprise de donnes",service:"Service Data",consumed:0,total:6,status:"good"}],a=u=>{switch(u){case"good":return"bg-green-500";case"warning":return"bg-orange-500";case"critical":return"bg-red-500";default:return"bg-gray-400"}},c=(u,h)=>Math.round(u/h*100);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(qh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Consommation par prestation / service"})]}),s.jsx("div",{className:"space-y-4",children:n.map((u,h)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${a(u.status)}`}),s.jsx("span",{className:"text-gray-900",children:u.name})]}),s.jsx("p",{className:"text-gray-500 text-sm ml-4",children:u.service})]}),s.jsxs("div",{className:"text-gray-900",children:[u.consumed," / ",u.total," j"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 ml-4",children:s.jsx("div",{className:`h-2 rounded-full ${a(u.status)}`,style:{width:`${c(u.consumed,u.total)}%`}})})]},h))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Dtails par prestation"})})]}),s.jsx(Dx,{isOpen:o,onClose:()=>r(!1)})]})}function Lx({isOpen:o,onClose:r}){const[n,a]=j.useState([{id:1,name:"Dump de donnes paie",status:"missing",deadline:"2025-12-21",critical:!0},{id:2,name:"Accs VPN",status:"received",deadline:"2025-12-01",critical:!1},{id:3,name:"Liste des administrateurs",status:"received",deadline:"2025-12-01",critical:!1}]),[c,u]=j.useState({name:"",deadline:"",critical:!1}),h=g=>{a(n.map(v=>v.id===g?{...v,status:v.status==="received"?"missing":"received"}:v))},p=g=>{a(n.filter(v=>v.id!==g))},m=()=>{if(c.name&&c.deadline){const g=Math.max(...n.map(v=>v.id),0)+1;a([...n,{...c,id:g,status:"missing"}]),u({name:"",deadline:"",critical:!1})}};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les prrequis client",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Prrequis existants"}),s.jsx("div",{className:"space-y-3",children:n.map(g=>s.jsx("div",{className:`p-4 rounded-lg border ${g.status==="received"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:g.name}),g.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Bloquant"})]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["chance : ",new Date(g.deadline).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>h(g.id),className:`p-2 rounded-lg transition-colors ${g.status==="received"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-gray-200"}`,title:g.status==="received"?"Marquer comme non reu":"Marquer comme reu",children:g.status==="received"?s.jsx(Ns,{className:"w-5 h-5 text-green-600"}):s.jsx(Wh,{className:"w-5 h-5 text-red-600"})}),s.jsx("button",{onClick:()=>p(g.id),className:"p-2 bg-red-100 hover:bg-red-200 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-5 h-5 text-red-600"})})]})]})},g.id))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Ajouter un prrequis"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Nom du prrequis"}),s.jsx("input",{type:"text",value:c.name,onChange:g=>u({...c,name:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Fichier organigramme"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Date d'chance"}),s.jsx("input",{type:"date",value:c.deadline,onChange:g=>u({...c,deadline:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.critical,onChange:g=>u({...c,critical:g.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-700",children:"Prrequis bloquant"})]})})]}),s.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),"Ajouter le prrequis"]})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer et fermer"})})]})})}function Mx(){const[o,r]=j.useState(!1),n=[{name:"Dump de donnes paie",status:"missing",deadline:"J-10",critical:!0,icon:Qg},{name:"Accs VPN",status:"received",deadline:"Valid",critical:!1,icon:u0},{name:"Liste des administrateurs",status:"received",deadline:"Valid",critical:!1,icon:Ns}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Hh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Prrequis en attente"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsx("div",{className:`p-4 rounded-lg border ${a.status==="missing"?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(a.icon,{className:`w-5 h-5 mt-0.5 ${a.status==="missing"?"text-red-600":"text-green-600"}`}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:a.name}),s.jsxs("p",{className:`text-sm mt-1 ${a.status==="missing"?"text-red-700":"text-green-700"}`,children:["Statut : ",a.status==="missing"?"Non reu":"Reu","  chance"," ",a.deadline]})]}),a.critical&&s.jsx("span",{className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Bloquant"})]})})]})},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Grer les prrequis"})})]}),s.jsx(Lx,{isOpen:o,onClose:()=>r(!1)})]})}function Ux({isOpen:o,onClose:r}){const[n,a]=j.useState(!1),[c,u]=j.useState({name:"",date:"",startTime:"",endTime:"",type:"distance",location:"",teamsLink:""}),h=[{id:1,date:"12 Dc 2025",time:"09:00 - 12:00",type:"distance",name:"Formation administrateurs",location:"Teams"},{id:2,date:"13 Dc 2025",time:"14:00 - 17:00",type:"onsite",name:"Reprise de donnes",location:"Paris - Sige"},{id:3,date:"15 Dc 2025",time:"10:00 - 11:30",type:"distance",name:"Point d'avancement",location:"Teams"},{id:4,date:"18 Dc 2025",time:"Toute la journe",type:"onsite",name:"Formation utilisateurs",location:"Lyon - Agence Sud"}],p=m=>{m.preventDefault(),console.log("Nouvelle intervention:",c),a(!1),u({name:"",date:"",startTime:"",endTime:"",type:"distance",location:"",teamsLink:""})};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les interventions",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[!n&&s.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),"Planifier une intervention"]}),n&&s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Nouvelle intervention"}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Nom de l'intervention"}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:m=>u({...c,name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Formation administrateurs"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Date"}),s.jsx("input",{type:"date",required:!0,value:c.date,onChange:m=>u({...c,date:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Heure dbut"}),s.jsx("input",{type:"time",required:!0,value:c.startTime,onChange:m=>u({...c,startTime:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Heure fin"}),s.jsx("input",{type:"time",required:!0,value:c.endTime,onChange:m=>u({...c,endTime:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Type d'intervention"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"type",value:"distance",checked:c.type==="distance",onChange:m=>u({...c,type:m.target.value}),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:" distance"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"type",value:"onsite",checked:c.type==="onsite",onChange:m=>u({...c,type:m.target.value}),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Sur site"})]})]})]}),c.type==="distance"?s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Lien Teams"}),s.jsx("input",{type:"url",value:c.teamsLink,onChange:m=>u({...c,teamsLink:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"https://teams.microsoft.com/..."})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Lieu / Site client"}),s.jsx("input",{type:"text",required:!0,value:c.location,onChange:m=>u({...c,location:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Ex: Paris - Sige"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer"}),s.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Interventions planifies"}),s.jsx("div",{className:"space-y-3",children:h.map(m=>s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:m.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.type==="distance"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:m.type==="distance"?" distance":"Sur site"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsx("span",{children:m.date}),s.jsx("span",{children:m.time}),s.jsxs("div",{className:"flex items-center gap-1",children:[m.type==="distance"?s.jsx(Yh,{className:"w-4 h-4"}):s.jsx(Ss,{className:"w-4 h-4"}),s.jsx("span",{children:m.location})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx(Vr,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{className:"p-2 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4 text-red-600"})})]})]})},m.id))})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})})]})})}function zx(){const[o,r]=j.useState(!1),n=[{date:"12 Dc",time:"09:00 - 12:00",type:"distance",name:"Formation administrateurs",location:"Teams"},{date:"13 Dc",time:"14:00 - 17:00",type:"onsite",name:"Reprise de donnes",location:"Paris - Sige"},{date:"15 Dc",time:"10:00 - 11:30",type:"distance",name:"Point d'avancement",location:"Teams"},{date:"18 Dc",time:"Toute la journe",type:"onsite",name:"Formation utilisateurs",location:"Lyon - Agence Sud"}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(br,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Interventions  venir (7 jours)"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"text-center min-w-[60px]",children:[s.jsx("div",{className:"text-blue-600",children:a.date}),s.jsx("div",{className:"text-gray-600 text-sm",children:a.time})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-gray-900",children:a.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.type==="distance"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:a.type==="distance"?" distance":"Sur site"})]}),s.jsx("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:a.type==="distance"?s.jsxs(s.Fragment,{children:[s.jsx(Yh,{className:"w-4 h-4"}),s.jsxs("button",{className:"text-blue-600 hover:underline",children:["Lien ",a.location]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"w-4 h-4"}),s.jsx("span",{children:a.location})]})})]})]})},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Voir tout le planning"})})]}),s.jsx(Ux,{isOpen:o,onClose:()=>r(!1)})]})}function Fx({isOpen:o,onClose:r,validationName:n}){const[a,c]=j.useState("Relance validation - "+n),[u,h]=j.useState(`Bonjour,

Nous souhaitons attirer votre attention sur la validation en attente concernant : ${n}.

Merci de bien vouloir nous faire un retour dans les meilleurs dlais.

Cordialement,
Jean Dupont
Chef de projet`),p=()=>{console.log("Relance envoye:",{subject:a,body:u}),r()};return s.jsx(Ve,{isOpen:o,onClose:r,title:`Validation - ${n}`,size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 rounded-lg p-6 border border-yellow-200",children:s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(Et,{className:"w-6 h-6 text-yellow-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-gray-900 mb-2",children:"Statut de la validation"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Document envoy le :"}),s.jsx("span",{className:"text-gray-900",children:"03/12/2025"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Dlai de rponse :"}),s.jsx("span",{className:"text-orange-600",children:"5 jours couls"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Statut actuel :"}),s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs",children:"En attente"})]})]})]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Documents lis"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Et,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"text-gray-900",children:["Compte-rendu ",n]}),s.jsx("div",{className:"text-gray-500 text-sm",children:"PDF - 1.2 MB"})]})]}),s.jsx("span",{className:"text-blue-600 text-sm",children:"Tlcharger"})]})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Envoyer une relance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Objet"}),s.jsx("input",{type:"text",value:a,onChange:m=>c(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-2",children:"Message"}),s.jsx("textarea",{rows:8,value:u,onChange:m=>h(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})]}),s.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ul,{className:"w-4 h-4"}),"Envoyer la relance"]})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Ns,{className:"w-4 h-4"}),"Marquer comme valid"]})}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Fermer"})})]})})}function Bx(){const[o,r]=j.useState(null),n=[{name:"Lot Formation",status:"pending",days:5,hasReserves:!1},{name:"Reprise donnes RH",status:"reserves",days:3,hasReserves:!0},{name:"Paramtrage module Paie",status:"pending",days:8,hasReserves:!1}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Kg,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Validations client en attente"})]}),s.jsx("div",{className:"space-y-3",children:n.map((a,c)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-900",children:a.name}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a.hasReserves?s.jsx("span",{className:"text-orange-600",children:"Rserves mises"}):`Non valid depuis ${a.days} jours`})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.hasReserves?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:a.hasReserves?" revoir":"En attente"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>r(a.name),className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"}),"Voir le CR"]}),s.jsxs("button",{onClick:()=>r(a.name),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm hover:bg-blue-100 transition-colors",children:[s.jsx(Ul,{className:"w-4 h-4"}),"Relancer le client"]})]})]},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Toutes les validations"})})]}),o&&s.jsx(Fx,{isOpen:!0,onClose:()=>r(null),validationName:o})]})}function qx(){const o=[{description:"Paramtrage additionnel module RH",days:3,status:"toqualify"},{description:"Correction bug migration donnes",days:2,status:"toqualify"}],r=[{description:"Formation supplmentaire demande",days:5,status:"amendment"},{description:"Dveloppement spcifique reporting",days:8,status:"amendment"},{description:"Extension primtre paie",days:12,status:"closed"}],n=a=>{switch(a){case"toqualify":return{text:" qualifier",className:"bg-yellow-100 text-yellow-700"};case"amendment":return{text:"Avenant en cours",className:"bg-blue-100 text-blue-700"};case"closed":return{text:"Clos",className:"bg-green-100 text-green-700"};default:return{text:"Inconnu",className:"bg-gray-100 text-gray-700"}}};return s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(T0,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"carts de charge"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Qh,{className:"w-4 h-4 text-orange-600"}),s.jsx("h3",{className:"text-gray-900",children:"Origine interne"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"(jours ajouts non facturables)"})]}),s.jsx("div",{className:"space-y-3",children:o.map((a,c)=>s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("span",{className:"text-gray-900 text-sm",children:a.description}),s.jsxs("span",{className:"text-orange-700 ml-2 whitespace-nowrap",children:["+",a.days,"j"]})]}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${n(a.status).className}`,children:n(a.status).text})]},c))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Kh,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"text-gray-900",children:"Origine client"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"(jours en attente d'avenant)"})]}),s.jsx("div",{className:"space-y-3",children:r.map((a,c)=>s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("span",{className:"text-gray-900 text-sm",children:a.description}),s.jsxs("span",{className:"text-blue-700 ml-2 whitespace-nowrap",children:["+",a.days,"j"]})]}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${n(a.status).className}`,children:n(a.status).text})]},c))})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-gray-600 text-sm",children:["Total carts non facturables : ",s.jsx("span",{className:"text-orange-600",children:"5 jours"})]}),s.jsxs("div",{className:"text-gray-600 text-sm",children:["Total en attente d'avenant : ",s.jsx("span",{className:"text-blue-600",children:"13 jours"})]})]})})]})}function Vx({isOpen:o,onClose:r}){const[n,a]=j.useState([{id:1,type:"MOM",fullName:"Mise en uvre",date:"2025-06-20",status:"completed",letterGenerated:!0,letterSent:!0},{id:2,type:"VA",fullName:"Validation",date:"2025-09-15",status:"planned",letterGenerated:!0,letterSent:!1},{id:3,type:"VSR",fullName:"Vrification Service Rgulier",date:"2025-09-30",status:"planned",letterGenerated:!1,letterSent:!1}]),c=p=>{a(n.map(m=>m.id===p?{...m,status:m.status==="completed"?"planned":"completed"}:m))},u=p=>{a(n.map(m=>m.id===p?{...m,letterGenerated:!0}:m))},h=p=>{a(n.map(m=>m.id===p?{...m,letterSent:!0}:m))};return s.jsx(Ve,{isOpen:o,onClose:r,title:"Grer les jalons cls",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:s.jsx("p",{className:"text-gray-700 text-sm",children:"Les jalons cls (MOM, VA, VSR) sont des tapes rglementaires obligatoires du projet. Assurez-vous de gnrer et envoyer les courriers correspondants dans les dlais."})}),s.jsx("div",{className:"space-y-4",children:n.map(p=>s.jsxs("div",{className:`p-6 rounded-lg border-2 ${p.status==="completed"?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Jh,{className:`w-5 h-5 ${p.status==="completed"?"text-green-600":"text-blue-600"}`}),s.jsxs("h3",{className:"text-gray-900",children:[p.type,"  ",p.fullName]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Date prvue :"}),s.jsx("input",{type:"date",value:p.date,onChange:m=>{a(n.map(g=>g.id===p.id?{...g,date:m.target.value}:g))},className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:"Statut :"}),s.jsx("button",{onClick:()=>c(p.id),className:`px-3 py-1 rounded-full text-xs ${p.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:p.status==="completed"?"Termin":"Planifi"})]})]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:p.letterGenerated?p.letterSent?s.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm",children:[s.jsx(bs,{className:"w-4 h-4"}),"Courrier envoy"]}):s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm",children:[s.jsx(Et,{className:"w-4 h-4"}),"Courrier gnr"]}),s.jsxs("button",{onClick:()=>h(p.id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(Ul,{className:"w-4 h-4"}),"Marquer comme envoy"]})]}):s.jsxs("button",{onClick:()=>u(p.id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(Et,{className:"w-4 h-4"}),"Gnrer le courrier"]})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsx("label",{className:"block text-gray-700 text-sm mb-2",children:"Notes sur ce jalon"}),s.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none text-sm",placeholder:"Ajoutez des notes..."})]})]},p.id))}),s.jsx("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:s.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer et fermer"})})]})})}function Hx(){const[o,r]=j.useState(!1),n=[{name:"MOM",fullName:"Mise en uvre",date:"20/06/2025",status:"completed",letterStatus:"sent"},{name:"VA",fullName:"Validation",date:"15/09/2025",status:"planned",letterStatus:"generated"},{name:"VSR",fullName:"Vrification Service Rgulier",date:"30/09/2025",status:"planned",letterStatus:"pending"}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Jh,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Jalons cls (MOM / VA / VSR)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"space-y-6",children:n.map((a,c)=>s.jsxs("div",{className:"relative pl-12",children:[s.jsx("div",{className:"absolute left-0 top-1",children:a.status==="completed"?s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ns,{className:"w-5 h-5 text-green-600"})}):s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Hg,{className:"w-5 h-5 text-blue-600"})})}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-900",children:a.name}),s.jsxs("span",{className:"text-gray-500 text-sm",children:[" ",a.fullName]})]}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[a.status==="completed"?"Termin le":"Prvu le"," ",a.date]})]}),a.letterStatus!=="pending"&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(bs,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.letterStatus==="sent"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.letterStatus==="sent"?"Envoy":"Gnr"})]})]})})]},c))})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>r(!0),className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Grer les jalons"})})]}),s.jsx(Vx,{isOpen:o,onClose:()=>r(!1)})]})}function Wx({isOpen:o,onClose:r,documentName:n}){return s.jsx(Ve,{isOpen:o,onClose:r,title:n,size:"xl",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Type"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"PDF"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Taille"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"2.4 MB"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Cr le"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"03/09/2025"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Cr par"}),s.jsx("div",{className:"text-gray-900 mt-1",children:"Jean Dupont"})]})]})}),s.jsxs("div",{className:"bg-gray-100 rounded-lg p-12 border-2 border-dashed border-gray-300 flex flex-col items-center justify-center min-h-[400px]",children:[s.jsx(Et,{className:"w-16 h-16 text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-center mb-2",children:"Aperu du document"}),s.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Le visualiseur de documents serait affich ici"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ll,{className:"w-4 h-4"}),"Tlcharger"]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(j0,{className:"w-4 h-4"}),"Partager"]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[s.jsx(Vt,{className:"w-4 h-4"}),"Supprimer"]})]})]})})}function Kx(){const[o,r]=j.useState(null),n=[{name:"CR COPIL 03/09",type:"PDF",date:"03/09/2025",size:"2.4 MB",icon:Et},{name:"Guide d'utilisation module Paie",type:"PDF",date:"28/08/2025",size:"5.1 MB",icon:Et},{name:"Courrier VA",type:"DOCX",date:"25/08/2025",size:"156 KB",icon:rh},{name:"Cahier de recette Formation",type:"PDF",date:"20/08/2025",size:"1.8 MB",icon:Et},{name:"Planning dtaill projet",type:"XLSX",date:"15/08/2025",size:"324 KB",icon:rh}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Et,{className:"w-5 h-5 text-gray-700"}),s.jsx("h2",{className:"text-gray-900",children:"Derniers documents"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:n.map((a,c)=>s.jsxs("div",{onClick:()=>r(a.name),className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx(a.icon,{className:"w-8 h-8 text-blue-600"}),s.jsx("button",{className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-100 rounded",children:s.jsx(Ll,{className:"w-4 h-4 text-blue-600"})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-gray-900 text-sm line-clamp-2",children:a.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:a.type}),s.jsx("span",{className:"text-gray-500 text-xs",children:a.size})]}),s.jsx("p",{className:"text-gray-500 text-xs",children:a.date})]})]},c))}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Voir tous les documents"})})]}),o&&s.jsx(Wx,{isOpen:!0,onClose:()=>r(null),documentName:o})]})}const Gx={summary:"Rsum du projet",prerequisites:"Prrequis client",consumption:"Consommation par prestation",interventions:"Interventions  venir",validations:"Validations client en attente",alerts:"carts de charge",milestones:"Jalons cls",documents:"Documents rcents"};function Jx({isOpen:o,onClose:r,config:n,onSave:a}){const[c,u]=j.useState(n),[h,p]=j.useState(!1),[m,g]=j.useState(null),v=E=>{u(C=>C.map(T=>T.id===E?{...T,enabled:!T.enabled}:T))},_=E=>{g(E)},w=(E,C)=>{if(E.preventDefault(),m===null||m===C)return;const T=[...c],D=T[m];T.splice(m,1),T.splice(C,0,D);const I=T.map((z,L)=>({...z,order:L}));u(I),g(C)},b=()=>{g(null)},S=()=>{a(c),p(!0),setTimeout(()=>{r()},1e3)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Personnaliser le tableau de bord",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"Activez ou dsactivez les widgets et rorganisez-les par glisser-dposer."}),s.jsx("div",{className:"space-y-2",children:c.sort((E,C)=>E.order-C.order).map((E,C)=>s.jsxs("div",{draggable:!0,onDragStart:()=>_(C),onDragOver:T=>w(T,C),onDragEnd:b,className:`flex items-center gap-3 p-4 bg-white border rounded-lg cursor-move transition-all ${m===C?"opacity-50 scale-95":"hover:shadow-md"}`,children:[s.jsx(l0,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"flex-1 text-gray-900",children:Gx[E.id]||E.id}),s.jsx("button",{onClick:()=>v(E.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors ${E.enabled?"bg-blue-50 text-blue-700 hover:bg-blue-100":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:E.enabled?s.jsxs(s.Fragment,{children:[s.jsx(Gh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Visible"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Zg,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Masqu"})]})})]},E.id))}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer"})]})]})}),h&&s.jsx(He,{message:"Configuration enregistre",type:"success",onClose:()=>p(!1)})]})}function Oh(){const[o,r]=j.useState(!1),[n,a]=j.useState([{id:"summary",component:Ix,enabled:!0,order:0,colSpan:"xl:col-span-2"},{id:"prerequisites",component:Mx,enabled:!0,order:1,colSpan:""},{id:"consumption",component:$x,enabled:!0,order:2,colSpan:""},{id:"interventions",component:zx,enabled:!0,order:3,colSpan:""},{id:"validations",component:Bx,enabled:!0,order:4,colSpan:""},{id:"alerts",component:qx,enabled:!0,order:5,colSpan:"lg:col-span-2"},{id:"milestones",component:Hx,enabled:!0,order:6,colSpan:""},{id:"documents",component:Kx,enabled:!0,order:7,colSpan:"lg:col-span-2 xl:col-span-3"}]),c=h=>{a(h)},u=n.filter(h=>h.enabled).sort((h,p)=>h.order-p.order);return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 flex justify-end",children:s.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(zl,{className:"w-4 h-4"}),s.jsx("span",{children:"Personnaliser le tableau de bord"})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(h=>{const p=h.component;return s.jsx("div",{className:h.colSpan,children:s.jsx(p,{})},h.id)})}),s.jsx(Jx,{isOpen:o,onClose:()=>r(!1),config:n,onSave:c})]})}const Qx=[{key:"mon",label:"L"},{key:"tue",label:"M"},{key:"wed",label:"Me"},{key:"thu",label:"J"},{key:"fri",label:"V"},{key:"sat",label:"S"},{key:"sun",label:"D"}];function Yx({consultants:o,onEdit:r,onDelete:n}){return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Consultant"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Comptences"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Localisation"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Jours"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(a=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-700",children:a.name.split(" ").filter(Boolean).map(c=>c[0]).join("").slice(0,2)})}),s.jsx("div",{className:"text-gray-900",children:a.name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:a.service})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:a.competences?.length?a.competences.map((c,u)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:[s.jsx($l,{className:"w-3 h-3"}),c]},`${c}-${u}`)):s.jsx("span",{className:"text-sm text-gray-400",children:""})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(Ss,{className:"w-4 h-4 text-gray-400"}),a.location]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[a.email?s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[s.jsx(bs,{className:"w-3 h-3"}),s.jsx("a",{href:`mailto:${a.email}`,className:"hover:text-blue-600",children:a.email})]}):s.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[s.jsx(bs,{className:"w-3 h-3"}),""]}),a.phone?s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[s.jsx(Yi,{className:"w-3 h-3"}),s.jsx("a",{href:`tel:${a.phone}`,className:"hover:text-blue-600",children:a.phone})]}):s.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[s.jsx(Yi,{className:"w-3 h-3"}),""]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center gap-1",children:Qx.map(c=>s.jsx("span",{className:`w-7 h-7 rounded flex items-center justify-center text-xs border ${a.workDays?.[c.key]?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-400"}`,title:c.key,children:c.label},c.key))})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),r(a)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(m0,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),n(a.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},a.id))})]})}),o.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun consultant trouv"})]})}async function Xx(o,r){const{data:n,error:a}=await ae.from("consultant_bookings").select("id, consultant_id, kind, title, notes, start_date, end_date").lte("start_date",r).gte("end_date",o).order("start_date",{ascending:!0});if(a)throw a;return(n??[]).map(c=>({id:c.id,consultantId:c.consultant_id,kind:c.kind,title:c.title,notes:c.notes??"",startDate:c.start_date,endDate:c.end_date}))}async function Zx(o){const{error:r}=await ae.from("consultant_bookings").insert({consultant_id:o.consultantId,kind:o.kind??"booking",title:o.title,notes:o.notes??"",start_date:o.startDate,end_date:o.endDate});if(r)throw r}async function ew(o){const{error:r}=await ae.from("consultant_bookings").delete().eq("id",o);if(r)throw r}function Gi(o){const r=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0");return`${r}-${n}-${a}`}function Ah(o,r){const n=new Date(o);return n.setDate(n.getDate()+r),n}function Ih(o,r){const n=o.getTime()-r.getTime();return Math.floor(n/(24*3600*1e3))}function tw(o,r){const n=r.getDay(),a=o.workDays;if(!a)return!0;switch(n){case 1:return a.mon;case 2:return a.tue;case 3:return a.wed;case 4:return a.thu;case 5:return a.fri;case 6:return a.sat;case 0:return a.sun;default:return!0}}function rw({consultants:o}){const[r,n]=j.useState(0),a=14,[c,u]=j.useState([]),[h,p]=j.useState(!1),m=j.useMemo(()=>{const T=[],D=new Date,I=new Date(D);I.setHours(0,0,0,0),I.setDate(D.getDate()+r*7);for(let z=0;z<a;z++)T.push(Ah(I,z));return T},[r]),g=j.useMemo(()=>Gi(m[0]),[m]),v=j.useMemo(()=>Gi(m[a-1]),[m]),_=async()=>{p(!0);try{const T=await Xx(g,v);u(T)}finally{p(!1)}};j.useEffect(()=>{_()},[g,v]);const w=j.useMemo(()=>{const T=new Map;for(const D of c){const I=T.get(D.consultantId)??[];I.push(D),T.set(D.consultantId,I)}return T},[c]),b=()=>n(T=>T-1),S=()=>n(T=>T+1),E=async(T,D)=>{const I=(prompt("Titre de la rservation :","Rservation")??"").trim();if(!I)return;const L=(prompt("Type (booking / time_off) :","booking")??"booking").trim()==="time_off"?"time_off":"booking",B=(prompt("Dure (jours) :","1")??"1").trim(),M=Math.max(1,Number(B)||1),X=Gi(D),W=Gi(Ah(D,M-1));await Zx({consultantId:T,kind:L,title:I,startDate:X,endDate:W}),await _()},C=async T=>{confirm("Supprimer cet vnement ?")&&(await ew(T),await _())};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"border-b border-gray-200 p-4 flex items-center justify-between bg-gray-50",children:[s.jsxs("h3",{className:"text-gray-900",children:["Planning ",h?" chargement":""]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx($g,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-gray-700 min-w-[240px] text-center",children:[m[0].toLocaleDateString("fr-FR",{day:"numeric",month:"long"})," -"," ",m[a-1].toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]}),s.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:s.jsx(Mg,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-[1200px]",children:[s.jsxs("div",{className:"grid grid-cols-[200px_repeat(14,1fr)] border-b border-gray-200 bg-gray-50",children:[s.jsx("div",{className:"p-3 border-r border-gray-200",children:s.jsx("span",{className:"text-gray-700",children:"Consultant"})}),m.map((T,D)=>s.jsxs("div",{className:"p-3 text-center border-r border-gray-200",children:[s.jsx("div",{className:"text-sm text-gray-600",children:T.toLocaleDateString("fr-FR",{weekday:"short"})}),s.jsx("div",{className:"text-gray-900",children:T.getDate()})]},D))]}),o.map(T=>{const I=(w.get(T.id)??[]).map(z=>{const L=new Date(z.startDate),B=new Date(z.endDate),M=m[0],X=m[a-1],W=L<M?M:L,be=B>X?X:B,ee=Ih(W,M),Y=Ih(be,M)-ee+1;return{it:z,startIdx:ee,days:Y}}).filter(z=>z.days>0&&z.startIdx>=0&&z.startIdx<a);return s.jsxs("div",{className:"grid grid-cols-[200px_repeat(14,1fr)] border-b border-gray-200 hover:bg-gray-50",children:[s.jsxs("div",{className:"p-3 border-r border-gray-200 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-blue-700 text-sm",children:T.name.split(" ").filter(Boolean).map(z=>z[0]).join("").slice(0,2)})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-gray-900 text-sm truncate",children:T.name}),s.jsx("div",{className:"text-gray-500 text-xs",children:T.service})]})]}),m.map((z,L)=>{const B=I.find(W=>L>=W.startIdx&&L<W.startIdx+W.days),M=B&&L===B.startIdx,X=tw(T,z);return s.jsx("div",{className:"border-r border-gray-200 p-1 relative min-h-[60px]",onDoubleClick:()=>{!B&&X&&E(T.id,z)},title:!B&&X?"Double-clic pour ajouter":void 0,children:B?M?s.jsx("button",{type:"button",onClick:()=>void C(B.it.id),className:`absolute top-1 left-1 h-[calc(100%-8px)] rounded px-2 py-1 text-xs overflow-hidden text-white ${B.it.kind==="time_off"?"bg-red-500":"bg-blue-500"}`,style:{width:`calc(${B.days*100}% + ${(B.days-1)*1}px)`},title:"Cliquer pour supprimer",children:s.jsx("div",{className:"truncate",children:B.it.title})}):null:X?s.jsx("div",{className:"w-full h-full bg-green-50 rounded"}):s.jsx("div",{className:"w-full h-full bg-gray-100 rounded"})},L)})]},T.id)})]})}),s.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-50 border border-green-200 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Travaille (libre)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-200 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Ne travaille pas"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Rserv"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Absence / indispo"})]})]})]})}const Dh={mon:!0,tue:!0,wed:!0,thu:!0,fri:!0,sat:!1,sun:!1};function $h({isOpen:o,onClose:r,onSave:n,consultant:a,competenceOptions:c=[]}){const[u,h]=j.useState(a?.name||""),[p,m]=j.useState(a?.email||""),[g,v]=j.useState(a?.phone||""),[_,w]=j.useState(a?.service||"SIRH"),[b,S]=j.useState(a?.location||""),[E,C]=j.useState(a?.competences||[]),[T,D]=j.useState(""),[I,z]=j.useState(a?.workDays||Dh),[L,B]=j.useState(!1);j.useEffect(()=>{o&&(h(a?.name||""),m(a?.email||""),v(a?.phone||""),w(a?.service||"SIRH"),S(a?.location||""),C(a?.competences||[]),D(""),z(a?.workDays||Dh))},[o,a]);const M=()=>{T&&!E.includes(T)&&(C([...E,T]),D(""))},X=G=>{C(E.filter(Y=>Y!==G))},W=G=>{z(Y=>({...Y,[G]:!Y[G]}))},be=async G=>{G.preventDefault(),await n({name:u,email:p.trim()||"",phone:g.trim()||"",service:_,location:b,competences:E,workDays:I}),B(!0),setTimeout(()=>{r()},700)},ee=[{key:"mon",label:"Lun"},{key:"tue",label:"Mar"},{key:"wed",label:"Mer"},{key:"thu",label:"Jeu"},{key:"fri",label:"Ven"},{key:"sat",label:"Sam"},{key:"sun",label:"Dim"}];return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le consultant":"Ajouter un consultant",children:s.jsxs("form",{onSubmit:be,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom complet *"}),s.jsx("input",{type:"text",value:u,onChange:G=>h(G.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Jean Dupont"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:p,onChange:G=>m(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"jean.dupont@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tlphone"}),s.jsx("input",{type:"tel",value:g,onChange:G=>v(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Service *"}),s.jsxs("select",{value:_,onChange:G=>w(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"SIRH",children:"SIRH"}),s.jsx("option",{value:"Finance",children:"Finance"}),s.jsx("option",{value:"Support",children:"Support"}),s.jsx("option",{value:"Formation",children:"Formation"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Localisation *"}),s.jsx("input",{type:"text",value:b,onChange:G=>S(G.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Paris, Lyon, etc."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Comptences"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:T,onChange:G=>D(G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une comptence"}),c.filter(G=>!E.includes(G)).map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsx("button",{type:"button",onClick:M,disabled:!T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(ot,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(G=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[G,s.jsx("button",{type:"button",onClick:()=>X(G),className:"hover:bg-blue-100 rounded-full p-0.5",children:s.jsx(Hr,{className:"w-3 h-3"})})]},G))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Jours travaills"}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:ee.map(G=>s.jsxs("label",{className:`flex items-center justify-center gap-2 px-2 py-2 rounded-lg border cursor-pointer select-none ${I[G.key]?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-700"}`,children:[s.jsx("input",{type:"checkbox",checked:I[G.key],onChange:()=>W(G.key),className:"hidden"}),s.jsx("span",{className:"text-sm",children:G.label})]},G.key))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Mettre  jour":"Ajouter"})]})]})}),L&&s.jsx(He,{message:a?"Consultant mis  jour":"Consultant ajout avec succs",type:"success",onClose:()=>B(!1)})]})}function nw(){const[o,r]=j.useState("table"),[n,a]=j.useState([]),[c,u]=j.useState([]),[h,p]=j.useState(!0),[m,g]=j.useState(null),[v,_]=j.useState(!1),[w,b]=j.useState(void 0),[S,E]=j.useState(""),[C,T]=j.useState(""),[D,I]=j.useState(""),[z,L]=j.useState(!1),[B,M]=j.useState(""),X=j.useMemo(()=>c.map(le=>le.name),[c]),W=async()=>{p(!0),g(null);try{const[le,J]=await Promise.all([Ql(),ip()]);a(le),u(J)}catch(le){g(le?.message??"Erreur lors du chargement des donnes.")}finally{p(!1)}};j.useEffect(()=>{W()},[]);const be=j.useMemo(()=>Array.from(new Set(n.flatMap(le=>le.competences??[]))).sort(),[n]),ee=j.useMemo(()=>Array.from(new Set(n.map(le=>le.location))).sort(),[n]),G=j.useMemo(()=>{const le=S.trim().toLowerCase();return n.filter(J=>{const U=!le||J.name.toLowerCase().includes(le)||(J.email??"").toLowerCase().includes(le),ne=!C||(J.competences??[]).includes(C),Q=!D||J.location===D;return U&&ne&&Q})},[n,S,C,D]),Y=async le=>{try{await px(le),await W(),M("Consultant ajout"),L(!0)}catch(J){g(J?.message??"Erreur lors de la cration.")}},pe=async le=>{if(w)try{await mx(w.id,le),await W(),b(void 0),M("Consultant mis  jour"),L(!0)}catch(J){g(J?.message??"Erreur lors de la mise  jour.")}},Ee=async le=>{if(confirm("tes-vous sr de vouloir supprimer ce consultant ?"))try{await gx(le),await W(),M("Consultant supprim"),L(!0)}catch(J){g(J?.message??"Erreur lors de la suppression.")}};return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{onClick:()=>void W(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un consultant...",value:S,onChange:le=>E(le.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ml,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:C,onChange:le=>T(le.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les comptences"}),be.map(le=>s.jsx("option",{value:le,children:le},le))]})]}),s.jsxs("select",{value:D,onChange:le=>I(le.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les localisations"}),ee.map(le=>s.jsx("option",{value:le,children:le},le))]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>r("table"),className:`px-4 py-2 rounded-md transition-colors ${o==="table"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Liste"}),s.jsxs("button",{onClick:()=>r("calendar"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${o==="calendar"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(br,{className:"w-4 h-4"}),"Planning"]})]}),s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter un consultant"})]})]})]}),o==="table"?s.jsx(Yx,{consultants:G,onEdit:le=>b(le),onDelete:le=>void Ee(le)}):s.jsx(rw,{consultants:G}),s.jsx($h,{isOpen:v,onClose:()=>_(!1),onSave:Y,competenceOptions:X}),w&&s.jsx($h,{isOpen:!!w,onClose:()=>b(void 0),onSave:pe,consultant:w,competenceOptions:X}),z&&s.jsx(He,{message:B,type:"success",onClose:()=>L(!1)})]})}function Lh({isOpen:o,onClose:r,onSave:n,article:a,prestationOptions:c,competenceOptions:u,serviceOptions:h=["SIRH","Finance","Support","Formation"]}){const p=c?.[0]??"Installation",m=h?.[0]??"SIRH",[g,v]=j.useState(""),[_,w]=j.useState(p),[b,S]=j.useState(m),[E,C]=j.useState([]),[T,D]=j.useState(""),[I,z]=j.useState(1),[L,B]=j.useState("Sur site"),[M,X]=j.useState(""),[W,be]=j.useState(!1),[ee,G]=j.useState(!1),Y=j.useMemo(()=>u.filter(J=>!E.includes(J)),[u,E]);j.useEffect(()=>{o&&(v(a?.name??""),w(a?.type??p),S(a?.service??m),C(a?.competencesRequired??[]),D(""),z(a?.standardDuration??1),B(a?.mode??"Sur site"),X(a?.description??""))},[o,a,p,m]);const pe=()=>{T&&!E.includes(T)&&(C([...E,T]),D(""))},Ee=J=>{C(E.filter(U=>U!==J))},le=async J=>{J.preventDefault(),G(!0);try{await n({name:g,type:_,service:b,competencesRequired:E,standardDuration:I,mode:L,description:M}),be(!0),setTimeout(()=>{r()},700)}finally{G(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier l'article":"Crer un article",children:s.jsxs("form",{onSubmit:le,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom de l'article *"}),s.jsx("input",{type:"text",value:g,onChange:J=>v(J.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Installation SIRH Paie"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de prestation *"}),s.jsx("select",{value:_,onChange:J=>w(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.length===0?s.jsx("option",{value:p,children:p}):c.map(J=>s.jsx("option",{value:J,children:J},J))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Service propritaire *"}),s.jsx("select",{value:b,onChange:J=>S(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:h.map(J=>s.jsx("option",{value:J,children:J},J))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dure standard (jours) *"}),s.jsx("input",{type:"number",min:"1",value:I,onChange:J=>z(Number(J.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Mode d'intervention *"}),s.jsxs("select",{value:L,onChange:J=>B(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"Sur site",children:"Sur site"}),s.jsx("option",{value:" distance",children:" distance"}),s.jsx("option",{value:"Hybride",children:"Hybride"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Comptences ncessaires *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:T,onChange:J=>D(J.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une comptence"}),Y.map(J=>s.jsx("option",{value:J,children:J},J))]}),s.jsx("button",{type:"button",onClick:pe,disabled:!T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Ajouter la comptence",children:s.jsx(ot,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(J=>s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[J,s.jsx("button",{type:"button",onClick:()=>Ee(J),className:"hover:bg-blue-100 rounded-full p-0.5",title:"Retirer",children:s.jsx(Hr,{className:"w-3 h-3"})})]},J))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:M,onChange:J=>X(J.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description de la prestation..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,disabled:ee,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:ee?"Enregistrement...":a?"Mettre  jour":"Crer"})]})]})}),W&&s.jsx(He,{message:a?"Article mis  jour":"Article cr avec succs",type:"success",onClose:()=>be(!1)})]})}async function lp(){const{data:o,error:r}=await ae.from("articles").select(`
      id,
      name,
      service,
      standard_duration_days,
      mode,
      description,
      prestation:prestations(name),
      competences:article_competences(
        competence:competences(name)
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(o??[]).map(n=>({id:n.id,name:n.name,type:n.prestation?.name??"",service:n.service,competencesRequired:(n.competences??[]).map(a=>a.competence?.name).filter(Boolean),standardDuration:n.standard_duration_days,mode:n.mode,description:n.description??""}))}async function sw(o){const r=await ap(o.type),{data:n,error:a}=await ae.from("articles").insert({name:o.name,prestation_id:r,service:o.service,standard_duration_days:o.standardDuration,mode:o.mode,description:o.description??""}).select("id").single();if(a)throw a;const c=await ua(o.competencesRequired);if(c.length>0){const{error:u}=await ae.from("article_competences").insert(c.map(h=>({article_id:n.id,competence_id:h})));if(u)throw u}}async function iw(o,r){const n=await ap(r.type),{error:a}=await ae.from("articles").update({name:r.name,prestation_id:n,service:r.service,standard_duration_days:r.standardDuration,mode:r.mode,description:r.description??"",updated_at:new Date().toISOString()}).eq("id",o);if(a)throw a;const{error:c}=await ae.from("article_competences").delete().eq("article_id",o);if(c)throw c;const u=await ua(r.competencesRequired);if(u.length>0){const{error:h}=await ae.from("article_competences").insert(u.map(p=>({article_id:o,competence_id:p})));if(h)throw h}}async function aw(o){const{error:r}=await ae.from("article_competences").delete().eq("article_id",o);if(r)throw r;const{error:n}=await ae.from("articles").delete().eq("id",o);if(n)throw n}function ow(){const[o,r]=j.useState([]),[n,a]=j.useState([]),[c,u]=j.useState([]),[h,p]=j.useState(!0),[m,g]=j.useState(null),[v,_]=j.useState(!1),[w,b]=j.useState(),[S,E]=j.useState(""),[C,T]=j.useState(!1),[D,I]=j.useState(""),z=j.useMemo(()=>n.map(Y=>Y.name),[n]),L=j.useMemo(()=>c.map(Y=>Y.name),[c]),B=async()=>{p(!0),g(null);try{const[Y,pe,Ee]=await Promise.all([lp(),fx(),ip()]);r(Y),a(pe),u(Ee)}catch(Y){g(Y?.message??"Erreur lors du chargement des donnes.")}finally{p(!1)}};j.useEffect(()=>{B()},[]);const M=j.useMemo(()=>{const Y=S.trim().toLowerCase();return Y?o.filter(pe=>pe.name.toLowerCase().includes(Y)||pe.type.toLowerCase().includes(Y)||pe.service.toLowerCase().includes(Y)):o},[o,S]),X=async Y=>{await sw(Y),await B(),I("Article ajout avec succs"),T(!0)},W=async Y=>{w&&(await iw(w.id,Y),await B(),I("Article mis  jour"),T(!0),b(void 0))},be=async Y=>{confirm("tes-vous sr de vouloir supprimer cet article ?")&&(await aw(Y),await B(),I("Article supprim"),T(!0))},ee=Y=>{switch(Y){case"Sur site":return"bg-blue-100 text-blue-700";case" distance":return"bg-green-100 text-green-700";case"Hybride":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},G=Y=>({Installation:"bg-orange-100 text-orange-700",Paramtrage:"bg-blue-100 text-blue-700",Formation:"bg-green-100 text-green-700","Reprise de donnes":"bg-purple-100 text-purple-700",Support:"bg-gray-100 text-gray-700",Migration:"bg-pink-100 text-pink-700"})[Y]??"bg-gray-100 text-gray-700";return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{onClick:()=>void B(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un article...",value:S,onChange:Y=>E(Y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un article"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:M.map(Y=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-gray-900 mb-2",children:Y.name}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsx("span",{className:`px-2 py-1 rounded text-sm ${G(Y.type)}`,children:Y.type}),s.jsx("span",{className:`px-2 py-1 rounded text-sm ${ee(Y.mode)}`,children:Y.mode})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b(Y),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>void be(Y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Service"}),s.jsx("div",{className:"text-gray-900",children:Y.service})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Comptences requises"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Y.competencesRequired.map((pe,Ee)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:pe},`${pe}-${Ee}`))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Dure standard"}),s.jsxs("div",{className:"text-gray-900",children:[Y.standardDuration," jour",Y.standardDuration>1?"s":""]})]}),Y.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Description"}),s.jsx("div",{className:"text-gray-600 text-sm",children:Y.description})]})]})]},Y.id))}),M.length===0&&s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:s.jsx("div",{className:"text-gray-500",children:"Aucun article trouv"})}),s.jsx(Lh,{isOpen:v,onClose:()=>_(!1),onSave:X,prestationOptions:z,competenceOptions:L}),w&&s.jsx(Lh,{isOpen:!!w,onClose:()=>b(void 0),onSave:W,article:w,prestationOptions:z,competenceOptions:L}),C&&s.jsx(He,{message:D,type:"success",onClose:()=>T(!1)})]})}function Mh({isOpen:o,onClose:r,onSave:n,competence:a}){const[c,u]=j.useState(a?.name??""),[h,p]=j.useState(!1),[m,g]=j.useState(!1);j.useEffect(()=>{o&&u(a?.name??"")},[o,a]);const v=async _=>{_.preventDefault(),p(!0);try{await n({name:c}),g(!0),setTimeout(()=>r(),700)}finally{p(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier la comptence":"Crer une comptence",size:"sm",children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom de la comptence *"}),s.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex : Paie"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,disabled:h,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:h?"Enregistrement...":a?"Mettre  jour":"Crer"})]})]})}),m&&s.jsx(He,{message:a?"Comptence mise  jour":"Comptence cre",type:"success",onClose:()=>g(!1)})]})}async function lw(){const{data:o,error:r}=await ae.from("competences").select("id,name").order("name",{ascending:!0});if(r)throw r;return o??[]}async function cw(o){const r=o.trim();if(!r)throw new Error("Le nom de comptence est vide.");const{error:n}=await ae.from("competences").insert({name:r});if(n)throw n}async function uw(o,r){const n=r.trim();if(!n)throw new Error("Le nom de comptence est vide.");const{error:a}=await ae.from("competences").update({name:n}).eq("id",o);if(a)throw a}async function dw(o){const{error:r}=await ae.from("article_competences").delete().eq("competence_id",o);if(r)throw r;const{error:n}=await ae.from("consultant_competences").delete().eq("competence_id",o);if(n)throw n;const{error:a}=await ae.from("competences").delete().eq("id",o);if(a)throw a}function hw(){const[o,r]=j.useState([]),[n,a]=j.useState(!0),[c,u]=j.useState(null),[h,p]=j.useState(""),[m,g]=j.useState(!1),[v,_]=j.useState(),[w,b]=j.useState(!1),[S,E]=j.useState(""),C=async()=>{a(!0),u(null);try{const L=await lw();r(L)}catch(L){u(L?.message??"Erreur lors du chargement des comptences.")}finally{a(!1)}};j.useEffect(()=>{C()},[]);const T=j.useMemo(()=>{const L=h.trim().toLowerCase();return L?o.filter(B=>B.name.toLowerCase().includes(L)):o},[o,h]),D=async L=>{await cw(L.name),await C(),E("Comptence ajoute"),b(!0)},I=async L=>{v&&(await uw(v.id,L.name),await C(),E("Comptence mise  jour"),b(!0),_(void 0))},z=async L=>{confirm("Supprimer cette comptence ? Elle sera aussi retire des articles et consultants qui l'utilisent.")&&(await dw(L),await C(),E("Comptence supprime"),b(!0))};return n?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):c?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:c}),s.jsx("button",{onClick:()=>void C(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher une comptence...",value:h,onChange:L=>p(L.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer une comptence"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Comptence"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(L=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-gray-900",children:L.name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>_(L),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>void z(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},L.id))})]})}),T.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucune comptence trouve"})]}),s.jsx(Mh,{isOpen:m,onClose:()=>g(!1),onSave:D}),v&&s.jsx(Mh,{isOpen:!!v,onClose:()=>_(void 0),onSave:I,competence:v}),w&&s.jsx(He,{message:S,type:"success",onClose:()=>b(!1)})]})}const fw=["Installation SIRH Paie","Installation GTA","Installation SIGF","Paramtrage Paie","Paramtrage GTA","Paramtrage SIGF Standard","Paramtrage avanc","Formation utilisateurs","Formation administrateurs","Reprise de donnes","Migration donnes"];function Uh({isOpen:o,onClose:r,onSave:n,template:a}){const[c,u]=j.useState(a?.name||""),[h,p]=j.useState(a?.description||""),[m,g]=j.useState(a?.type||"Packag"),[v,_]=j.useState(a?.articles||[]),[w,b]=j.useState(""),[S,E]=j.useState(a?.estimatedDuration||30),[C,T]=j.useState(a?.estimatedDays||15),[D,I]=j.useState(!1),z=()=>{w&&!v.includes(w)&&(_([...v,w]),b(""))},L=M=>{_(v.filter(X=>X!==M))},B=M=>{M.preventDefault(),n({name:c,description:h,type:m,articles:v,estimatedDuration:S,estimatedDays:C}),I(!0),setTimeout(()=>{r(),a||(u(""),p(""),g("Packag"),_([]),E(30),T(15))},1e3)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le modle de projet":"Crer un modle de projet",children:s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom du modle *"}),s.jsx("input",{type:"text",value:c,onChange:M=>u(M.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Pack SIRH Paie Standard"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:h,onChange:M=>p(M.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description du modle de projet..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type de projet *"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"Packag",checked:m==="Packag",onChange:M=>g(M.target.value),className:"text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Packag"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"Sur-mesure",checked:m==="Sur-mesure",onChange:M=>g(M.target.value),className:"text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"Sur-mesure"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Articles inclus *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("select",{value:w,onChange:M=>b(M.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner un article"}),fw.filter(M=>!v.includes(M)).map(M=>s.jsx("option",{value:M,children:M},M))]}),s.jsx("button",{type:"button",onClick:z,disabled:!w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(ot,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-2",children:v.map((M,X)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-gray-700",children:M}),s.jsx("button",{type:"button",onClick:()=>L(M),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:s.jsx(Hr,{className:"w-4 h-4 text-gray-600"})})]},X))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dure estime (jours calendaires) *"}),s.jsx("input",{type:"number",min:"1",value:S,onChange:M=>E(Number(M.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Jours vendus *"}),s.jsx("input",{type:"number",min:"1",value:C,onChange:M=>T(Number(M.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Mettre  jour":"Crer"})]})]})}),D&&s.jsx(He,{message:a?"Modle mis  jour":"Modle cr avec succs",type:"success",onClose:()=>I(!1)})]})}const pw=[{id:"1",article:"Installation",dependencies:[]},{id:"2",article:"Paramtrage",dependencies:["Installation"]},{id:"3",article:"Reprise de donnes",dependencies:["Paramtrage"]},{id:"4",article:"Formation administrateurs",dependencies:["Paramtrage"]},{id:"5",article:"Formation utilisateurs",dependencies:["Formation administrateurs"]}];function mw({isOpen:o,onClose:r}){const[n,a]=j.useState(pw),[c,u]=j.useState(!1),h=["Installation","Paramtrage","Formation administrateurs","Formation utilisateurs","Reprise de donnes","Migration","Support","Tests","Validation","Mise en production"],p=()=>{const w={id:Date.now().toString(),article:"",dependencies:[]};a([...n,w])},m=w=>{a(n.filter(b=>b.id!==w))},g=(w,b)=>{a(n.map(S=>S.id===w?{...S,article:b}:S))},v=(w,b)=>{a(n.map(S=>{if(S.id===w){const E=S.dependencies.includes(b)?S.dependencies.filter(C=>C!==b):[...S.dependencies,b];return{...S,dependencies:E}}return S}))},_=()=>{u(!0),setTimeout(()=>{r()},1500)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:"Configuration du squenage",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-gray-600",children:"Dfinissez l'ordre et les dpendances entre les prestations. Une prestation ne peut commencer que lorsque ses dpendances sont termines."}),s.jsx("div",{className:"space-y-4",children:n.map((w,b)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center",children:b+1}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Prestation"}),s.jsxs("select",{value:w.article,onChange:S=>g(w.id,S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Slectionner une prestation"}),h.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),b>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Dpend de :"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.slice(0,b).map(S=>S.article&&s.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:w.dependencies.includes(S.article),onChange:()=>v(w.id,S.article),className:"rounded text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:S.article})]},S.id))})]})]}),s.jsx("button",{onClick:()=>m(w.id),className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),b<n.length-1&&s.jsx("div",{className:"flex justify-center mt-3",children:s.jsx(_g,{className:"w-5 h-5 text-gray-400"})})]},w.id))}),s.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-blue-500 hover:text-blue-600 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Ajouter une tape"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),s.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer le squenage"})]})]})}),c&&s.jsx(He,{message:"Squenage enregistr avec succs",type:"success",onClose:()=>u(!1)})]})}const gw=[{id:"1",name:"Pack SIRH Paie Standard",description:"Installation et paramtrage standard du module Paie",type:"Packag",articles:["Installation SIRH Paie","Paramtrage Paie","Formation utilisateurs"],estimatedDuration:30,estimatedDays:15},{id:"2",name:"Pack SIGF Dploiement simple",description:"Dploiement rapide du systme de gestion financire",type:"Packag",articles:["Installation SIGF","Paramtrage SIGF Standard","Formation administrateurs"],estimatedDuration:45,estimatedDays:20},{id:"3",name:"Pack GTA Complet",description:"Implmentation complte de la gestion des temps",type:"Packag",articles:["Installation GTA","Paramtrage avanc","Formation utilisateurs","Formation administrateurs"],estimatedDuration:60,estimatedDays:25}];function yw(){const[o,r]=j.useState("templates"),[n,a]=j.useState(gw),[c,u]=j.useState(!1),[h,p]=j.useState(),[m,g]=j.useState(!1),[v,_]=j.useState(!1),[w,b]=j.useState(""),S=T=>{const D={...T,id:Date.now().toString()};a([...n,D]),b("Modle de projet cr"),_(!0)},E=T=>{h&&(a(n.map(D=>D.id===h.id?{...T,id:h.id}:D)),b("Modle de projet mis  jour"),_(!0),p(void 0))},C=T=>{confirm("tes-vous sr de vouloir supprimer ce modle ?")&&(a(n.filter(D=>D.id!==T)),b("Modle supprim"),_(!0))};return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>r("templates"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="templates"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(yl,{className:"w-5 h-5"}),s.jsx("span",{children:"Projets packags"})]}),s.jsxs("button",{onClick:()=>r("sequencing"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="sequencing"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(nh,{className:"w-5 h-5"}),s.jsx("span",{children:"Squenage des prestations"})]}),s.jsxs("button",{onClick:()=>r("settings"),className:`flex items-center gap-2 pb-4 border-b-2 transition-colors ${o==="settings"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[s.jsx(zl,{className:"w-5 h-5"}),s.jsx("span",{children:"Paramtres gnraux"})]})]})}),o==="templates"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Modles de projets packags"}),s.jsx("p",{className:"text-gray-600",children:"Configurez des modles de projet rutilisables avec leurs articles associs"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Nouveau modle"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(T=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-gray-900",children:T.name}),s.jsx("span",{className:`px-2 py-1 rounded text-sm ${T.type==="Packag"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:T.type})]}),s.jsx("p",{className:"text-gray-600 text-sm",children:T.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>p(T),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(T.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Vt,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Articles inclus"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:T.articles.map((D,I)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:D},I))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Dure estime"}),s.jsxs("div",{className:"text-gray-900",children:[T.estimatedDuration," jours"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Jours vendus"}),s.jsxs("div",{className:"text-gray-900",children:[T.estimatedDays," jours"]})]})]})]})]},T.id))}),n.length===0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(yl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("div",{className:"text-gray-500",children:"Aucun modle de projet configur"})]})]}),o==="sequencing"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Squenage des prestations"}),s.jsx("p",{className:"text-gray-600",children:"Dfinissez les dpendances entre les prestations pour automatiser la cration des plannings"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(nh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-gray-900 mb-2",children:"Configuration du squenage"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Configurez l'ordre et les dpendances entre les diffrentes prestations"}),s.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Configurer le squenage"})]})]}),o==="settings"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-gray-900 mb-2",children:"Paramtres gnraux"}),s.jsx("p",{className:"text-gray-600",children:"Configuration globale de l'application"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Alertes d'cart de charge"})]}),s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Rappels de validations client"})]}),s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),s.jsx("span",{className:"text-gray-700",children:"Notifications d'interventions  venir"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-gray-900 mb-4",children:"Prfrences d'affichage"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Langue"}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"fr",children:"Franais"}),s.jsx("option",{value:"en",children:"English"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Fuseau horaire"}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"Europe/Paris",children:"Europe/Paris (GMT+1)"}),s.jsx("option",{value:"Europe/London",children:"Europe/London (GMT+0)"})]})]})]})]})]})]}),s.jsx(Uh,{isOpen:c,onClose:()=>u(!1),onSave:S}),h&&s.jsx(Uh,{isOpen:!!h,onClose:()=>p(void 0),onSave:E,template:h}),s.jsx(mw,{isOpen:m,onClose:()=>g(!1)}),v&&s.jsx(He,{message:w,type:"success",onClose:()=>_(!1)})]})}function vw(){return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(br,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-gray-900 mb-2",children:"Planning des interventions"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Vue d'ensemble des interventions planifies pour tous les projets"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Cette vue sera prochainement disponible avec un calendrier interactif"})]})})}function xw(){return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx(Vh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-gray-900 mb-2",children:"Reporting et analyses"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Tableaux de bord et indicateurs de performance des projets"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Les rapports dtaills seront prochainement disponibles"})]})})}const ww=()=>({name:"",role:"",email:"",phone:""});function zh({isOpen:o,onClose:r,onSave:n,client:a}){const[c,u]=j.useState(a?.name??""),[h,p]=j.useState(a?.address??""),[m,g]=j.useState(a?.phone??""),[v,_]=j.useState(a?.tier??"Tier 3"),[w,b]=j.useState((a?.contacts??[]).map(L=>({name:L.name??"",role:L.role??"",email:L.email??"",phone:L.phone??""}))),[S,E]=j.useState(!1);j.useEffect(()=>{o&&(u(a?.name??""),p(a?.address??""),g(a?.phone??""),_(a?.tier??"Tier 3"),b((a?.contacts??[]).map(L=>({name:L.name??"",role:L.role??"",email:L.email??"",phone:L.phone??""}))))},[o,a]);const C=j.useMemo(()=>!(!c.trim()||w.some(L=>!L.name.trim())),[c,w]),T=()=>b(L=>[...L,ww()]),D=L=>b(B=>B.filter((M,X)=>X!==L)),I=(L,B)=>{b(M=>M.map((X,W)=>W===L?{...X,...B}:X))},z=L=>{L.preventDefault();const B=w.map(M=>({name:M.name.trim(),role:(M.role??"").trim(),email:(M.email??"").trim(),phone:(M.phone??"").trim()})).filter(M=>M.name);n({name:c.trim(),address:h??"",phone:m??"",tier:v,contacts:B.map(M=>({id:"",...M}))}),E(!0),setTimeout(()=>r(),700)};return s.jsxs(s.Fragment,{children:[s.jsx(Ve,{isOpen:o,onClose:r,title:a?"Modifier le client":"Crer un client",children:s.jsxs("form",{onSubmit:z,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Numro client"}),s.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:a?a.clientNumber:"Automatique"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Gnr automatiquement. Non modifiable."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tier *"}),s.jsxs("select",{value:v,onChange:L=>_(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"Tier 1",children:"Tier 1"}),s.jsx("option",{value:"Tier 2",children:"Tier 2"}),s.jsx("option",{value:"Tier 3",children:"Tier 3"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Nom *"}),s.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom du client"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Adresse"}),s.jsx("input",{type:"text",value:h,onChange:L=>p(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Adresse complte"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Tlphone"}),s.jsx("input",{type:"text",value:m,onChange:L=>g(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 ..."})]}),s.jsxs("div",{className:"pt-2 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm text-gray-700",children:"Contacts"}),s.jsxs("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),"Ajouter un contact"]})]}),w.length===0?s.jsx("div",{className:"text-sm text-gray-500",children:"Aucun contact"}):s.jsx("div",{className:"space-y-3",children:w.map((L,B)=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Contact #",B+1]}),s.jsx("button",{type:"button",onClick:()=>D(B),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Nom *"}),s.jsx("input",{type:"text",value:L.name,onChange:M=>I(B,{name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Prnom Nom"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rle"}),s.jsx("input",{type:"text",value:L.role,onChange:M=>I(B,{role:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"DSI, RH, Achats"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:L.email,onChange:M=>I(B,{email:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contact@client.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Tlphone"}),s.jsx("input",{type:"text",value:L.phone,onChange:M=>I(B,{phone:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33 ..."})]})]})]},B))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:!C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Mettre  jour":"Crer"})]})]})}),S&&s.jsx(He,{message:a?"Client mis  jour":"Client cr",type:"success",onClose:()=>E(!1)})]})}function bw(){const[o,r]=j.useState([]),[n,a]=j.useState(!0),[c,u]=j.useState(null),[h,p]=j.useState(""),[m,g]=j.useState(""),[v,_]=j.useState(!1),[w,b]=j.useState(void 0),[S,E]=j.useState(""),[C,T]=j.useState(!1),D=async()=>{a(!0),u(null);try{const W=await sp();r(W)}catch(W){u(W?.message??"Erreur de chargement.")}finally{a(!1)}};j.useEffect(()=>{D()},[]);const I=j.useMemo(()=>["Tier 1","Tier 2","Tier 3"],[]),z=j.useMemo(()=>{const W=h.trim().toLowerCase();return o.filter(be=>{const ee=!W||be.name.toLowerCase().includes(W)||(be.clientNumber??"").toLowerCase().includes(W)||(be.phone??"").toLowerCase().includes(W),G=!m||be.tier===m;return ee&&G})},[o,h,m]),L=async W=>{await ux(W),await D(),E("Client ajout"),T(!0)},B=async W=>{w&&(await dx(w.id,W),await D(),b(void 0),E("Client mis  jour"),T(!0))},M=async W=>{confirm("Supprimer ce client ?")&&(await hx(W),await D(),E("Client supprim"),T(!0))};if(n)return s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})});if(c)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:c}),s.jsx("button",{type:"button",onClick:()=>void D(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ressayer"})]})});const X=W=>({"Tier 1":"bg-green-100 text-green-700","Tier 2":"bg-blue-100 text-blue-700","Tier 3":"bg-gray-100 text-gray-700"})[W];return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:h,onChange:W=>p(W.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ml,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:m,onChange:W=>g(W.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Tous les tiers"}),I.map(W=>s.jsx("option",{value:W,children:W},W))]})]})]}),s.jsxs("button",{type:"button",onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Crer un client"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"N client"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Nom"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Tier"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Tlphone"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Adresse"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Contacts"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:z.map(W=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 text-gray-900",children:W.clientNumber}),s.jsx("td",{className:"px-6 py-4 text-gray-900",children:W.name}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm ${X(W.tier)}`,children:W.tier})}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:W.phone||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:W.address||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:W.contacts?.length?s.jsxs("span",{children:[W.contacts.length," contact",W.contacts.length>1?"s":""," ",s.jsxs("span",{className:"text-gray-400",children:[" ",W.contacts[0].name,W.contacts.length>1?"":""]})]}):""}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>b(W),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void M(W.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},W.id))})]})}),z.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun client trouv"})]}),s.jsx(zh,{isOpen:v,onClose:()=>_(!1),onSave:L}),w&&s.jsx(zh,{isOpen:!!w,onClose:()=>b(void 0),onSave:B,client:w}),C&&s.jsx(He,{message:S,type:"success",onClose:()=>T(!1)})]})}const Fh={devis_en_cours:"Devis en cours",commande_receptionnee:"Commande rceptionne",attente_affectation_dp:"En attente d'affectation de DP",en_cours_deploiement:"En cours de dploiement",facture:"Factur",paye:"Pay",termine:"Termin"};function jw(o){return{devis_en_cours:"bg-gray-100 text-gray-700",commande_receptionnee:"bg-blue-50 text-blue-700",attente_affectation_dp:"bg-amber-50 text-amber-700",en_cours_deploiement:"bg-indigo-50 text-indigo-700",facture:"bg-purple-50 text-purple-700",paye:"bg-green-50 text-green-700",termine:"bg-green-100 text-green-700"}[o]??"bg-gray-100 text-gray-700"}function _w(){const[o,r]=j.useState([]),[n,a]=j.useState([]),[c,u]=j.useState([]),[h,p]=j.useState(!0),[m,g]=j.useState(null),[v,_]=j.useState(""),[w,b]=j.useState(""),[S,E]=j.useState(!1),[C,T]=j.useState(void 0),[D,I]=j.useState(void 0),[z,L]=j.useState(""),[B,M]=j.useState(!1),X=async()=>{p(!0),g(null);try{const[ee,G,Y]=await Promise.all([yx(),lp(),Ql()]);r(ee),a(G),u(Y)}catch(ee){g(ee?.message??"Erreur de chargement.")}finally{p(!1)}};j.useEffect(()=>{X()},[]);const W=j.useMemo(()=>{const ee=v.trim().toLowerCase();return o.filter(G=>{const Y=!ee||G.name.toLowerCase().includes(ee)||G.clientName.toLowerCase().includes(ee)||(G.clientNumber??"").toLowerCase().includes(ee)||(G.projectManagerName??"").toLowerCase().includes(ee)||(G.commercialName??"").toLowerCase().includes(ee),pe=!w||G.status===w;return Y&&pe})},[o,v,w]),be=async ee=>{confirm("Supprimer ce projet ?")&&(await wx(ee),await X(),L("Projet supprim"),M(!0))};return h?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Chargement"})}):m?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-red-600 mb-3",children:m}),s.jsx("button",{type:"button",onClick:()=>void X(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ressayer"})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher un projet, client, commercial",value:v,onChange:ee=>_(ee.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ml,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:w,onChange:ee=>b(ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Tous les tats"}),Object.entries(Fh).map(([ee,G])=>s.jsx("option",{value:ee,children:G},ee))]})]})]}),s.jsxs("button",{type:"button",onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Nouveau projet"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Projet"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Commercial"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"DP"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"Commande"}),s.jsx("th",{className:"px-6 py-3 text-left text-gray-700",children:"tat"}),s.jsx("th",{className:"px-6 py-3 text-right text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:W.map(ee=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 text-gray-900",children:ee.name}),s.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[s.jsx("div",{className:"text-gray-900",children:ee.clientNumber}),s.jsx("div",{className:"text-sm text-gray-500",children:ee.clientName})]}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:ee.commercialName||""}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:ee.projectManagerName||"Non affect"}),s.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[s.jsx("div",{children:ee.orderDate||""}),s.jsx("div",{className:"text-sm text-gray-500",children:ee.salesType||""})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm ${jw(ee.status)}`,children:Fh[ee.status]??ee.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>I(ee),className:"p-2 text-blue-700 hover:bg-blue-50 rounded-lg",title:"Ouvrir",children:s.jsx(Gh,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>T(ee),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:s.jsx(Vr,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>void be(ee.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:s.jsx(Vt,{className:"w-4 h-4"})})]})})]},ee.id))})]})}),W.length===0&&s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Aucun projet trouv"})]}),s.jsx(Il,{isOpen:S,onClose:()=>E(!1),onSaved:async()=>{await X(),L("Projet cr"),M(!0)}}),C&&s.jsx(Il,{isOpen:!!C,onClose:()=>T(void 0),project:C,onSaved:async()=>{await X(),L("Projet mis  jour"),M(!0)}}),D&&s.jsx(op,{isOpen:!!D,onClose:()=>I(void 0),project:D,articles:n,consultants:c}),B&&s.jsx(He,{message:z,type:"success",onClose:()=>M(!1)})]})}function Nw(){const[o,r]=j.useState("portfolio"),[n,a]=j.useState("checking"),[c,u]=j.useState(null);j.useEffect(()=>{(async()=>{try{const{data:p,error:m}=await ae.auth.getSession();if(m)throw m;console.log("Supabase session:",p.session);const{data:g,error:v}=await ae.auth.getUser();v?console.log("Supabase getUser (non bloquant):",v.message):console.log("Supabase user:",g.user),a("ok"),u(null)}catch(p){console.error("Supabase init error:",p),a("error"),u(p?.message??"Erreur Supabase inconnue.")}})()},[]);const h=()=>{switch(o){case"portfolio":return s.jsx(Oh,{});case"projects":return s.jsx(_w,{});case"planning":return s.jsx(vw,{});case"resources":return s.jsx(nw,{});case"clients":return s.jsx(bw,{});case"competences":return s.jsx(hw,{});case"articles":return s.jsx(ow,{});case"reporting":return s.jsx(xw,{});case"administration":return s.jsx(yw,{});default:return s.jsx(Oh,{})}};return n==="error"?s.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-xl w-full bg-white border rounded-lg p-6",children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Configuration Supabase invalide"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Vrifiez que vous avez bien dfini"," ",s.jsx("code",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"VITE_SUPABASE_URL"})," ","et"," ",s.jsx("code",{className:"px-1 py-0.5 bg-gray-100 rounded",children:"VITE_SUPABASE_ANON_KEY"})," ","dans les variables denvironnement (GitHub Actions / Secrets si vous dployez via Pages)."]}),s.jsx("div",{className:"mt-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded p-3",children:c})]})}):s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsx($0,{currentPage:o,onNavigate:r}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Cx,{currentPage:o}),s.jsxs("main",{className:"flex-1 overflow-y-auto",children:[n==="checking"&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-600 border-b bg-white",children:"Connexion  Supabase"}),h()]})]})]})}gg.createRoot(document.getElementById("root")).render(s.jsx(Nw,{}));
